{"version":3,"sources":["components/UI/DesktopNavMenu/DesktopNavMenu.module.css","components/CurrentSong/SongData/SongData.module.css","components/Songs/Song/SongDescription/SongDescription.module.css","components/SearchBar/ItemResult/ItemResult.module.css","components/UI/FormPicture/FormPicture.module.css","components/Authorization/AuthUI/Head/Head.module.css","components/CurrentSong/SongPicture/SongPicture.module.css","components/Player/SongInfo/SongInfo.module.css","components/Profile/Profile.module.css","components/UI/DropdownNav/DropdownNav.module.css","components/BandInfo/BandGenres/BandGenres.module.css","components/BandInfo/BandImage/BandImage.module.css","components/AddSong/UploadSong/UploadSong.module.css","components/AddSong/UploadSong/SongInfo/SongInfo.module.css","components/Songs/Song.module.css","components/UI/ModalSpinner/ModalSpinner.module.css","assets/images/logo.png","components/Authorization/AuthUI/SubmitButton/SubmitButton.module.css","components/Authorization/AuthUI/BottomNote/BottomNote.module.css","assets/images/logoSimple.png","components/BandInfo/BandStatistic/BandStatistic.module.css","components/BandInfo/BandInfo.module.css","components/CurrentSong/CurrentSong.module.css","components/Comments/AddComment/AddComment.module.css","components/Songs/Song/SongAvatar/SongAvatar.module.css","components/Songs/Song/SongDescription/SongStatistics/SongStatistics.module.css","assets/images/icon.png","components/Suggestions/Suggestions.module.css","components/Playlist/PlaylistHeat/Statistics/Statistics.module.css","components/Playlist/PlaylistHeat/BandsList/BandsList.module.css","components/Playlist/PlaylistHeat/Tags/Tags.module.css","components/Admin/InfoPanel/SearchInput/SearchInput.module.css","components/Admin/InfoPanel/InfoResults/InfoResults.module.css","components/Admin/InfoPanel/InfoPanel.module.css","components/Player/AddToPlaylist/PlaylistsMenu/PlaylistMenu.module.css","components/Layout/Footer/Footer.module.css","firebase/index.js","store/authorization/utility.js","store/authorization/reducer.js","store/actionTypes.js","store/band/reducer.js","store/songs/reducer.js","store/admin/reducer.js","store/songs/utility.js","utility/audio.js","store/songs/actions.js","utility/song-queries.js","utility/icons.js","components/SearchBar/ItemResult/ItemResult.js","components/SearchBar/SearchBar.js","components/UI/DesktopNavMenu/DesktopNavMenu.js","components/UI/ModalWrapper/ModalWrapper.js","utility/file-validation.js","utility/user.js","components/UI/FormPicture/FormPicture.js","utility/music-genres.js","components/UI/DataInputs/DataInputs.js","store/authorization/actions.js","components/Profile/Profile.js","components/UI/DropdownNav/Menu/Menu.js","components/UI/DropdownNav/DropdownNav.js","components/Layout/Header/Header.js","components/Authorization/AuthUI/SubmitButton/SubmitButton.js","components/Authorization/AuthUI/BottomNote/BottomNote.js","components/Authorization/AuthUI/Alert/Alert.js","components/Authorization/AuthUI/Head/Head.js","components/Authorization/SignUp/SignUp.js","components/Authorization/SignIn/SignIn.js","components/UI/EditableInput/EditableInput.js","store/band/actions.js","store/band/utility.js","components/BandInfo/BandName/BandName.js","components/BandInfo/BandDescription/BandDescription.js","components/BandInfo/BandGenres/BandGenres.js","components/BandInfo/BandImage/BandImage.js","components/BandInfo/BandStatistic/BandStatistic.js","components/BandInfo/BandInfo.js","components/AddSong/UploadSong/SongInfo/SongInfo.js","components/AddSong/UploadSong/UploadSong.js","components/AddSong/CreateSong.js","components/CurrentSong/SongPicture/SongPicture.js","components/CurrentSong/SongData/SongData.js","components/CurrentSong/CurrentSong.js","components/Comments/AddComment/AddComment.js","components/Comments/CommentsList/CommentsList.js","utility/comments.js","components/Comments/Comments.js","components/Songs/Song/SongAvatar/SongAvatar.js","components/Songs/Song/SongDescription/SongBand/SongBand.js","components/Songs/Song/SongDescription/SongStatistics/SongStatistics.js","components/Songs/Song/SongDescription/SongDescription.js","components/UI/DragListWrapper/DragItemWrapper/DragItemWrapper.js","components/Songs/Song/Song.js","components/UI/DragListWrapper/DragListWrapper.js","components/Songs/Songs.js","components/Band/Band.js","components/Suggestions/Suggestion/Suggestion.js","components/Suggestions/Suggestions.js","utility/suggest-collection.js","components/Main/Main.js","components/Playlists/CreteModal/CreateModal.js","components/Playlists/PlaylistPoster/PlaylistPoster.js","components/Playlists/Playlists.js","components/Playlist/PlaylistHeat/Statistics/Statistics.js","components/Playlist/PlaylistHeat/BandsList/BandsList.js","components/Playlist/PlaylistHeat/Tags/Tags.js","components/Playlist/PlaylistHeat/PlaylistHeat.js","components/Playlist/Playlist.js","components/Collection/Collection.js","components/UI/ModalSpinner/ModalSpinner.js","components/Admin/PanelHeat/PanelHeat.js","components/Admin/SaveCollection/SaveCollection.js","components/Admin/ReorderCollection/ReorderCollection.js","components/Admin/DeleteCollection/DeleteCollection.js","components/Admin/InfoPanel/SearchInput/SearchInput.js","components/Admin/InfoPanel/InfoResults/InfoResults.js","utility/admin.js","components/Admin/InfoPanel/InfoPanel.js","store/admin/actions.js","components/Admin/Admin.js","components/Layout/Content/Content.js","components/Player/AddToPlaylist/PlaylistsMenu/PlaylistsMenu.js","components/Player/AddToPlaylist/AddToPlaylist.js","components/Player/SongInfo/SongInfo.js","components/Player/Player.js","components/Layout/Footer/Footer.js","components/Layout/Layout.js","App.js","serviceWorker.js","index.js","components/UI/DropdownNav/Menu/Menu.module.css","components/Suggestions/Suggestion/Suggestion.module.css","components/Songs/Song/Song.module.css","components/Playlist/PlaylistHeat/PlaylistHeat.module.css"],"names":["module","exports","app","firebase","apiKey","process","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","saveToLocalStorage","data","expiresIn","currentDateTimestamp","Math","floor","Date","getTime","key","localStorage","setItem","getDataFromLocalStorage","keys","userData","Object","entries","value","includes","clearLocalStorage","removeItem","initialState","localId","email","isBand","username","image","idToken","refreshToken","refreshTimerId","loading","submitting","errorMessage","isAdmin","reducer","state","action","type","error","response","message","rememberMe","timerId","length","tokens","success","clearTimeout","bandName","genres","description","updating","bandData","songs","playSong","playNow","playlists","percents","creating","selectedSongCanPlay","fileName","filter","songName","song","find","currentPlaySongIndex","findIndex","songCanPlay","stateSongsClone","songIndex","newData","userIsLikedSong","userLikeId","likesCount","songsClone","sort","random","splice","oldIndex","replaced","newIndex","collections","deleting","collectionsClone","index","shouldUpdate","a","b","position","bandNamesCachingDecorator","src","bandNames","Map","Promise","resolve","reject","has","axios","get","then","band","values","set","catch","getSong","queryParams","getSongs","all","map","item","getAudioDuration","reader","FileReader","onload","event","window","AudioContext","webkitAudioContext","decodeAudioData","target","result","buffer","duration","onerror","readAsArrayBuffer","getDurationInHumanTime","toFixed","toString","split","hours","minutes","restSeconds","seconds","round","humanTime","rest","time","setLoadedPercentActionCreator","songsErrorActionCreator","startPlayMusicActionCreator","startPlayRecivedSongActionCreator","toggleSongLikesActionCreator","startUpdatingActionCreator","finishUpdatingActionCreator","addPlaylistsActionCreator","saveSongTagsActionCreator","dispatch","getState","token","auth","tags","tag","obj","post","saveSongTag","songInfo","listened_times","songTags","uploadSongPicture","songPicture","totalUploadSize","imageName","name","storeRef","storage","ref","child","put","alreadyUploadSize","size","on","snapshot","progress","bytesTransferred","fetchSongsBandNameActionCreator","getBandName","namesOfBands","getSongsLikesCountActionCreator","userLike","like","getSongLikesCount","songsLikes","forEach","songLikes","getSongsTagsActionCreator","songTag","getSongTags","songsTags","addSongsToListActionCreator","addSongToPlaylistActionCreator","playlistId","isSongExist","isSongExistInPlaylist","warn","sortSongsByBandName","song1","song2","fetchSongs","searchWord","slice","fetchSongsByName","Error","fetchSongBandName","fetchSongTags","fetchSongLikesCount","fetchImageByTag","songFileName","HeartSvg","width","height","fill","viewBox","d","HeartIcon","props","Icon","component","ItemResult","startPlay","onClick","bind","to","pathname","className","classes","dataArea","title","songStatistic","CustomerServiceOutlined","connect","useState","setSearchWord","recivedSongs","setRecivedSongs","debounce","useRef","_","word","handleResultRecive","useEffect","current","renderItem","label","placeholder","onInput","options","DesktopNavMenu","handleClick","disabled","preventDefault","leftMenu","rightMenu","items","join","navLink","activeClassName","navLinkActive","exact","ModalWrapper","modalIsOpen","setModalIsOpen","Modal","modal","open","closeModal","validateImage","maxSize","isJpgOrPng","isLt2M","validateSong","isMpeg","createSrc","folder","FormPicture","picture","pictureAlt","UploadOutlined","URL","createObjectURL","alt","Item","formItem","rules","fileList","setPicture","showUploadList","beforeUpload","pictureSize","likedSongs","AuthInputs","stateInputs","onChangeHandler","Option","Select","genresOptions","genre","push","inputs","config","validationRules","mode","tokenSeparators","onChange","loginActionCreator","authErrorActionCreator","resetTokenTimer","delay","setTimeout","refreshData","grant_type","refresh_token","refreshTokenActionCreator","console","log","setTimeoutIdActionCreator","postProfileDataActionCreator","createdUser","newUser","postBandDataActionCreator","user","postUserDataActionCreator","setUserTypeActionCreator","getUserData","newTokenData","id_token","expires_in","err","updateUserDataActionCreator","getUserKey","patch","updateUserData","setUserDataActionCreator","uploadUserImageActionCreator","file","storeUserImage","metadata","oldImage","delete","userImage","setUserImage","fileWasChecked","setFileWasChecked","min","max","userInputs","setUserInputs","handleCancel","visible","confirmLoading","footer","onCancel","onFinish","newUsername","userInfo","newImage","DataInputs","inputName","newValue","prevState","orientation","htmlType","logout","clearPlaylists","authButton","profileButton","Profile","menu","Divider","DropdownNav","menuIsOpen","setMenuIsOpen","setTimerid","buttonClass","mobileMenu","desktopMenu","overlay","Menu","placement","icon","onBlur","id","Header","Layout","disableLinks","linkToMyBand","profileLinks","authSection","UserOutlined","actionLinks","Logo","MenuFoldOutlined","SubmitButton","submitButton","BottomNote","note","justify","span","redirectLink","AlertMessage","GridAlert","align","xs","sm","md","lg","showIcon","Head","head","logo","Title","level","signUp","authData","password","returnSecureToken","signUpActionCreator","setIsBand","required","setStateInputs","stateInputsClone","Fragment","labelCol","offset","wrapperCol","validateMessages","types","string","Alert","signIn","signInActionCreator","setRememberMe","defaultChecked","EditableInput","Paragraph","Typography","showConfirm","setShowConfirm","setNewValue","input","style","editable","confirmMessage","onConfirm","udateBandData","editKey","okText","cancelText","minLength","maxLength","warning","setBandDataActionCreator","bandErrorActionCreator","updateBandDataActionCreator","firebaseKey","uploadImageActionCreator","oldFileName","storeBandImage","userId","fontSize","fontWeight","margin","bandId","maxHeight","overflow","color","textAlign","maxWidth","BandGenres","genresContainer","uploadImage","oldImageName","uploadButton","backgroundMask","shape","ghost","paragraph","rows","reduce","count","listenedTimes","songsCount","statistic","PlaySquareOutlined","spinning","card","cover","bodyStyle","minWidth","SongInfo","setSongPicture","songInputs","setSongInputs","closeSongInfo","createSong","trim","percentLoaded","uploadSong","uploadSongActionCreator","setSong","openSongModal","setOpenSongModal","listType","uploadArea","uploadLabel","LoadingOutlined","PlusOutlined","strokeLinecap","strokeColor","percent","status","SongPicture","playingNow","canPlay","imageSrc","songStateIcon","PauseOutlined","CaretRightOutlined","songHeat","mask","onSongChoosed","SongData","linkToBand","container","songBand","linkToCollection","currentSong","startPlayMusic","AddComment","Search","Input","avatar","content","searchInput","newComment","enterButton","SendOutlined","handleChange","onSearch","handleSubmit","React","memo","comments","Comments","dataSource","header","itemLayout","commentsOwnersCachingDecorator","users","author","setComments","fetching","setFetching","setSubmitting","setNewComment","bandUser","setBandUser","setError","fetchCommentOwner","comment","owners","datetime","moment","fromNow","currentUserData","commentData","addComment","SongAvatar","isCurrentAndPlay","songImageIcon","PauseCircleFilled","PlayCircleFilled","avatarMask","SongBand","SongStatistics","onHeartClicked","userIsAuth","unlikeSong","likeSong","heartIcon","SongDescription","descriptionClasses","bottomSection","bottomSectionActive","songStatistics","DragItemWrapper","draggableId","provided","innerRef","draggableProps","dragHandleProps","children","Meta","Card","songCardClasses","songCard","unshift","activeSongCard","songDuration","songContainer","topSection","DragListWrapper","reorder","onDragEnd","destination","source","droppableId","droppableProps","addSongLikeActionCreator","removeSongLikeActionCreator","reorderSongs","reorderSongsListActionCreator","uxAtCenter","UXElement","songsList","Empty","PRESENTED_IMAGE_SIMPLE","fetchBandData","bandKey","fetchBandDataActionCreator","fetchBandSongs","reverse","clearSongsList","clearBandData","location","direction","withRouter","setImageName","collectionChoosed","setCollectionChoosed","collectionPreview","posterMask","playIcon","history","maskTitle","poster","imageBackground","background","posterImage","showSuggestions","setShowSuggestions","titleRef","suggestions","checkOffset","addEventListener","cancel","removeEventListener","throttle","pageYOffset","innerHeight","offsetTop","suggestionsList","href","suggestionsTitle","saveSongTagsToLocalStorage","tagsHistory","JSON","parse","getItem","stringify","sortTags","sortFunc","cleanUpTags","splitedTags","tagsSplitByTime","tagsWithEqualTime","splitTagsByTime","searchTags","getTagNames","oftenSuggestion","setOthenSuggestion","recentSuggestion","setRecentSuggestion","adminSuggestions","setAdminSuggestions","getOftenTagsFromLocalStorage","getRecentTagsFromLocalStorage","collection","createPlaylist","createPlaylistActionCreator","playlistData","setPlaylistData","PlaylistPoster","playlist","Grid","ExportOutlined","showCreateModal","setShowCreateModal","likedSongsCount","setLikedSongsCount","createModal","AppstoreOutlined","PlusCircleOutlined","shuffleSongs","playlistDuration","statistics","ClockCircleOutlined","RedoOutlined","BandsList","songsBands","uniqBy","bandLink","SelectOutlined","Tags","flatten","Set","Array","from","playlistKey","active","additionalData","bands","heat","fetchPlaylistSongs","records","songsItems","songItem","fetchLikedSongs","fetchLikedSongsActionCreator","startLoading","getSongsByTag","tagData","fetchSongsByTagActionCreator","ModalSpinner","spinner","PanelHeat","prefix","InfoCircleOutlined","SaveCollection","enabled","SaveFilled","ReorderCollection","DeleteCollection","MinusSquareFilled","SearchInput","onSelect","InfoResults","infoResults","getBandTags","songsNames","tagQueries","countBy","getBandBySongName","InfoPanel","searchResults","setSearchResults","showTagsInfo","setShowTagsInfo","infoBySearchWord","setInfoBySearchWord","debounceTagsSearch","debounceBandsSearch","tagsUsedTimes","getTagsWithCountByWord","getBandsByWord","infoPanel","selectedItem","songsQueries","Group","updateCollectionActionCreator","setUpdatesToCollectionActionCreator","adm","fetchCollection","setCollectionsActionCreator","setNewCollectionValues","newCollectionValuesActionCreator","saveCollection","addCollectionToListActionCreator","createCollectionActionCreator","updateCollection","deleteCollection","startDeletingActionCreator","deleteCollectionFromListActionCreator","deleteCollectionActionCreator","firstCollection","secondCollections","oldCollectionPosition","newCollectionPosition","secondCollection","reorderActionCreator","Panel","Collapse","createCollectionName","setCreateCollectionName","createCollectionTags","setCreateCollectionTags","setSearchTags","fetchingSearchTags","setFetchingSearchTags","callback","getTagsByWord","handleCollectionNameChange","handleCollectionTagsChange","stopPropagation","changeSearchResult","collectionWithIndex","reorderCollections","bordered","expandIcon","isActive","rotate","extra","DownOutlined","UpOutlined","notFoundContent","collectionsCount","ContentComponent","Content","path","SignUp","SignIn","Band","Playlist","Playlists","Collection","Admin","Main","addToPlaylist","addSongToPlaylist","AddToPlaylist","showPlaylists","setShowPlaylists","toggleShowPlaylist","AppstoreAddOutlined","songInfoArea","textInfo","playNext","playPrev","onPlayHandler","onPauseHandler","onReadyToPlayHandler","updateListenedTimes","setUpdatedDataToSongActionCreator","updateSongListenedTimesActionCreator","playerRef","audio","play","pause","SONG_DATA","ADD_TO_PLAYLIST","layout","showSkipControls","onPlay","onPause","onAbort","onClickNext","onClickPrevious","onCanPlay","onEnded","customAdditionalControls","RHAP_UI","LOOP","customProgressBarSection","CURRENT_TIME","PROGRESS_BAR","DURATION","footerMargin","signInLocally","fetchPlaylists","fetchPlaylistsActionCreator","padding","App","Boolean","hostname","match","store","createStore","combineReducers","authReducer","bandReducer","songsReducer","adminReducer","applyMiddleware","thunk","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.04c44276.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"navLink\":\"DesktopNavMenu_navLink__-DzhO\",\"navLinkActive\":\"DesktopNavMenu_navLinkActive__3CblN\",\"leftMenu\":\"DesktopNavMenu_leftMenu__2u5mo\",\"rightMenu\":\"DesktopNavMenu_rightMenu__1F_D3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"SongData_container__3jGvf\",\"songName\":\"SongData_songName__2u9dt\",\"songBand\":\"SongData_songBand__1Zyym\",\"tag\":\"SongData_tag__2ZceC\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"bottomSection\":\"SongDescription_bottomSection__3mKkC\",\"bandName\":\"SongDescription_bandName__2kkaE\",\"bottomSectionActive\":\"SongDescription_bottomSectionActive__3zzjI\",\"songStatistics\":\"SongDescription_songStatistics__1y3_7\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dataArea\":\"ItemResult_dataArea__1W3jr\",\"title\":\"ItemResult_title__1Ti4q\",\"songStatistic\":\"ItemResult_songStatistic__2eCWa\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"picture\":\"FormPicture_picture__2RIv6\",\"pictureAlt\":\"FormPicture_pictureAlt__1ayG0\",\"formItem\":\"FormPicture_formItem__3t_Oy\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"head\":\"Head_head__2fMXV\",\"logo\":\"Head_logo__17znM\",\"label\":\"Head_label__k5dxM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"songHeat\":\"SongPicture_songHeat__1tdp7\",\"mask\":\"SongPicture_mask__2B-Yv\",\"songPicture\":\"SongPicture_songPicture__1rd4F\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"songInfoArea\":\"SongInfo_songInfoArea__5WlAA\",\"textInfo\":\"SongInfo_textInfo__g5SUW\",\"avatar\":\"SongInfo_avatar__3R43d\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"userInfo\":\"Profile_userInfo__1gFHF\",\"userInputs\":\"Profile_userInputs__1LXkS\",\"checkbox\":\"Profile_checkbox__2g0OP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"mobileMenu\":\"DropdownNav_mobileMenu__1CCyF\",\"desktopMenu\":\"DropdownNav_desktopMenu__3ISrA\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"genresContainer\":\"BandGenres_genresContainer__2WHDP\",\"genre\":\"BandGenres_genre__8ILmj\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"uploadButton\":\"BandImage_uploadButton__2bXIs\",\"backgroundMask\":\"BandImage_backgroundMask__1Af19\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"uploadLabel\":\"UploadSong_uploadLabel__3hMwQ\",\"uploadArea\":\"UploadSong_uploadArea__1cNbY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"songInfo\":\"SongInfo_songInfo__3cE_r\",\"songInputs\":\"SongInfo_songInputs__1nUWu\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"UXElement\":\"Song_UXElement__1pZBy\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modal\":\"ModalSpinner_modal__I6vUN\",\"spinner\":\"ModalSpinner_spinner__2MRKR\"};","module.exports = \"data:image/png;base64,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\"","// extracted by mini-css-extract-plugin\nmodule.exports = {\"submitButton\":\"SubmitButton_submitButton__1DhA6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"redirectLink\":\"BottomNote_redirectLink__388TA\"};","module.exports = __webpack_public_path__ + \"static/media/logoSimple.966ffdae.png\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"statistic\":\"BandStatistic_statistic__3iEOO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"BandInfo_card__3JgWb\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"CurrentSong_container__2q_eB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"searchInput\":\"AddComment_searchInput__2RiIa\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"avatarMask\":\"SongAvatar_avatarMask__1fJuW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"heartIcon\":\"SongStatistics_heartIcon__217s_\"};","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAYdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjEuNv1OCegAAAKaSURBVGhDzZppkusgDIRz/xtm37dTeNBUSSXLDciAiX989dqmaeS8YBM8m2EYINvtdmBer1c4hX1rYXLifD7LBVhOp1OwjP1rYXRAnzy6AAtdrO63BkYHqOgUt9stdBsH/goR3+8XFuvh/X6HiGl4T0TQp4uKnANn/QIRx+MRFjcXyuHMnohARdXQe/6IQMXUwtk9EIEKqYWzeyACFVILZ/dABCqkFs62PJ/P8A9uK0UEKqQWzrbk2ksQoQtoBWdbtGe/34dT2DcHETq8FZxtQd77/R6asN+DCBReC2dbkJexXi8iUKgXWt4/Ho8QM87hbIv2xLB9cohAYTFSdx3ts22M9qSY83NBBAqyeNZR2m/bGO3xwP/bKUSgAI13Muo+to3Rnjl8Pp/QHWeKQB2Zy+USLNPOCN3PtjHaM5fY100E6sSwx4Onn/aUYjOz4bmvFE18umvtdrv/T0v3tV5Ge2rQmdlwbkcgv8b6GeQtQc+ZbDi3W+hOgvwa24dB3hL0fMmGc7sFeTWpNRTyl8KZ2XButyCvJnan8+6dedBjyADISHC7BXk1saf/9XqF/hKazJHcrov1M612awidKwIZCW5HID+R2vRG/hJsbnaA3DpHPzvoeUI7ltaj0dkldHuyp6DJifK9dF1rpUDZHjwLVhEoQFN7MYfDAeamiH2NECJQkGVOsEbPIw8lGxIiUGAM7uMB9U9R+opCBApNQV+V2OQreUWx6l0UD61eQ4hAgywNj90CEWigpVjidbcINGBraMHI47VGBBq4FT1ex4lABbQgt/ZqhQhURA1LvANJIaLV74Ql50EKEbXv2ekByVm/YHSACvTQax6kGB2gIlN4Npd7MTrwbgy0+n3SkskJWryh4on1/r3WsPkDqDy6DyrbhwwAAAAASUVORK5CYII=\"","// extracted by mini-css-extract-plugin\nmodule.exports = {\"suggestionsTitle\":\"Suggestions_suggestionsTitle__16wct\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"statistics\":\"Statistics_statistics__1kYGC\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"bandLink\":\"BandsList_bandLink__2fA2z\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"tag\":\"Tags_tag__1FON8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"searchInput\":\"SearchInput_searchInput__2agt2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"infoResults\":\"InfoResults_infoResults__tAyFO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"infoPanel\":\"InfoPanel_infoPanel__2M1SN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"menu\":\"PlaylistMenu_menu__1aSFX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"footerMargin\":\"Footer_footerMargin__2DR-U\"};","import * as firebase from 'firebase/app';\r\nimport 'firebase/storage';\r\nimport 'firebase/auth';\r\n\r\nconst firebaseConfig = ({\r\n  apiKey: process.env.REACT_APP_FIREBASE_KEY,\r\n  authDomain: process.env.REACT_APP_FIREBASE_DOMAIN,\r\n  databaseURL: process.env.REACT_APP_FIREBASE_DATABASE,\r\n  projectId: process.env.REACT_APP_FIREBASE_KEY_PROJECT_ID,\r\n  storageBucket: process.env.REACT_APP_FIREBASE_KEY_STORE_BUCKET,\r\n  messagingSenderId: process.env.REACT_APP_FIREBASE_KEY_SENDER_ID,\r\n});\r\n\r\n// Initialize Firebase\r\nconst app = firebase.initializeApp(firebaseConfig);\r\n\r\nexport default app;\r\n","import firebase from '../../firebase';\r\nimport axios from 'axios';\r\n\r\nexport const saveToLocalStorage = (data) => {\r\n  if (data.expiresIn) {\r\n    const currentDateTimestamp = Math.floor(new Date().getTime() / 1000);\r\n    data.expiresIn = currentDateTimestamp + (+data.expiresIn);\r\n  }\r\n\r\n  for (let key in data) {\r\n    localStorage.setItem(key, data[key]);\r\n  }\r\n}\r\n\r\nexport const getDataFromLocalStorage = (keys) => {\r\n  const userData = {};\r\n  for (let [key, value] of Object.entries(localStorage)) {\r\n    if (keys.includes(key)) {\r\n      userData[key] = value;\r\n    }\r\n  }\r\n\r\n  return userData;\r\n}\r\n\r\nexport const clearLocalStorage = (keys) => {\r\n  for (let key of keys) {\r\n    localStorage.removeItem(key);\r\n  }\r\n}\r\n\r\nexport const storeUserImage = (file) => {\r\n  const fileName = new Date().getTime() + file.name;\r\n  return firebase.storage().ref('user-images/').child(fileName).put(file);\r\n}\r\n\r\nexport const removeUserImage = (imageName) => {\r\n  return () => {\r\n    if (!imageName) return;\r\n\r\n    firebase.storage().ref(`user-images/${imageName}`).delete()\r\n      .catch(error => console.log(error.message));\r\n  }\r\n}\r\n\r\nexport const getUserKey = (localId) => {\r\n  return new Promise((resolve, reject) => {\r\n    let queryParams = `?orderBy=\"localId\"&equalTo=\"${localId}\"`;\r\n    axios.get(`${process.env.REACT_APP_FIREBASE_DATABASE}/users.json/${queryParams}`)\r\n      .then(response => Object.keys(response.data)[0])\r\n      .then(key => resolve(key))\r\n      .catch(error => reject(error))\r\n  })\r\n}\r\n\r\nexport const getUserData = (localId, isAdmin) => {\r\n  return new Promise((resolve, reject) => {\r\n    let queryParams = `?orderBy=\"localId\"&equalTo=\"${localId}\"`;\r\n    axios.get(`${process.env.REACT_APP_FIREBASE_DATABASE}/users.json/${queryParams}`)\r\n      .then(response => Object.values(response.data)[0])\r\n      .then(data => isAdmin ? { ...data, isAdmin } : data)\r\n      .then(data => resolve(data))\r\n      .catch(error => reject(error))\r\n  })\r\n}\r\n\r\nexport const updateUserData = (data, key, token) => {\r\n  return new Promise((resolve, reject) => {\r\n    let queryParams = `?auth=${token}`;\r\n    axios.patch(`${process.env.REACT_APP_FIREBASE_DATABASE}/users/${key}/.json/${queryParams}`, data)\r\n      .then(() => resolve())\r\n      .catch(error => reject(error));\r\n  })\r\n}\r\n\r\nexport const userIsAdmin = (localId) => {\r\n  return new Promise((resolve, reject) => {\r\n    let queryParams = `?orderBy=\"localId\"&equalTo=\"${localId}\"`;\r\n    axios.get(`${process.env.REACT_APP_FIREBASE_DATABASE}/admins.json/${queryParams}`)\r\n      .then(response => Object.keys(response.data).length > 0)\r\n      .then(isAdmin => resolve(isAdmin))\r\n      .catch(error => reject(error))\r\n  })\r\n}\r\n\r\n","import * as actionTypes from '../actionTypes';\r\nimport { message } from 'antd';\r\nimport { saveToLocalStorage, getDataFromLocalStorage, clearLocalStorage } from './utility';\r\n\r\nconst initialState = {\r\n  localId: null,\r\n  email: null,\r\n  isBand: false,\r\n  username: '',\r\n  image: '',\r\n  idToken: null,\r\n  refreshToken: null,\r\n  expiresIn: null,\r\n  refreshTimerId: null,\r\n  loading: true,\r\n  submitting: false,\r\n  errorMessage: null,\r\n\r\n\r\n  isAdmin: false,\r\n}\r\n\r\nconst reducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case actionTypes.START_LOADING: {\r\n      return {\r\n        ...state,\r\n        errorMessage: null,\r\n        loading: true,\r\n      }\r\n    }\r\n\r\n    case actionTypes.FINISH_LOADING: {\r\n      return {\r\n        ...state,\r\n        loading: false,\r\n      }\r\n    }\r\n\r\n    case actionTypes.AUTH_START: {\r\n      return {\r\n        ...state,\r\n        submitting: true,\r\n        errorMessage: null,\r\n      }\r\n    }\r\n\r\n    case actionTypes.AUTH_FINISH: {\r\n      return {\r\n        ...state,\r\n        submitting: false,\r\n      }\r\n    }\r\n\r\n    case actionTypes.AUTH_ERROR: {\r\n      let errorMessage = 'Service is unavailable. Please, try later...';\r\n      if (action.error.response) errorMessage = action.error.response.data.error.message;\r\n\r\n      message.error(errorMessage);\r\n      return {\r\n        ...state,\r\n        errorMessage,\r\n        submitting: false,\r\n      }\r\n    }\r\n    case actionTypes.LOGIN: {\r\n      clearLocalStorage([...Object.keys(initialState)]);\r\n      if (action.rememberMe/* && !action.userData.isAdmin*/) {\r\n        saveToLocalStorage(action.userData);\r\n      }\r\n\r\n      const expiresIn = Math.floor((new Date().getTime() / 1000)) + +action.userData.expiresIn;\r\n\r\n      return {\r\n        ...initialState,\r\n        loading: false,\r\n        localId: action.userData.localId,\r\n        email: action.userData.email,\r\n        isAdmin: action.userData.isAdmin || false,\r\n        isBand: action.userData.isBand || false,\r\n        username: action.userData.username || '',\r\n        image: action.userData.image || '',\r\n        idToken: action.userData.idToken,\r\n        refreshToken: action.userData.refreshToken,\r\n        expiresIn: expiresIn,\r\n        submitting: false,\r\n      }\r\n    }\r\n\r\n    case actionTypes.LOGIN_LOCALY: {\r\n      return {\r\n        ...state,\r\n        loading: false,\r\n        ...getDataFromLocalStorage([...Object.keys(initialState)]),\r\n      }\r\n    }\r\n\r\n    case actionTypes.RESET_TIMEOUT_ID: {\r\n      return {\r\n        ...state,\r\n        refreshTimerId: action.timerId,\r\n      }\r\n    }\r\n\r\n    case actionTypes.SET_TOKEN: {\r\n      if (localStorage.length > 1) {\r\n        saveToLocalStorage(action.tokens);\r\n      }\r\n\r\n      return {\r\n        ...state,\r\n        idToken: action.tokens.idToken,\r\n        refreshToken: action.tokens.refreshToken,\r\n        expiresIn: action.tokens.expiresIn,\r\n      }\r\n    }\r\n\r\n    case actionTypes.SET_USER_DATA: {\r\n      message.success('Profile data was updated');\r\n      saveToLocalStorage(action.data)\r\n      return {\r\n        ...state,\r\n        ...action.data,\r\n      }\r\n    }\r\n\r\n    case actionTypes.LOGOUT: {\r\n      clearLocalStorage([...Object.keys(initialState)]);\r\n      clearTimeout(state.refreshTimerId);\r\n      return { ...initialState, loading: false }\r\n    }\r\n\r\n    default: return state;\r\n  }\r\n}\r\n\r\nexport default reducer;\r\n","//authorization\r\nexport const START_LOADING = 'START_LOADING';\r\nexport const FINISH_LOADING = 'FINISH_LOADING';\r\nexport const AUTH_ERROR = 'AUTH_ERROR';\r\nexport const AUTH_START = 'AUTH_START';\r\nexport const AUTH_FINISH = 'AUTH_FINISH';\r\nexport const LOGIN = 'LOGIN';\r\nexport const LOGIN_LOCALY = 'LOGIN_LOCALY';\r\nexport const RESET_TIMEOUT_ID = 'RESET_TIMEOUT_ID';\r\nexport const SET_TOKEN = 'SET_TOKEN';\r\nexport const SET_USER_DATA = 'SET_USER_DATA';\r\nexport const LOGOUT = 'LOGOUT';\r\n\r\n//band\r\nexport const SET_BAND_DATA = 'SET_BAND_DATA';\r\nexport const BAND_ERROR = 'BAND_ERROR';\r\nexport const CLEAR_BAND_DATA = 'CLEAR_BAND_DATA';\r\nexport const FINISH_BAND_LOADING = 'FINISH_BAND_LOADING';\r\nexport const START_BAND_UPDATING = 'START_BAND_UPDATING';\r\nexport const FINISH_BAND_UPDATING = 'FINISH_BAND_UPDATING';\r\n\r\n//song\r\nexport const START_SONG_CREATION = 'START_SONG_CREATION';\r\nexport const FINISH_SONG_CREATION = 'FINISH_SONG_CREATION';\r\nexport const START_SONGS_LOADING = 'START_SONGS_LOADING';\r\nexport const FINISH_SONGS_LOADING = 'FINISH_SONGS_LOADING';\r\nexport const SONGS_ERROR = 'SONGS_ERROR';\r\nexport const SET_LOAD_PERCENTS = 'SET_LOAD_PERCENTS';\r\nexport const UNSHIFT_SONG_TO_LIST = 'UNSHIFT_SONG_TO_LIST';\r\nexport const ADD_SONGS_TO_LIST = 'ADD_SONGS_TO_LIST';\r\nexport const CLEAR_SONGS_LIST = 'CLEAR_SONGS_LIST';\r\nexport const SELECT_SONG = 'SELECT_SONG';\r\nexport const PLAY_RECIVED_SONG = 'PLAY_RECIVED_SONG';\r\nexport const SELECT_NEXT_SONG = 'SELECT_NEXT_SONG';\r\nexport const SELECT_PREV_SONG = 'SELECT_PREV_SONG';\r\nexport const PLAY_SONG = 'PLAY_SONG';\r\nexport const PAUSE_SONG = 'PAUSE_SONG';\r\nexport const SELECTED_SONG_READY_TO_PLAY = 'SELECTED_SONG_READY_TO_PLAY';\r\nexport const CHANGE_SELECTED_GENRE = 'CHANGE_SELECTED_GENRE';\r\nexport const TOGGLE_SONG_LIKES = 'TOGGLE_SONG_LIKES';\r\nexport const START_SONG_UPDATING = 'START_SONG_UPDATING';\r\nexport const FINISH_SONG_UPDATING = 'FINISH_SONG_UPDATING';\r\nexport const SET_SONG_UPDATED_DATA = 'SET_SONG_UPDATED_DATA';\r\nexport const ADD_PLAYLISTS = 'ADD_PLAYLISTS';\r\nexport const CLEAR_PLAYLISTS = 'CLEAR_PLAYLISTS';\r\nexport const SHUFFLE_SONGS = 'SHUFFLE_SONGS';\r\nexport const REORDER_SONGS = 'REORDER_SONGS';\r\n\r\n//collections\r\nexport const SET_COLLECTIONS = 'SET_COLLECTIONS';\r\nexport const ADD_COLLECTION = 'ADD_COLLECTION';\r\nexport const UPDATE_COLLECTION = 'UPDATE_COLLECTION';\r\nexport const DELETE_COLLECTION = 'DELETE_COLLECTION';\r\nexport const SORT_COLLECTIONS = 'SORT_COLLECTIONS';\r\nexport const SET_COLLECTION_VALUES = 'SET_COLLECTION_VALUES';\r\nexport const START_COLLECTION_CREATING = 'START_COLLECTION_CREATING';\r\nexport const FINISH_COLLECTION_CREATING = 'FINISH_COLLECTION_CREATING';\r\nexport const START_COLLECTION_UPDATING = 'START_COLLECTION_UPDATING';\r\nexport const FINISH_COLLECTION_UPDATING = 'FINISH_COLLECTION_UPDATING';\r\nexport const START_COLLECTION_DELETING = 'START_COLLECTION_DELETING';\r\nexport const FINISH_COLLECTION_DELETING = 'FINISH_COLLECTION_DELETING';\r\n","import * as actionTypes from '../actionTypes';\r\nimport { message } from 'antd';\r\n\r\nconst initialState = {\r\n  key: null,\r\n  bandName: null,\r\n  localId: null,\r\n  genres: null,\r\n  description: null,\r\n  image: 'no-image.jpg',\r\n  loading: true,      //first fetching\r\n  updating: false,    //updating band data\r\n  error: false,\r\n}\r\n\r\nconst reducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case actionTypes.SET_BAND_DATA: {\r\n      return {\r\n        ...state,\r\n        ...action.bandData,\r\n      }\r\n    }\r\n\r\n    case actionTypes.FINISH_BAND_LOADING: {\r\n      return {\r\n        ...state,\r\n        loading: false,\r\n      }\r\n    }\r\n\r\n    case actionTypes.START_BAND_UPDATING: {\r\n      return {\r\n        ...state,\r\n        updating: true,\r\n      }\r\n    }\r\n\r\n    case actionTypes.FINISH_BAND_UPDATING: {\r\n      return {\r\n        ...state,\r\n        updating: false,\r\n      }\r\n    }\r\n\r\n    case actionTypes.BAND_ERROR: {\r\n      message.error(action.error.message);\r\n\r\n      return {\r\n        ...state,\r\n        error: true,\r\n      }\r\n    }\r\n\r\n    case actionTypes.CLEAR_BAND_DATA: {\r\n      return {\r\n        ...initialState,\r\n      }\r\n    }\r\n\r\n    default: return state;\r\n  }\r\n}\r\n\r\nexport default reducer;\r\n","import * as actionTypes from '../actionTypes';\r\nimport { message } from 'antd';\r\n\r\nconst initialState = {\r\n  songs: [],\r\n  playSong: null,\r\n  playNow: false,\r\n  playlists: [],\r\n  percents: 0,\r\n  loading: false,\r\n  creating: false,\r\n  updating: [],                   //array of updating songs\r\n  selectedSongCanPlay: false,     //is selected song enough loaded to start playing\r\n  error: false,\r\n}\r\n\r\nconst reducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case actionTypes.START_SONG_CREATION: {\r\n      return {\r\n        ...state,\r\n        creating: true,\r\n        error: false,\r\n      }\r\n    }\r\n\r\n    case actionTypes.FINISH_SONG_CREATION: {\r\n      return {\r\n        ...state,\r\n        creating: false,\r\n        percents: 0,\r\n      }\r\n    }\r\n\r\n    case actionTypes.START_SONGS_LOADING: {\r\n      return {\r\n        ...state,\r\n        loading: true,\r\n      }\r\n    }\r\n\r\n    case actionTypes.FINISH_SONGS_LOADING: {\r\n      return {\r\n        ...state,\r\n        loading: false,\r\n      }\r\n    }\r\n\r\n    case actionTypes.START_SONG_UPDATING: {\r\n      return {\r\n        ...state,\r\n        updating: [...state.updating, action.fileName]\r\n      }\r\n    }\r\n\r\n    case actionTypes.FINISH_SONG_UPDATING: {\r\n      return {\r\n        ...state,\r\n        updating: state.updating.filter(songName => songName !== action.fileName),\r\n      }\r\n    }\r\n\r\n    case actionTypes.SET_LOAD_PERCENTS: {\r\n      return {\r\n        ...state,\r\n        percents: action.percents,\r\n      }\r\n    }\r\n\r\n    case actionTypes.ADD_SONGS_TO_LIST: {\r\n      return {\r\n        ...state,\r\n        songs: [\r\n          ...state.songs,\r\n          ...action.songs,\r\n        ],\r\n        loading: false,\r\n      }\r\n    }\r\n\r\n    case actionTypes.UNSHIFT_SONG_TO_LIST: {\r\n      return {\r\n        ...state,\r\n        songs: [\r\n          action.song,\r\n          ...state.songs,\r\n        ],\r\n      }\r\n    }\r\n\r\n    case actionTypes.SELECT_SONG: {\r\n      if (state.playSong && state.playSong.fileName === action.fileName) {\r\n        return {\r\n          ...state,\r\n          playNow: !state.playNow,\r\n        }\r\n      }\r\n\r\n      return {\r\n        ...state,\r\n        playSong: { ...state.songs.find(song => song.fileName === action.fileName) },\r\n        playNow: true,\r\n        selectedSongCanPlay: false,\r\n      }\r\n    }\r\n\r\n    case actionTypes.SELECT_NEXT_SONG: {\r\n      let currentPlaySongIndex = state.songs.findIndex(song => song.fileName === state.playSong.fileName);\r\n\r\n      if (state.songs.length === 0) return state;\r\n      if (++currentPlaySongIndex === state.songs.length) currentPlaySongIndex = 0;\r\n      return {\r\n        ...state,\r\n        playSong: { ...state.songs[currentPlaySongIndex] },\r\n        playNow: true,\r\n        selectedSongCanPlay: false,\r\n      }\r\n    }\r\n\r\n    case actionTypes.SELECT_PREV_SONG: {\r\n      let currentPlaySongIndex = state.songs.findIndex(song => song.fileName === state.playSong.fileName);\r\n\r\n      if (state.songs.length === 0) return state;\r\n      if (--currentPlaySongIndex === -1) currentPlaySongIndex = state.songs.length - 1;\r\n      return {\r\n        ...state,\r\n        playSong: { ...state.songs[currentPlaySongIndex] },\r\n        playNow: true,\r\n        selectedSongCanPlay: false,\r\n      }\r\n    }\r\n\r\n    case actionTypes.SELECTED_SONG_READY_TO_PLAY: {\r\n      return {\r\n        ...state,\r\n        selectedSongCanPlay: true,\r\n      }\r\n    }\r\n\r\n    case actionTypes.PLAY_RECIVED_SONG: {\r\n      let songCanPlay = false;\r\n      if (state.playSong && state.playSong.fileName === action.song.fileName) songCanPlay = true;\r\n\r\n      return {\r\n        ...state,\r\n        playSong: { ...action.song },\r\n        playNow: true,\r\n        selectedSongCanPlay: songCanPlay,\r\n      }\r\n    }\r\n\r\n    case actionTypes.PLAY_SONG: {\r\n      return {\r\n        ...state,\r\n        playNow: true,\r\n      }\r\n    }\r\n\r\n    case actionTypes.PAUSE_SONG: {\r\n      return {\r\n        ...state,\r\n        playNow: false,\r\n      }\r\n    }\r\n\r\n    case actionTypes.TOGGLE_SONG_LIKES: {\r\n      const stateSongsClone = [...state.songs];\r\n      const songIndex = stateSongsClone.findIndex(song => song.fileName === action.fileName);\r\n      let song = stateSongsClone[songIndex];\r\n\r\n      const newData = {\r\n        userIsLikedSong: false,\r\n        userLikeId: null,\r\n        likesCount: song.likesCount - 1,\r\n      }\r\n      if (action.key) {\r\n        newData.userIsLikedSong = true;\r\n        newData.userLikeId = action.key;\r\n        newData.likesCount = song.likesCount + 1;\r\n      }\r\n\r\n      stateSongsClone[songIndex] = { ...song, ...newData };\r\n      return {\r\n        ...state,\r\n        songs: [\r\n          ...stateSongsClone,\r\n        ]\r\n      }\r\n    }\r\n\r\n    case actionTypes.SET_SONG_UPDATED_DATA: {\r\n      const stateSongsClone = [...state.songs];\r\n      const songIndex = stateSongsClone.findIndex(song => song.fileName === action.fileName);\r\n      stateSongsClone[songIndex] = {\r\n        ...stateSongsClone[songIndex],\r\n        ...action.data,\r\n      };\r\n\r\n      return {\r\n        ...state,\r\n        songs: [\r\n          ...stateSongsClone,\r\n        ]\r\n      }\r\n    }\r\n\r\n    case actionTypes.ADD_PLAYLISTS: {\r\n      return {\r\n        ...state,\r\n        playlists: [\r\n          ...state.playlists,\r\n          ...action.playlists\r\n        ]\r\n      }\r\n    }\r\n\r\n    case actionTypes.CLEAR_PLAYLISTS: {\r\n      return {\r\n        ...state,\r\n        playlists: [],\r\n      }\r\n    }\r\n\r\n    case actionTypes.SHUFFLE_SONGS: {\r\n      const songsClone = [...state.songs];\r\n      songsClone.sort(() => Math.random() - 0.5);\r\n\r\n      return {\r\n        ...state,\r\n        songs: [...songsClone]\r\n      }\r\n    }\r\n\r\n    case actionTypes.REORDER_SONGS: {\r\n      const songsClone = [...state.songs];\r\n      const [replaced] = songsClone.splice(action.oldIndex, 1);\r\n      songsClone.splice(action.newIndex, 0, replaced);\r\n\r\n      return {\r\n        ...state,\r\n        songs: [...songsClone]\r\n      }\r\n    }\r\n\r\n    case actionTypes.CLEAR_SONGS_LIST: {\r\n      return {\r\n        ...initialState,\r\n        playSong: state.playSong,\r\n        playNow: state.playNow,\r\n        selectedSongCanPlay: state.selectedSongCanPlay,\r\n        playlists: state.playlists,\r\n      }\r\n    }\r\n\r\n    case actionTypes.SONGS_ERROR: {\r\n      message.error(action.error.message);\r\n\r\n      return {\r\n        ...state,\r\n        error: true,\r\n      }\r\n    }\r\n\r\n    default: return state;\r\n  }\r\n}\r\n\r\nexport default reducer;\r\n","import * as actionTypes from '../actionTypes';\r\n\r\nconst initialState = {\r\n  collections: [],\r\n  loading: true,\r\n  creating: false,\r\n  updating: null,\r\n  deleting: null,\r\n}\r\n\r\nconst reducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case actionTypes.SET_COLLECTIONS: {\r\n      return {\r\n        ...state,\r\n        collections: action.collections,\r\n        loading: false,\r\n      }\r\n    }\r\n\r\n    case actionTypes.SET_COLLECTION_VALUES: {\r\n      const collectionsClone = [...state.collections];\r\n      collectionsClone[action.index] = {\r\n        ...collectionsClone[action.index],\r\n        ...action.data,\r\n        shouldUpdate: true,\r\n      }\r\n\r\n      return {\r\n        ...state,\r\n        collections: collectionsClone,\r\n      }\r\n    }\r\n\r\n    case actionTypes.ADD_COLLECTION: {\r\n      return {\r\n        ...state,\r\n        collections: [\r\n          ...state.collections,\r\n          action.data,\r\n        ]\r\n      }\r\n    }\r\n\r\n    case actionTypes.UPDATE_COLLECTION: {\r\n      if (action.index === null) return state;\r\n\r\n      const collectionsClone = [...state.collections];\r\n      collectionsClone[action.index] = {\r\n        ...action.data, \r\n        shouldUpdate: false,\r\n      }\r\n\r\n      return {\r\n        ...state,\r\n        collections: collectionsClone,\r\n      }\r\n    }\r\n\r\n    case actionTypes.DELETE_COLLECTION: {\r\n      const collectionsClone = [...state.collections];\r\n      collectionsClone.splice(action.index, 1);\r\n\r\n      return {\r\n        ...state,\r\n        collections: collectionsClone,\r\n      }\r\n    }\r\n\r\n    case actionTypes.SORT_COLLECTIONS: {\r\n      if (state.collections.length === 0) return state;\r\n      const collectionsClone = [...state.collections];\r\n      collectionsClone.sort((a, b) => a.position - b.position);\r\n\r\n      return {\r\n        ...state,\r\n        collections: [...collectionsClone],\r\n      }\r\n    }\r\n\r\n    case actionTypes.START_COLLECTION_CREATING: {\r\n      return {\r\n        ...state,\r\n        creating: true,\r\n      }\r\n    }\r\n\r\n    case actionTypes.FINISH_COLLECTION_CREATING: {\r\n      return {\r\n        ...state,\r\n        creating: false,\r\n      }\r\n    }\r\n\r\n    case actionTypes.START_COLLECTION_UPDATING: {\r\n      return {\r\n        ...state,\r\n        updating: action.index,\r\n      }\r\n    }\r\n\r\n    case actionTypes.FINISH_COLLECTION_UPDATING: {\r\n      return {\r\n        ...state,\r\n        updating: null,\r\n      }\r\n    }\r\n\r\n    case actionTypes.START_COLLECTION_DELETING: {\r\n      return {\r\n        ...state,\r\n        deleting: action.index,\r\n      }\r\n    }\r\n\r\n    case actionTypes.FINISH_COLLECTION_DELETING: {\r\n      return {\r\n        ...state,\r\n        deleting: null,\r\n      }\r\n    }\r\n\r\n    default: return state;\r\n  }\r\n}\r\n\r\nexport default reducer;\r\n","import axios from 'axios';\r\n\r\nexport const bandNamesCachingDecorator = (src) => {\r\n  const bandNames = new Map();\r\n\r\n  return (localId) => {\r\n    return new Promise((resolve, reject) => {\r\n      if (!localId || bandNames.has(localId)) {\r\n        return resolve(bandNames);\r\n      }\r\n\r\n      axios.get(src + `\"${localId}\"`)\r\n        .then(response => {\r\n          if (response.data) {\r\n            const band = Object.values(response.data)[0];\r\n            bandNames.set(localId, band.bandName);\r\n          }\r\n\r\n          resolve(bandNames);\r\n        })\r\n        .catch(error => reject(error))\r\n    })\r\n  }\r\n}\r\n\r\nexport const getSongLikesCount = (song, localId) => {\r\n  return new Promise((resolve, reject) => {\r\n    let queryParams = `?orderBy=\"fileName\"&equalTo=\"${song.fileName}\"`;\r\n    axios.get(`${process.env.REACT_APP_FIREBASE_DATABASE}/song_likes.json/${queryParams}`)\r\n      .then((response) => {\r\n        const likesCount = response.data\r\n          ? Object.keys(response.data).length\r\n          : 0;\r\n\r\n        const userLike = Object.entries(response.data).find(like => localId === like[1].localId);\r\n        const userIsLikedSong = !!userLike;\r\n        const userLikeId = userIsLikedSong ? userLike[0] : null;\r\n\r\n        resolve({ likesCount, userIsLikedSong, userLikeId })\r\n      })\r\n      .catch(error => reject(error))\r\n  })\r\n}\r\n\r\nexport const getSongTags = (song) => {\r\n  return new Promise((resolve, reject) => {\r\n    let queryParams = `?orderBy=\"songName\"&equalTo=\"${song.fileName}\"`;\r\n    axios.get(`${process.env.REACT_APP_FIREBASE_DATABASE}/song-tag.json/${queryParams}`)\r\n      .then((response) => {\r\n        const tags = Object.values(response.data).map(songTag => songTag.tag);\r\n        resolve(tags);\r\n      })\r\n      .catch(error => reject(error))\r\n  })\r\n}\r\n\r\nexport const getSong = (fileName) => {\r\n  return new Promise((resolve, reject) => {\r\n    let queryParams = `?orderBy=\"fileName\"&equalTo=\"${fileName}\"`;\r\n    axios.get(`${process.env.REACT_APP_FIREBASE_DATABASE}/songs.json/${queryParams}`)\r\n      .then((response) => {\r\n        resolve(response.data);\r\n      })\r\n      .catch(error => reject(error))\r\n  })\r\n}\r\n\r\nexport const getSongs = (data) => {\r\n  return new Promise((resolve, reject) => {\r\n    Promise.all(data.map(item => getSong(item.songName || item.fileName)))\r\n      .then(songs => resolve(songs))\r\n      .catch(error => reject(error))\r\n  })\r\n}\r\n\r\nexport const isSongExistInPlaylist = ({ playlistId, songName }) => {\r\n  return new Promise((resolve, reject) => {\r\n    let queryParams = `?orderBy=\"playlistId\"&equalTo=\"${playlistId}\"`;\r\n    axios.get(`${process.env.REACT_APP_FIREBASE_DATABASE}/playlists-songs.json/${queryParams}`)\r\n      .then((response) => {\r\n        if (!response.data) resolve(false);\r\n        const playlistSongs = Object.values(response.data);\r\n        const isSongExist = ~playlistSongs.findIndex(item => item.songName === songName);\r\n\r\n        resolve(!!isSongExist);\r\n      })\r\n      .catch(error => reject(error))\r\n  })\r\n}\r\n\r\nexport const saveSongTag = (obj, token) => {\r\n  return new Promise((resolve, reject) => {\r\n    axios.post(`${process.env.REACT_APP_FIREBASE_DATABASE}/song-tag.json/?auth=${token}`, obj)\r\n      .then(() => resolve())\r\n      .catch(error => reject(error))\r\n  })\r\n}\r\n","export const getAudioDuration = (song) => {\r\n  return new Promise((resolve, reject) => {\r\n    const reader = new FileReader();\r\n\r\n    reader.onload = (event) => {\r\n      const audioContext = new (window.AudioContext || window.webkitAudioContext)();\r\n      audioContext.decodeAudioData(event.target.result, buffer => {\r\n        resolve(buffer.duration);\r\n      })\r\n    }\r\n    reader.onerror = (error) => reject(error);\r\n\r\n    reader.readAsArrayBuffer(song);\r\n  })\r\n}\r\n\r\nexport const getDurationInHumanTime = (duration) => {\r\n  duration = (duration / 60).toFixed(2);\r\n\r\n  if (duration > 60) {\r\n    let [hours, restMinutes] = (duration / 60).toFixed(2).toString().split('.');\r\n    let [minutes, restSeconds] = (60 * restMinutes / 100).toString().split('.');\r\n    const seconds = Math.round(60 * restSeconds / 100).toString();\r\n\r\n    return humanTime(seconds, minutes, hours);\r\n  }\r\n\r\n  const [minutes, rest] = duration.toString().split('.');\r\n  const seconds = Math.round(60 * rest / 100).toString();\r\n  return humanTime(seconds, minutes);\r\n}\r\n\r\nexport const humanTime = (...time) => {\r\n  const [seconds, minutes, hours] = time.map((item, index) => index < 2 && item.length < 2 ? `0${item}` : item);\r\n  let humanTime = hours ? `${hours}:` : '';\r\n  humanTime += minutes ? `${minutes}:` : '00';\r\n  humanTime += seconds ? `${seconds}` : '00';\r\n  return humanTime;\r\n}\r\n","import * as actionTypes from '../actionTypes';\r\nimport firebase from '../../firebase';\r\nimport axios from 'axios';\r\nimport { message } from 'antd';\r\n\r\nimport {\r\n  bandNamesCachingDecorator,\r\n  getSongLikesCount,\r\n  getSong,\r\n  isSongExistInPlaylist,\r\n  getSongs,\r\n  saveSongTag,\r\n  getSongTags,\r\n} from './utility';\r\nimport { getAudioDuration } from '../../utility/audio';\r\n\r\nexport const startSongsLoadingActionCreator = () => {\r\n  return {\r\n    type: actionTypes.START_SONGS_LOADING,\r\n  }\r\n}\r\n\r\nexport const finishSongsLoadingActionCreator = () => {\r\n  return {\r\n    type: actionTypes.FINISH_SONGS_LOADING,\r\n  }\r\n}\r\n\r\nexport const startCreatingSongActionCreator = () => {\r\n  return {\r\n    type: actionTypes.START_SONG_CREATION,\r\n  }\r\n}\r\n\r\nexport const finishCreatingSongActionCreator = () => {\r\n  return {\r\n    type: actionTypes.FINISH_SONG_CREATION,\r\n  }\r\n}\r\n\r\nexport const setLoadedPercentActionCreator = (percents) => {\r\n  return {\r\n    type: actionTypes.SET_LOAD_PERCENTS,\r\n    percents,\r\n  }\r\n}\r\n\r\nexport const addSongsToListActionCreator = (songs) => {\r\n  return {\r\n    type: actionTypes.ADD_SONGS_TO_LIST,\r\n    songs,\r\n  }\r\n}\r\n\r\nexport const unshiftSongToListActionCreator = (song) => {\r\n  return {\r\n    type: actionTypes.UNSHIFT_SONG_TO_LIST,\r\n    song,\r\n  }\r\n}\r\n\r\nexport const clearSongListActionCreator = () => {\r\n  return {\r\n    type: actionTypes.CLEAR_SONGS_LIST,\r\n  }\r\n}\r\n\r\nexport const songsErrorActionCreator = (error) => {\r\n  return {\r\n    type: actionTypes.SONGS_ERROR,\r\n    error,\r\n  }\r\n}\r\n\r\nexport const startPlayMusicActionCreator = (fileName) => {\r\n  return {\r\n    type: actionTypes.SELECT_SONG,\r\n    fileName,\r\n  }\r\n}\r\n\r\nexport const startPlayRecivedSongActionCreator = (song) => {\r\n  return {\r\n    type: actionTypes.PLAY_RECIVED_SONG,\r\n    song,\r\n  }\r\n}\r\n\r\nexport const playNextSongActionCreator = () => {\r\n  return {\r\n    type: actionTypes.SELECT_NEXT_SONG,\r\n  }\r\n}\r\n\r\nexport const playPrevSongActionCreator = () => {\r\n  return {\r\n    type: actionTypes.SELECT_PREV_SONG,\r\n  }\r\n}\r\n\r\nexport const playSongActionCreator = () => {\r\n  return {\r\n    type: actionTypes.PLAY_SONG,\r\n  }\r\n}\r\n\r\nexport const pauseSongActionCreator = () => {\r\n  return {\r\n    type: actionTypes.PAUSE_SONG,\r\n  }\r\n}\r\n\r\nexport const songReadyToPlayActionCreator = () => {\r\n  return {\r\n    type: actionTypes.SELECTED_SONG_READY_TO_PLAY,\r\n  }\r\n}\r\n\r\nexport const toggleSongLikesActionCreator = (fileName, key) => {\r\n  return {\r\n    type: actionTypes.TOGGLE_SONG_LIKES,\r\n    fileName,\r\n    key,\r\n  }\r\n}\r\n\r\nexport const startUpdatingActionCreator = (fileName) => {\r\n  return {\r\n    type: actionTypes.START_SONG_UPDATING,\r\n    fileName,\r\n  }\r\n}\r\n\r\nexport const finishUpdatingActionCreator = (fileName) => {\r\n  return {\r\n    type: actionTypes.FINISH_SONG_UPDATING,\r\n    fileName,\r\n  }\r\n}\r\n\r\nexport const setUpdatedDataToSongActionCreator = (fileName, data) => {\r\n  return {\r\n    type: actionTypes.SET_SONG_UPDATED_DATA,\r\n    fileName,\r\n    data,\r\n  }\r\n}\r\n\r\nexport const addPlaylistsActionCreator = (playlists) => {\r\n  return {\r\n    type: actionTypes.ADD_PLAYLISTS,\r\n    playlists,\r\n  }\r\n}\r\n\r\nexport const clearPlaylistActionCreator = () => {\r\n  return {\r\n    type: actionTypes.CLEAR_PLAYLISTS,\r\n  }\r\n}\r\n\r\nexport const shuffleSongsActionCreator = () => {\r\n  return {\r\n    type: actionTypes.SHUFFLE_SONGS,\r\n  }\r\n}\r\n\r\nexport const reorderSongsListActionCreator = (oldIndex, newIndex) => {\r\n  return {\r\n    type: actionTypes.REORDER_SONGS,\r\n    oldIndex,\r\n    newIndex,\r\n  }\r\n}\r\n\r\nexport const createSongInfoActionCreator = (songInfo) => {\r\n  return (dispatch, getState) => {\r\n    songInfo.localId = getState().auth.localId;\r\n    songInfo.listened_times = 0;\r\n\r\n    const songTags = songInfo.tags;\r\n    delete songInfo.tags;         //we don't want to save song tags in songs.json\r\n\r\n    axios.post(`${process.env.REACT_APP_FIREBASE_DATABASE}/songs.json/?auth=${getState().auth.idToken}`, songInfo)\r\n      .then(() => {\r\n        songInfo.bandName = getState().band.bandName;\r\n        songInfo.likesCount = 0;\r\n        songInfo.userIsLikedSong = false;\r\n        songInfo.userLikeId = null;\r\n        songInfo.tags = songTags;\r\n\r\n        dispatch(unshiftSongToListActionCreator(songInfo));\r\n        dispatch(finishCreatingSongActionCreator());\r\n      })\r\n      .catch(error => {\r\n        dispatch(songsErrorActionCreator(error));\r\n        dispatch(finishCreatingSongActionCreator());\r\n      })\r\n  }\r\n}\r\n\r\nexport const saveSongTagsActionCreator = (song) => {\r\n  return (dispatch, getState) => {\r\n    const token = getState().auth.idToken;\r\n\r\n    Promise.all(song.tags.map(tag => {\r\n      const songTag = {\r\n        songName: song.fileName,\r\n        tag,\r\n      }\r\n      return saveSongTag(songTag, token)\r\n    }))\r\n      .then(() => {\r\n        dispatch(createSongInfoActionCreator(song))\r\n      })\r\n  }\r\n}\r\n\r\nexport const uploadSongPicture = (songPicture, songInfo, totalUploadSize) => {\r\n  return dispatch => {\r\n    songInfo.imageName = new Date().getTime() + songPicture.name;\r\n\r\n    const storeRef = firebase.storage().ref('pictures-of-songs/').child(songInfo.imageName).put(songPicture);\r\n\r\n    const alreadyUploadSize = totalUploadSize - songPicture.size;\r\n    storeRef.on('state_changed', function (snapshot) {\r\n      const progress = ((alreadyUploadSize + snapshot.bytesTransferred) / totalUploadSize).toFixed(2) * 100;\r\n      dispatch(setLoadedPercentActionCreator(progress));\r\n    })\r\n\r\n    storeRef\r\n      .then(() => {\r\n        dispatch(saveSongTagsActionCreator(songInfo))\r\n      })\r\n      .catch(error => {\r\n        dispatch(songsErrorActionCreator(error))\r\n        dispatch(finishCreatingSongActionCreator());\r\n      })\r\n  }\r\n}\r\n\r\nexport const uploadSongActionCreator = (song, songPicture, songInfo) => {\r\n  return async dispatch => {\r\n    dispatch(startCreatingSongActionCreator());\r\n    songInfo.fileName = new Date().getTime() + song.name;\r\n    songInfo.duration = await getAudioDuration(song);\r\n\r\n    const storeRef = firebase.storage().ref('songs/').child(songInfo.fileName).put(song);\r\n\r\n    const totalUploadSize = song.size + songPicture.size;\r\n    storeRef.on('state_changed', function (snapshot) {\r\n      const progress = (snapshot.bytesTransferred / totalUploadSize).toFixed(2) * 100;\r\n      dispatch(setLoadedPercentActionCreator(progress));\r\n    })\r\n\r\n    storeRef\r\n      .then(() => {\r\n        dispatch(uploadSongPicture(songPicture, songInfo, totalUploadSize))\r\n      })\r\n      .catch(error => {\r\n        dispatch(songsErrorActionCreator(error))\r\n        dispatch(finishCreatingSongActionCreator());\r\n      })\r\n  }\r\n}\r\n\r\nexport const fetchSongsBandNameActionCreator = (songs) => {\r\n  return async dispatch => {\r\n    const src = `${process.env.REACT_APP_FIREBASE_DATABASE}/bands.json?orderBy=\"localId\"&equalTo=`;\r\n    const getBandName = bandNamesCachingDecorator(src);\r\n\r\n    for (let song of songs) {\r\n      await getBandName(song.localId)\r\n    }\r\n\r\n    const namesOfBands = await getBandName();\r\n    for (let song of songs) {\r\n      song.bandName = namesOfBands.get(song.localId);\r\n    }\r\n\r\n    dispatch(getSongsLikesCountActionCreator(songs));\r\n  }\r\n}\r\n\r\nexport const fetchBandSongsActionCreator = (bandId) => {\r\n  return dispatch => {\r\n    dispatch(startSongsLoadingActionCreator());\r\n\r\n    let queryParams = `?orderBy=\"localId\"&equalTo=\"${bandId}\"`;\r\n    axios.get(`${process.env.REACT_APP_FIREBASE_DATABASE}/songs.json/${queryParams}`)\r\n      .then((response) => {\r\n        response.data\r\n          ? dispatch(fetchSongsBandNameActionCreator(Object.values(response.data).reverse()))\r\n          : dispatch(finishSongsLoadingActionCreator());\r\n      })\r\n      .catch(error => {\r\n        dispatch(songsErrorActionCreator(error));\r\n      })\r\n  }\r\n}\r\n\r\nexport const fetchSongsByTagActionCreator = (tag) => {\r\n  return dispatch => {\r\n    dispatch(startSongsLoadingActionCreator());\r\n\r\n    let queryParams = `?orderBy=\"tag\"&equalTo=\"${tag}\"`;\r\n    axios.get(`${process.env.REACT_APP_FIREBASE_DATABASE}/song-tag.json/${queryParams}`)\r\n      .then(response => Object.values(response.data))\r\n      .then(tagData => getSongs(tagData))\r\n      .then(songsItems => songsItems.map(songItem => songItem[Object.keys(songItem)[0]]))\r\n      .then(songs => dispatch(fetchSongsBandNameActionCreator(songs)))\r\n      .catch(error => {\r\n        dispatch(songsErrorActionCreator(error));\r\n      })\r\n  }\r\n}\r\n\r\nexport const getSongsLikesCountActionCreator = (songs) => {\r\n  return (dispatch, getState) => {\r\n    const localId = getState().auth.localId;\r\n    Promise.all(songs.map(song => getSongLikesCount(song, localId)))\r\n      .then(songsLikes => {\r\n        songsLikes.forEach((songLikes, index) => {\r\n          songs[index] = {\r\n            ...songs[index],\r\n            ...songLikes\r\n          }\r\n        })\r\n        dispatch(getSongsTagsActionCreator(songs));\r\n      })\r\n  }\r\n}\r\n\r\nexport const addSongLikeActionCreator = (fileName, key) => {\r\n  return (dispatch, getState) => {\r\n    if (key) return;    // user already liked this song\r\n    dispatch(startUpdatingActionCreator(fileName));\r\n\r\n    const like = {\r\n      fileName,\r\n      localId: getState().auth.localId,\r\n    }\r\n\r\n    axios.post(`${process.env.REACT_APP_FIREBASE_DATABASE}/song_likes.json/?auth=${getState().auth.idToken}`, like)\r\n      .then((response) => {\r\n        dispatch(toggleSongLikesActionCreator(fileName, response.data.name));\r\n        dispatch(finishUpdatingActionCreator(fileName));\r\n      })\r\n      .catch(error => {\r\n        dispatch(songsErrorActionCreator(error));\r\n        dispatch(finishCreatingSongActionCreator());\r\n      })\r\n  }\r\n}\r\n\r\nexport const removeSongLikeActionCreator = (fileName, key) => {\r\n  return (dispatch, getState) => {\r\n    if (!key) return;     //user has not liked this song\r\n    dispatch(startUpdatingActionCreator(fileName));\r\n\r\n    axios.delete(`${process.env.REACT_APP_FIREBASE_DATABASE}/song_likes/${key}.json/?auth=${getState().auth.idToken}`)\r\n      .then(() => {\r\n        dispatch(toggleSongLikesActionCreator(fileName));\r\n        dispatch(finishUpdatingActionCreator(fileName));\r\n      })\r\n      .catch(error => {\r\n        dispatch(songsErrorActionCreator(error));\r\n      })\r\n  }\r\n}\r\n\r\nexport const updateSongListenedTimesActionCreator = (fileName) => {\r\n  return dispatch => {\r\n    getSong(fileName)\r\n      .then(response => {\r\n        const song = Object.entries(response)[0];\r\n        const data = {\r\n          listened_times: song[1].listened_times + 1,\r\n        }\r\n\r\n        axios.patch(`${process.env.REACT_APP_FIREBASE_DATABASE}/songs/${song[0]}.json`, data)\r\n          .then(() => {\r\n            const updatedData = {\r\n              listened_times: data.listened_times,\r\n            }\r\n            dispatch(setUpdatedDataToSongActionCreator(fileName, updatedData));\r\n          })\r\n          .catch(error => {\r\n            dispatch(songsErrorActionCreator(error));\r\n          })\r\n      })\r\n  }\r\n}\r\n\r\nexport const getSongsTagsActionCreator = (songs) => {\r\n  return dispatch => {\r\n    Promise.all(songs.map(song => getSongTags(song)))\r\n      .then(songsTags => {\r\n        songsTags.forEach((songTags, index) => {\r\n          songs[index].tags = songTags;\r\n        })\r\n        dispatch(addSongsToListActionCreator(songs));\r\n      })\r\n  }\r\n}\r\n\r\nexport const createPlaylistActionCreator = (data) => {\r\n  return (dispatch, getState) => {\r\n    axios.post(`${process.env.REACT_APP_FIREBASE_DATABASE}/playlists.json/?auth=${getState().auth.idToken}`, data)\r\n      .then(() => {\r\n        dispatch(addPlaylistsActionCreator([data]));\r\n        message.success('New playlist was created successfully');\r\n      })\r\n      .catch(error => {\r\n        dispatch(songsErrorActionCreator(error));\r\n        dispatch(finishCreatingSongActionCreator());\r\n      })\r\n  }\r\n}\r\n\r\nexport const addSongToPlaylistActionCreator = (data) => {\r\n  return (dispatch, getState) => {\r\n    isSongExistInPlaylist(data)\r\n      .then(isSongExist => {\r\n        if (isSongExist) {\r\n          message.warn('Song is alredy in this playlist');\r\n          return;\r\n        }\r\n\r\n        axios.post(`${process.env.REACT_APP_FIREBASE_DATABASE}/playlists-songs.json/?auth=${getState().auth.idToken}`, data)\r\n          .then(() => message.success('Song was added to playlist'))\r\n          .catch(error => {\r\n            dispatch(songsErrorActionCreator(error));\r\n            dispatch(finishCreatingSongActionCreator());\r\n          })\r\n      })\r\n  }\r\n}\r\n\r\nexport const fetchPlaylistsActionCreator = (userId) => {\r\n  return dispatch => {\r\n    let queryParams = `?orderBy=\"userId\"&equalTo=\"${userId}\"`;\r\n    axios.get(`${process.env.REACT_APP_FIREBASE_DATABASE}/playlists.json/${queryParams}`)\r\n      .then((response) => {\r\n        const playlists = Object.values(response.data);\r\n        dispatch(addPlaylistsActionCreator(playlists));\r\n      })\r\n      .catch(error => {\r\n        dispatch(songsErrorActionCreator(error));\r\n      })\r\n  }\r\n}\r\n\r\nexport const fetchPlaylistRecordsActionCreator = (playlistId) => {\r\n  return dispatch => {\r\n    dispatch(startSongsLoadingActionCreator());\r\n\r\n    let queryParams = `?orderBy=\"playlistId\"&equalTo=\"${playlistId}\"`;\r\n    axios.get(`${process.env.REACT_APP_FIREBASE_DATABASE}/playlists-songs.json/${queryParams}`)\r\n      .then(response => {\r\n        if (response.data) return Object.values(response.data).reverse();\r\n        else dispatch(finishSongsLoadingActionCreator())\r\n      })\r\n      .then(records => getSongs(records))\r\n      .then(songsItems => songsItems.map(songItem => songItem[Object.keys(songItem)[0]]))\r\n      .then(songs => dispatch(fetchSongsBandNameActionCreator(songs)))\r\n      .catch(error => dispatch(songsErrorActionCreator(error)))\r\n  }\r\n}\r\n\r\nexport const fetchLikedSongsActionCreator = (localId) => {\r\n  return dispatch => {\r\n    dispatch(startSongsLoadingActionCreator());\r\n\r\n    let queryParams = `?orderBy=\"localId\"&equalTo=\"${localId}\"`;\r\n    axios.get(`${process.env.REACT_APP_FIREBASE_DATABASE}/song_likes.json/${queryParams}`)\r\n      .then(response => Object.values(response.data))\r\n      .then(likedSongs => getSongs(likedSongs))\r\n      .then(songsItems => songsItems.map(songItem => songItem[Object.keys(songItem)[0]]))\r\n      .then(songs => dispatch(fetchSongsBandNameActionCreator(songs)))\r\n      .catch(error => dispatch(songsErrorActionCreator(error)))\r\n  }\r\n}\r\n","import axios from 'axios';\r\n\r\nexport const fetchSongsByName = (searchWord) => {\r\n  return new Promise((resolve, reject) => {\r\n    let queryParams = `?orderBy=\"name\"&startAt=\"${searchWord}\"`;\r\n    axios.get(`${process.env.REACT_APP_FIREBASE_DATABASE}/songs.json/${queryParams}`)\r\n      .then(response => {\r\n        if (!response.data) resolve();\r\n\r\n        const recivedSongs = Object.values(response.data);\r\n        const songs = recivedSongs.filter(song => song.name.slice(0, searchWord.length) === searchWord);\r\n        resolve(songs.slice(0, 5));\r\n      })\r\n      .catch(error => reject(error))\r\n  })\r\n}\r\n\r\nexport const fetchSongBandName = (song) => {\r\n  return new Promise((resolve, reject) => {\r\n    axios.get(`${process.env.REACT_APP_FIREBASE_DATABASE}/bands.json?orderBy=\"localId\"&equalTo=\"${song.localId}\"`)\r\n      .then(response => {\r\n        if (!response.data) reject(new Error('Can\\'t get song author name'))\r\n\r\n        const band = Object.values(response.data)[0];\r\n        song.bandName = band.bandName;\r\n\r\n        resolve(song);\r\n      })\r\n      .catch(error => reject(error))\r\n  })\r\n}\r\n\r\nexport const fetchSongLikesCount = (song) => {\r\n  return new Promise((resolve, reject) => {\r\n    let queryParams = `?orderBy=\"fileName\"&equalTo=\"${song.fileName}\"`;\r\n    axios.get(`${process.env.REACT_APP_FIREBASE_DATABASE}/song_likes.json/${queryParams}`)\r\n      .then((response) => {\r\n        const likesCount = response.data\r\n          ? Object.keys(response.data).length\r\n          : 0;\r\n\r\n        song.likesCount = likesCount;\r\n        resolve(song);\r\n      })\r\n      .catch(error => reject(error));\r\n  })\r\n}\r\n\r\nexport const fetchSongTags = (song) => {\r\n  return new Promise((resolve, reject) => {\r\n    let queryParams = `?orderBy=\"songName\"&equalTo=\"${song.fileName}\"`;\r\n    axios.get(`${process.env.REACT_APP_FIREBASE_DATABASE}/song-tag.json/${queryParams}`)\r\n      .then((response) => {\r\n        song.tags = Object.values(response.data).map(songTag => songTag.tag);\r\n        resolve(song);\r\n      })\r\n      .catch(error => reject(error))\r\n  })\r\n}\r\n\r\nexport const fetchSong = (fileName) => {\r\n  return new Promise((resolve, reject) => {\r\n    let queryParams = `?orderBy=\"fileName\"&equalTo=\"${fileName}\"`;\r\n    axios.get(`${process.env.REACT_APP_FIREBASE_DATABASE}/songs.json/${queryParams}`)\r\n      .then(response => {\r\n        if (!response.data) resolve();\r\n\r\n        const song = Object.values(response.data)[0];\r\n        resolve(song);\r\n      })\r\n      .catch(error => reject(error))\r\n  })\r\n}\r\n\r\nexport const sortSongsByBandName = (song1, song2) => {\r\n  if (song1.bandName > song2.bandName) return 1;\r\n  if (song1.bandName === song2.bandName) return 0;\r\n  return -1;\r\n}\r\n\r\nexport const fetchSongs = (searchWord) => {\r\n  return new Promise((resolve, reject) => {\r\n    fetchSongsByName(searchWord)\r\n      .then(songs => Promise.all(songs.map(song => fetchSongBandName(song))))\r\n      .then(songs => Promise.all(songs.map(song => fetchSongTags(song))))\r\n      .then(songs => Promise.all(songs.map(song => fetchSongLikesCount(song))))\r\n      .then(songs => songs.sort(sortSongsByBandName))\r\n      .then(songs => resolve(songs))\r\n      .catch(error => reject(error))\r\n  })\r\n}\r\n\r\nexport const fetchImageByTag = (tag) => {\r\n  return new Promise((resolve, reject) => {\r\n    let queryParams = `?orderBy=\"tag\"&equalTo=\"${tag}\"&limitToFirst=1`;\r\n    axios.get(`${process.env.REACT_APP_FIREBASE_DATABASE}/song-tag.json/${queryParams}`)\r\n      .then(response => Object.values(response.data)[0].songName)\r\n      .then(songFileName => fetchSong(songFileName))\r\n      .then(song => song.imageName)\r\n      .then(imageName => imageName)\r\n      .then(imageName => resolve(imageName))\r\n      .catch(error => reject(error))\r\n  })\r\n}\r\n\r\nexport const fetchLikedSongsCount = (localId) => {\r\n  return new Promise((resolve, reject) => {\r\n    let queryParams = `?orderBy=\"localId\"&equalTo=\"${localId}\"`;\r\n    axios.get(`${process.env.REACT_APP_FIREBASE_DATABASE}/song_likes.json/${queryParams}`)\r\n      .then(response => Object.values(response.data))\r\n      .then(likedSongs => resolve(likedSongs.length))\r\n      .catch(error => reject(error))\r\n  })\r\n}\r\n","import React from 'react';\r\nimport Icon from '@ant-design/icons';\r\n\r\nexport const HeartSvg = () => (\r\n  <svg width='1em' height='1em' fill='currentColor' viewBox='0 0 1024 1024'>\r\n    <path d='M923 283.6c-13.4-31.1-32.6-58.9-56.9-82.8-24.3-23.8-52.5-42.4-84-55.5-32.5-13.5-66.9-20.3-102.4-20.3-49.3 0-97.4 13.5-139.2 39-10 6.1-19.5 12.8-28.5 20.1-9-7.3-18.5-14-28.5-20.1-41.8-25.5-89.9-39-139.2-39-35.5 0-69.9 6.8-102.4 20.3-31.4 13-59.7 31.7-84 55.5-24.4 23.9-43.5 51.7-56.9 82.8-13.9 32.3-21 66.6-21 101.9 0 33.3 6.8 68 20.3 103.3 11.3 29.5 27.5 60.1 48.2 91 32.8 48.9 77.9 99.9 133.9 151.6 92.8 85.7 184.7 144.9 188.6 147.3l23.7 15.2c10.5 6.7 24 6.7 34.5 0l23.7-15.2c3.9-2.5 95.7-61.6 188.6-147.3 56-51.7 101.1-102.7 133.9-151.6 20.7-30.9 37-61.5 48.2-91 13.5-35.3 20.3-70 20.3-103.3 0.1-35.3-7-69.6-20.9-101.9z' />\r\n  </svg>\r\n);\r\n\r\nexport const HeartIcon = props => <Icon component={HeartSvg} {...props} />;\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport { CustomerServiceOutlined } from '@ant-design/icons';\r\n\r\nimport { HeartIcon } from '../../../utility/icons';\r\nimport classes from './ItemResult.module.css';\r\n\r\nconst ItemResult = ({ song, startPlay }) => {\r\n  return (\r\n    <Link\r\n      onClick={startPlay.bind(this, song)}\r\n      to={{ pathname: '/band', state: { localId: song.localId } }}\r\n    >\r\n      <div className={classes.dataArea}>\r\n        <div className={classes.title}>{song.name}</div>\r\n        <div className={classes.songStatistic}>\r\n          <CustomerServiceOutlined /> {song.listened_times}\r\n          <HeartIcon /> {song.likesCount}\r\n        </div>\r\n      </div>\r\n    </Link>\r\n  )\r\n}\r\n\r\nexport default ItemResult;\r\n","import React, { useState, useEffect, useRef } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport _ from 'lodash';\r\n\r\nimport { AutoComplete, message } from 'antd';\r\n\r\nimport { startPlayRecivedSongActionCreator } from '../../store/songs/actions';\r\nimport { fetchSongs } from '../../utility/song-queries';\r\nimport ItemResult from './ItemResult/ItemResult';\r\nimport './SearchBar.css';\r\n\r\nconst SearchBar = (props) => {\r\n  const [searchWord, setSearchWord] = useState('');\r\n  const [recivedSongs, setRecivedSongs] = useState([]);\r\n\r\n  const debounce = useRef(_.debounce((word) => {\r\n    fetchSongs(word)\r\n      .then(songs => handleResultRecive(songs))\r\n      .catch(error => message.error(error.message))\r\n  }, 800));\r\n\r\n  useEffect(() => {\r\n    if (searchWord.length < 3) return;\r\n    debounce.current(searchWord);\r\n  }, [searchWord])\r\n\r\n  const handleResultRecive = (songs) => {\r\n    setRecivedSongs(songs);\r\n  }\r\n\r\n  const handleChange = (event) => {\r\n    const word = event.target.value;\r\n    setSearchWord(word);\r\n  }\r\n\r\n  const renderTitle = title => (\r\n    <span>{title}</span>\r\n  );\r\n\r\n  const renderItem = (song) => ({\r\n    value: song.name,\r\n    label: <ItemResult song={song} startPlay={props.startPlay} />,\r\n  });\r\n\r\n  return (\r\n    <div className={'search_bar-container'}>\r\n      <AutoComplete\r\n        value={searchWord}\r\n        placeholder='Type to search songs here...'\r\n        onInput={handleChange}\r\n        options={\r\n          recivedSongs.map((song, index) => {\r\n            let bandName = song.bandName;\r\n            if (index > 0 && recivedSongs[index - 1].bandName === song.bandName) {\r\n              bandName = null;\r\n            }\r\n\r\n            if (bandName) {\r\n              return {\r\n                label: renderTitle(bandName),\r\n                options: [renderItem(song)],\r\n              }\r\n            } else {\r\n              return renderItem(song);\r\n            }\r\n          })\r\n        }\r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    startPlay: (song) => { dispatch(startPlayRecivedSongActionCreator(song)) },\r\n  }\r\n}\r\n\r\nexport default connect(null, mapDispatchToProps)(SearchBar);\r\n","import React from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\n\r\nimport classes from './DesktopNavMenu.module.css';\r\n\r\nconst DesktopNavMenu = (props) => {\r\n  const handleClick = (event) => {\r\n    const disableLinks = props.disabled;\r\n    if (disableLinks) event.preventDefault()\r\n  }\r\n\r\n  return (\r\n    <div className={props.position === 'left' ? classes.leftMenu : classes.rightMenu}>\r\n      {\r\n        props.items.map((item, index) => (\r\n          <NavLink\r\n            key={index}\r\n            to={item.to || item.split(' ').join('-')}\r\n            className={classes.navLink}\r\n            activeClassName={classes.navLinkActive}\r\n            onClick={handleClick}\r\n            exact\r\n          >\r\n            {item.name || item}\r\n          </NavLink>\r\n        ))\r\n      }\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default DesktopNavMenu;\r\n","import React, { useState } from 'react';\r\n\r\nconst ModalWrapper = (props) => {\r\n  const [modalIsOpen, setModalIsOpen] = useState(false);\r\n  const { modal: Modal } = props;\r\n\r\n  const openModal = () => {\r\n    setModalIsOpen(true);\r\n  }\r\n\r\n  const closeModal = () => {\r\n    setModalIsOpen(false);\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div\r\n        className={props.className}\r\n        onClick={props.disabled ? null : openModal}\r\n      >\r\n        {props.label}\r\n      </div>\r\n      <Modal open={modalIsOpen} closeModal={closeModal} />\r\n    </>\r\n  )\r\n}\r\n\r\nexport default ModalWrapper;\r\n","import { message } from 'antd';\r\n\r\nexport const validateImage = (maxSize = 2, image) => {  // maxSize(Mb)\r\n  const isJpgOrPng = image.type === 'image/jpeg' || image.type === 'image/png';\r\n  if (!isJpgOrPng) {\r\n    message.error('You can only upload JPG/PNG file!');\r\n  }\r\n\r\n  const isLt2M = image.size / 1024 / 1024 < maxSize;\r\n  if (!isLt2M) {\r\n    message.error(`Image must be smaller than ${maxSize}MB!`);\r\n  }\r\n\r\n  return isJpgOrPng && isLt2M;\r\n}\r\n\r\nexport const validateSong = (song) => {\r\n  const isMpeg = song.type === 'audio/mpeg';\r\n  if (!isMpeg) {\r\n    message.error('You can only upload MP3/PNG file!');\r\n  }\r\n\r\n  const isLt2M = song.size / 1024 / 1024 < 30;\r\n  if (!isLt2M) {\r\n    message.error('Image must be smaller than 30MB!');\r\n  }\r\n\r\n  return isMpeg && isLt2M;\r\n}\r\n\r\n","import axios from 'axios';\r\n\r\nexport const createSrc = (name, folder) => (\r\n  'https://firebasestorage.googleapis.com/v0/b/'\r\n  + `${process.env.REACT_APP_FIREBASE_KEY_STORE_BUCKET}/o/${folder}%2F`\r\n  + `${name}?alt=media`\r\n)\r\n\r\nexport const fetchBandData = (localId) => {\r\n  return new Promise((resolve, reject) => {\r\n    let queryParams = `?orderBy=\"localId\"&equalTo=\"${localId}\"&limitToFirst=1`;\r\n    axios.get(`${process.env.REACT_APP_FIREBASE_DATABASE}/bands.json/${queryParams}`)\r\n      .then(response => {\r\n        if (response.data) {\r\n          resolve(Object.values(response.data)[0]);\r\n        }\r\n      })\r\n      .catch(error => reject(error))\r\n  })\r\n}\r\n","import React from 'react';\r\n\r\nimport { Form, Upload } from 'antd';\r\nimport { UploadOutlined } from '@ant-design/icons';\r\n\r\nimport { validateImage } from '../../../utility/file-validation';\r\nimport classes from './FormPicture.module.css';\r\nimport { createSrc } from '../../../utility/user';\r\n\r\nconst FormPicture = (props) => {\r\n  let picture = (\r\n    <div className={classes.pictureAlt}>\r\n      <UploadOutlined /> {'Picture'}\r\n    </div>\r\n  )\r\n\r\n  if (props.picture) {\r\n    let src = null;\r\n    try {\r\n      src = URL.createObjectURL(props.picture);\r\n    } catch (error) {\r\n      src = createSrc(props.picture, 'user-images');\r\n    }\r\n\r\n    picture = (\r\n      <img\r\n        src={src}\r\n        className={classes.picture}\r\n        alt={props.name} />\r\n    )\r\n  }\r\n\r\n  return (\r\n    <Form.Item\r\n      name={props.name}\r\n      className={classes.formItem}\r\n      rules={props.rules}>\r\n      <Upload\r\n        fileList={null}\r\n        action={props.setPicture}\r\n        showUploadList={false}\r\n        beforeUpload={validateImage.bind(this, props.pictureSize)}>\r\n        {picture}\r\n      </Upload>\r\n    </Form.Item>\r\n  )\r\n}\r\n\r\nexport default FormPicture;\r\n","export const genres = [\r\n  'Rock',\r\n  'Pop',\r\n  'Alternative',\r\n  'Classical',\r\n  'Country',\r\n  'Folk',\r\n  'Rap and Hip Hop',\r\n  'Rhythm and Blues',\r\n  'Punk',\r\n  'Heavy Metal',\r\n  'Jazz',\r\n  'Latin Music',\r\n]\r\n\r\nexport const likedSongs = {\r\n  name: 'Liked songs',\r\n  description: 'Pellentesque nec nam aliquam sem et tortor consequat id. Aliquam vestibulum morbi blandit cursus risus. Risus in hendrerit gravida rutrum quisque non. Lacus laoreet non curabitur gravida arcu ac. Amet venenatis urna cursus eget nunc scelerisque viverra. Viverra suspendisse potenti nullam ac. Ullamcorper a lacus vestibulum sed arcu non odio euismod lacinia.',\r\n}","import React from 'react';\r\n\r\nimport { Form, Input, Select } from 'antd';\r\n\r\nimport { genres } from '../../../utility/music-genres';\r\n\r\nconst AuthInputs = ({ stateInputs, onChangeHandler }) => {\r\n  const { Option } = Select;\r\n\r\n  const genresOptions = [];\r\n  for (let genre of genres) {\r\n    genresOptions.push(<Option key={genre}>{genre}</Option>);\r\n  }\r\n\r\n  let inputs = [];\r\n  for (let key in stateInputs) {\r\n    inputs.push(\r\n      <Form.Item\r\n        key={key}\r\n        name={stateInputs[key].config.name}\r\n        label={stateInputs[key].config.label}\r\n        rules={[stateInputs[key].validationRules]}>\r\n        {\r\n          (key === 'genres' || key === 'tags')\r\n            ? <Select\r\n              value={stateInputs[key].value}\r\n              mode={key === 'genres' ? 'multiple' : 'tags'}\r\n              placeholder={stateInputs[key].config.placeholder}\r\n              tokenSeparators={key === 'genres' ? null : ['#', ',', '.']}\r\n              onChange={onChangeHandler.bind(this, key)}\r\n            >\r\n              {key === 'genres' ? genresOptions : null}\r\n            </Select>\r\n            : <Input\r\n              type={stateInputs[key].config.type}\r\n              value={stateInputs[key].value}\r\n              placeholder={stateInputs[key].config.placeholder}\r\n              onChange={onChangeHandler.bind(this, key)}\r\n            />\r\n        }\r\n      </Form.Item>\r\n    );\r\n  }\r\n\r\n  return inputs;\r\n}\r\n\r\nexport default AuthInputs;\r\n","import * as actionTypes from '../actionTypes';\r\nimport axios from 'axios';\r\nimport {\r\n  storeUserImage,\r\n  removeUserImage,\r\n  getUserKey,\r\n  getUserData,\r\n  updateUserData,\r\n  userIsAdmin,\r\n} from './utility';\r\n\r\nexport const startLoadingActionCreator = () => {\r\n  return {\r\n    type: actionTypes.START_LOADING,\r\n  }\r\n}\r\n\r\nexport const finishLoadingActionCreator = () => {\r\n  return {\r\n    type: actionTypes.FINISH_LOADING,\r\n  }\r\n}\r\n\r\nexport const loginActionCreator = (userData, rememberMe = false) => {\r\n  return {\r\n    type: actionTypes.LOGIN,\r\n    userData,\r\n    rememberMe,\r\n  }\r\n}\r\n\r\nexport const loginByLocalDataActionCreator = () => {\r\n  return {\r\n    type: actionTypes.LOGIN_LOCALY,\r\n  }\r\n}\r\n\r\nexport const authStartActionCreator = () => {\r\n  return {\r\n    type: actionTypes.AUTH_START,\r\n  }\r\n}\r\n\r\nexport const authFinishActionCreator = () => {\r\n  return {\r\n    type: actionTypes.AUTH_FINISH,\r\n  }\r\n}\r\n\r\nexport const authErrorActionCreator = (error) => {\r\n  return {\r\n    type: actionTypes.AUTH_ERROR,\r\n    error,\r\n  }\r\n}\r\n\r\nexport const setTimeoutIdActionCreator = (timerId) => {\r\n  return {\r\n    type: actionTypes.RESET_TIMEOUT_ID,\r\n    timerId,\r\n  }\r\n}\r\n\r\nexport const setUserDataActionCreator = (data) => {\r\n  return {\r\n    type: actionTypes.SET_USER_DATA,\r\n    data,\r\n  }\r\n}\r\n\r\nexport const setNewTokenActionCreator = (tokens) => {\r\n  return {\r\n    type: actionTypes.SET_TOKEN,\r\n    tokens,\r\n  }\r\n}\r\n\r\nexport const logoutActionCreator = () => {\r\n  return {\r\n    type: actionTypes.LOGOUT,\r\n  }\r\n}\r\n\r\n//middleware\r\nexport const resetTokenTimer = () => { //set token auto-refreshing\r\n  return (dispatch, getState) => {\r\n    clearTimeout(getState().auth.refreshTimerId);\r\n\r\n    let delay = (getState().auth.expiresIn - Math.floor((new Date().getTime() / 1000))) * 1000 - 30 * 1000;\r\n\r\n    if (delay < 0) delay = 0;\r\n\r\n    const timerId = setTimeout(\r\n      () => {\r\n        const refreshData = {\r\n          grant_type: 'refresh_token',\r\n          refresh_token: getState().auth.refreshToken\r\n        };\r\n        try {\r\n          dispatch(refreshTokenActionCreator(refreshData));\r\n        } catch (error) {\r\n          console.log(error)\r\n        }\r\n      }, delay\r\n    );\r\n    dispatch(setTimeoutIdActionCreator(timerId));\r\n  }\r\n}\r\n\r\nexport const postBandDataActionCreator = (createdUser, newUser) => {\r\n  return dispatch => {\r\n    const band = {\r\n      localId: createdUser.localId,\r\n      bandName: newUser.bandName,\r\n      genres: newUser.genres,\r\n      description: 'No description yet',\r\n    }\r\n\r\n    axios.post(`${process.env.REACT_APP_FIREBASE_DATABASE}/bands.json/?auth=${createdUser.idToken}`, band)\r\n      .then(() => {\r\n        createdUser.isBand = true;\r\n        dispatch(loginActionCreator(createdUser))\r\n        dispatch(resetTokenTimer());\r\n      })\r\n      .catch(error => dispatch(authErrorActionCreator(error)))\r\n  }\r\n}\r\n\r\nexport const postUserDataActionCreator = (createdUser, newUser) => {\r\n  return dispatch => {\r\n    const username = newUser.email.split('@')[0];\r\n\r\n    const user = {\r\n      localId: createdUser.localId,\r\n      username: username,\r\n    }\r\n\r\n    axios.post(`${process.env.REACT_APP_FIREBASE_DATABASE}/users.json/?auth=${createdUser.idToken}`, user)\r\n      .then(() => {\r\n        createdUser.username = username;\r\n        dispatch(loginActionCreator(createdUser))\r\n        dispatch(resetTokenTimer());\r\n      })\r\n      .catch(error => dispatch(authErrorActionCreator(error)))\r\n  }\r\n}\r\n\r\nexport const postProfileDataActionCreator = (createdUser, newUser) => {\r\n  return dispatch => {\r\n    if (newUser.bandName) {\r\n      dispatch(postBandDataActionCreator(createdUser, newUser));\r\n    } else {\r\n      dispatch(postUserDataActionCreator(createdUser, newUser))\r\n    }\r\n  }\r\n}\r\n\r\nexport const setUserTypeActionCreator = (user, rememberMe) => { //band or regular user\r\n  return dispatch => {\r\n    let queryParams = `?orderBy=\"localId\"&equalTo=\"${user.localId}\"&limitToFirst=1`;\r\n    axios.get(`${process.env.REACT_APP_FIREBASE_DATABASE}/bands.json/${queryParams}`)\r\n      .then(response => user.isBand = !!response.data)\r\n      .then(isBand => isBand ? null : userIsAdmin(user.localId))\r\n      .then(isAdmin => getUserData(user.localId, isAdmin))\r\n      .then(userData => {\r\n        user = { ...user, ...userData };\r\n\r\n        dispatch(loginActionCreator(user, rememberMe))\r\n        dispatch(resetTokenTimer());\r\n      })\r\n      .catch(error => console.log(error));\r\n  }\r\n}\r\n\r\nexport const signUpActionCreator = (newUser) => {\r\n  return dispatch => {\r\n    dispatch(authStartActionCreator());\r\n\r\n    const authData = {\r\n      email: newUser.email,\r\n      password: newUser.password,\r\n      returnSecureToken: true\r\n    }\r\n\r\n    axios.post(`https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=${process.env.REACT_APP_FIREBASE_KEY}`, authData)\r\n      .then(response => {\r\n        dispatch(postProfileDataActionCreator(response.data, newUser));\r\n      })\r\n      .catch(error => dispatch(authErrorActionCreator(error)))\r\n  }\r\n}\r\n\r\nexport const signInActionCreator = (userData, rememberMe) => {\r\n  return dispatch => {\r\n    dispatch(authStartActionCreator());\r\n\r\n    const authData = {\r\n      email: userData.email,\r\n      password: userData.password,\r\n      returnSecureToken: true\r\n    }\r\n    axios.post(`https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=${process.env.REACT_APP_FIREBASE_KEY}`, authData)\r\n      .then(response => {\r\n        dispatch(setUserTypeActionCreator(response.data, rememberMe));\r\n      })\r\n      .catch(error => dispatch(authErrorActionCreator(error)))\r\n  }\r\n}\r\n\r\nexport const signInLocallyActionCreator = () => {\r\n  return (dispatch) => {\r\n    if (localStorage.getItem('idToken')) {\r\n      dispatch(loginByLocalDataActionCreator());\r\n      dispatch(resetTokenTimer());\r\n    }\r\n\r\n    dispatch(finishLoadingActionCreator());\r\n  }\r\n}\r\n\r\nexport const refreshTokenActionCreator = (token) => {\r\n  return dispatch => {\r\n    axios.post(`https://securetoken.googleapis.com/v1/token?key=${process.env.REACT_APP_FIREBASE_KEY}`, token)\r\n      .then(response => {\r\n        const newTokenData = {\r\n          idToken: response.data.id_token,\r\n          refreshToken: response.data.refresh_token,\r\n          expiresIn: +response.data.expires_in,\r\n        }\r\n        dispatch(setNewTokenActionCreator(newTokenData)); //refreshing token\r\n        dispatch(resetTokenTimer());\r\n      })\r\n      .catch(err => {\r\n        dispatch(authErrorActionCreator(err));\r\n        dispatch(logoutActionCreator());\r\n      });\r\n  }\r\n}\r\n\r\nexport const updateUserDataActionCreator = ({ username, image }) => {\r\n  return (dispatch, getState) => {\r\n    dispatch(authStartActionCreator());\r\n    const token = getState().auth.idToken;\r\n    const localId = getState().auth.localId;\r\n\r\n    const data = {};\r\n    if (username) data.username = username;\r\n    if (image) data.image = image;\r\n\r\n    getUserKey(localId)\r\n      .then(key => updateUserData(data, key, token))\r\n      .then(() => {\r\n        dispatch(setUserDataActionCreator(data));\r\n        dispatch(authFinishActionCreator());\r\n      })\r\n      .catch(error => dispatch(authErrorActionCreator(error)))\r\n  }\r\n}\r\n\r\nexport const uploadUserImageActionCreator = (userData) => {\r\n  return dispatch => {\r\n    dispatch(authStartActionCreator());\r\n    if (!userData.image) {\r\n      return dispatch(updateUserDataActionCreator(userData));\r\n    }\r\n\r\n    storeUserImage(userData.image)\r\n      .then(response => {\r\n        const { name: image } = response.metadata;\r\n\r\n        dispatch(removeUserImage(userData.oldImage));\r\n        dispatch(updateUserDataActionCreator({ ...userData, image }));\r\n      })\r\n      .catch(error => dispatch(authErrorActionCreator(error)))\r\n  }\r\n}\r\n\r\n","import React, { useState, useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\n// import { cloneDeep } from 'lodash';\r\n\r\nimport { Modal, Form, Divider, Space, Button } from 'antd';\r\n\r\nimport FormPicture from '../UI/FormPicture/FormPicture';\r\nimport DataInputs from '../UI/DataInputs/DataInputs';\r\nimport { uploadUserImageActionCreator } from '../../store/authorization/actions';\r\nimport classes from './Profile.module.css';\r\n\r\nconst Profile = (props) => {\r\n  const { submitting } = props;\r\n  const [userImage, setUserImage] = useState(props.image);\r\n  const [fileWasChecked, setFileWasChecked] = useState(false);\r\n  const [userInputs, setUserInputs] = useState({\r\n    username: {\r\n      config: {\r\n        name: 'username',\r\n        label: 'Username',\r\n        placeholder: 'Come up with the username'\r\n      },\r\n      validationRules: {\r\n        type: 'string',\r\n        min: 4,\r\n        max: 10,\r\n      },\r\n      value: props.username,\r\n    },\r\n  })\r\n\r\n  useEffect(() => {\r\n    if (submitting === false) {\r\n      handleCancel();\r\n    }\r\n  }, [submitting])\r\n\r\n  const onChangeHandler = (inputName, event) => {\r\n    let newValue = event.target.value;\r\n    setUserInputs(prevState => ({\r\n      ...prevState,\r\n      [inputName]: {\r\n        ...prevState[inputName],\r\n        value: newValue,\r\n      }\r\n    }));\r\n  }\r\n\r\n  const handleOk = () => {\r\n    const newUsername = userInputs.username.value;\r\n    if (!fileWasChecked && newUsername === props.username) return;\r\n\r\n    const userData = {};\r\n\r\n    if (fileWasChecked) {\r\n      userData.image = userImage;\r\n      userData.oldImage = props.image;\r\n    }\r\n\r\n    if (newUsername !== props.username) {\r\n      userData.username = newUsername;\r\n    }\r\n\r\n    props.updateUserData(userData);\r\n  }\r\n\r\n  const handleCancel = () => {\r\n    setUserImage(props.image);\r\n    setFileWasChecked(false);\r\n\r\n    props.closeModal();\r\n  }\r\n\r\n  const chooseNewImage = (newImage) => {\r\n    setUserImage(newImage);\r\n    setFileWasChecked(true);\r\n  }\r\n\r\n  return (\r\n    <Modal\r\n      title='Profile'\r\n      visible={props.open}\r\n      confirmLoading={submitting}\r\n      footer={false}\r\n      onCancel={submitting ? null : handleCancel}\r\n    >\r\n      <div className={'modal-note'}>{'PLEASE FILL ALL FIELDS'}</div>\r\n      <Form name='nest-messages' onFinish={handleOk}>\r\n        <div className={classes.userInfo}>\r\n          <div>\r\n            <FormPicture picture={userImage} name='User Image' pictureSize={2} setPicture={chooseNewImage} />\r\n          </div>\r\n\r\n          <div className={classes.userInputs}>\r\n            <DataInputs stateInputs={userInputs} onChangeHandler={onChangeHandler} />\r\n          </div>\r\n        </div>\r\n        <Divider orientation='right'>\r\n          <Space>\r\n            <Button type='default' disabled={submitting} onClick={handleCancel}>Cancel</Button>\r\n            <Button type='primary' disabled={submitting} loading={submitting} htmlType={'submit'}>Ok</Button>\r\n          </Space>\r\n        </Divider>\r\n      </Form>\r\n    </Modal>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    username: state.auth.username,\r\n    image: state.auth.image,\r\n    submitting: state.auth.submitting,\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    updateUserData: (userData) => { dispatch(uploadUserImageActionCreator(userData)) }\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Profile);\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { NavLink } from 'react-router-dom';\r\n\r\nimport { Menu } from 'antd';\r\n\r\nimport ModalWrapper from '../../ModalWrapper/ModalWrapper';\r\nimport Profile from '../../../Profile/Profile';\r\nimport { logoutActionCreator } from '../../../../store/authorization/actions';\r\nimport { clearPlaylistActionCreator } from '../../../../store/songs/actions';\r\nimport classes from './Menu.module.css';\r\n\r\nconst MenuComponent = (props) => {\r\n  const logoutAndCleanup = () => {\r\n    props.logout();\r\n    props.clearPlaylists();\r\n  }\r\n\r\n  let authButton = ['sign in', 'sign up']\r\n    .map((item, index) => (\r\n      <Menu.Item key={index} disabled={props.disabled}>\r\n        <NavLink\r\n          to={item.to || item.split(' ').join('-')}\r\n          className={classes.navLink}\r\n          activeClassName={classes.navLinkActive}\r\n          exact\r\n        >\r\n          {item.name || item}\r\n        </NavLink>\r\n      </Menu.Item>\r\n    ));\r\n\r\n  if (props.email) {\r\n    authButton = (\r\n      <Menu.Item>\r\n        <div\r\n          className={classes.navLink}\r\n          onClick={props.disabled ? null : logoutAndCleanup}>\r\n          {'Logout'}\r\n        </div>;\r\n      </Menu.Item>\r\n    )\r\n  }\r\n\r\n  let profileButton = null;\r\n  if (props.email && props.isBand.toString() == 'false') {\r\n    profileButton = (\r\n      <Menu.Item>\r\n        <ModalWrapper\r\n          className={classes.navLink}\r\n          modal={Profile}\r\n          label='My Profile'\r\n          disabled={props.disabled} />\r\n      </Menu.Item>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <Menu className={classes.menu}>\r\n      {\r\n        props.items.map((item, index) => (\r\n          <Menu.Item key={index} disabled={props.disabled}>\r\n            <NavLink\r\n              to={item.to || item.split(' ').join('-')}\r\n              className={classes.navLink}\r\n              activeClassName={classes.navLinkActive}\r\n              exact\r\n            >\r\n              {item.name || item}\r\n            </NavLink>\r\n          </Menu.Item>\r\n        ))\r\n      }\r\n      {profileButton}\r\n\r\n      <Menu.Divider />\r\n      {authButton}\r\n    </Menu>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    email: state.auth.email,\r\n    isBand: state.auth.isBand,\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    logout: () => { dispatch(logoutActionCreator()) },\r\n    clearPlaylists: () => { dispatch(clearPlaylistActionCreator()) },\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(MenuComponent);\r\n","import React, { useState, useEffect } from 'react';\r\n\r\nimport { Dropdown, Button } from 'antd';\r\n\r\nimport Menu from './Menu/Menu';\r\nimport classes from './DropdownNav.module.css';\r\n\r\nconst DropdownNav = (props) => {\r\n  const [menuIsOpen, setMenuIsOpen] = useState(false);\r\n  const [timerId, setTimerid] = useState(null);\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      clearTimeout(timerId);\r\n    }\r\n  }, [timerId])\r\n\r\n  const openMenu = () => {\r\n    setMenuIsOpen(true);\r\n  }\r\n\r\n  const closeMenu = () => {\r\n    const id = setTimeout(() => {\r\n      setMenuIsOpen(false);\r\n    }, 100)\r\n\r\n    setTimerid(id);\r\n  }\r\n\r\n  let buttonClass = classes.mobileMenu;\r\n  if (props.visible === 'desktop') buttonClass = classes.desktopMenu;\r\n\r\n  return (\r\n    <Dropdown\r\n      overlay={() => <Menu items={props.items} disabled={props.disabled} />}\r\n      placement='bottomRight'\r\n      visible={menuIsOpen}\r\n    >\r\n      <Button\r\n        className={buttonClass}\r\n        icon={props.icon}\r\n        type='link'\r\n        onClick={openMenu}\r\n        onBlur={closeMenu} />\r\n    </Dropdown>\r\n  )\r\n}\r\n\r\nexport default DropdownNav;\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { Layout } from 'antd';\r\nimport { MenuFoldOutlined, UserOutlined } from '@ant-design/icons';\r\n\r\nimport SearchBar from '../../SearchBar/SearchBar';\r\nimport Logo from '../../../assets/images/logo.png';\r\nimport DesktopMenu from '../../UI/DesktopNavMenu/DesktopNavMenu';\r\nimport DropdownNav from '../../UI/DropdownNav/DropdownNav';\r\n\r\nconst { Header } = Layout;\r\n\r\nconst HeaderComponent = (props) => {\r\n  const disableLinks = props.loading || props.creating;\r\n\r\n  const linkToMyBand = {\r\n    name: 'my band',\r\n    to: {\r\n      pathname: '/band',\r\n      state: {\r\n        localId: props.localId,\r\n      }\r\n    }\r\n  }\r\n\r\n  const profileLinks = [];\r\n  if (props.isBand.toString() === 'true') profileLinks.push(linkToMyBand)\r\n\r\n  let authSection = (\r\n    <DesktopMenu\r\n      items={['sign in', 'sign up']}\r\n      disabled={disableLinks}\r\n      position={'right'} />\r\n  )\r\n  if (props.email) {\r\n    authSection = (\r\n      <DropdownNav\r\n        items={profileLinks}\r\n        disabled={disableLinks}\r\n        visible='desktop'\r\n        icon={<UserOutlined />} />\r\n    )\r\n  }\r\n\r\n  const linkToMyMusic = {\r\n    name: 'music',\r\n    to: '/',\r\n  }\r\n\r\n  const actionLinks = [linkToMyMusic];\r\n  if (props.email) actionLinks.push('playlists');\r\n  if (props.isAdmin) actionLinks.push('admin');\r\n\r\n  return (\r\n    <Header className='header'>\r\n      <div className='logo'>\r\n        <img src={Logo} alt={'logo'} />\r\n      </div>\r\n\r\n      <DesktopMenu items={actionLinks} disabled={disableLinks} position={'left'} />\r\n      <DropdownNav items={[...profileLinks, ...actionLinks]} disabled={disableLinks} visible='mobile' icon={<MenuFoldOutlined />} />\r\n\r\n      {authSection}\r\n      <SearchBar />\r\n    </Header>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    email: state.auth.email,\r\n    isAdmin: state.auth.isAdmin, \r\n    isBand: state.auth.isBand, \r\n    localId: state.auth.localId,\r\n    loading: state.songs.loading,\r\n    creating: state.songs.creating,\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(HeaderComponent);\r\n","import React from 'react';\r\n\r\nimport { Button } from 'antd';\r\n\r\nimport classes from './SubmitButton.module.css';\r\n\r\nconst SubmitButton = ({ loading, label }) => {\r\n  return (\r\n    <Button\r\n      type='primary'\r\n      htmlType='submit'\r\n      className={classes.submitButton}\r\n      loading={loading}\r\n      disabled={loading}\r\n    >\r\n      {label}\r\n    </Button>\r\n  )\r\n}\r\n\r\nexport default SubmitButton;\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport { Row, Col } from 'antd';\r\n\r\nimport classes from './BottomNote.module.css';\r\n\r\nconst BottomNote = ({ to, note }) => {\r\n  return (\r\n    <Row justify='end'>\r\n      <Col span={24}>\r\n        <Link to={to} className={classes.redirectLink}>\r\n          {note}\r\n        </Link>\r\n      </Col>\r\n    </Row>\r\n  )\r\n}\r\n\r\nexport default BottomNote;\r\n","import React from 'react';\r\n\r\nimport { Alert, Row, Col } from 'antd';\r\n\r\nconst AlertMessage = ({ errorMessage }) => {\r\n  const GridAlert = (() =>\r\n    <Row justify='center' align='middle'>\r\n      <Col xs={24} sm={{ span: 12 }} md={{ span: 8 }} lg={{ span: 8 }} >\r\n        <Alert message={errorMessage} type='error' showIcon />\r\n      </Col>\r\n    </Row>\r\n  )\r\n  return (\r\n    errorMessage !== null\r\n      ? <GridAlert />\r\n      : null\r\n  )\r\n}\r\n\r\nexport default AlertMessage;\r\n","import React from 'react';\r\n\r\nimport { Typography } from 'antd';\r\n\r\nimport Logo from '../../../../assets/images/logoSimple.png';\r\nimport classes from './Head.module.css';\r\n\r\nconst Head = ({ title }) => {\r\n  return (\r\n    <div className={classes.head}>\r\n      <img src={Logo} className={classes.logo} alt={'logo'} />\r\n      <Typography.Title className={classes.label} level={3}>{title}</Typography.Title>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Head;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Redirect } from 'react-router-dom';\r\n\r\nimport { Form, Checkbox } from 'antd';\r\n\r\nimport { signUpActionCreator } from '../../../store/authorization/actions';\r\nimport '../Authorization.css';\r\nimport SubmitButton from '../AuthUI/SubmitButton/SubmitButton';\r\nimport BottomNote from '../AuthUI/BottomNote/BottomNote';\r\nimport Alert from '../AuthUI/Alert/Alert';\r\nimport Head from '../AuthUI/Head/Head';\r\nimport DataInputs from '../../UI/DataInputs/DataInputs';\r\n\r\nconst SignUp = (props) => {\r\n  const [isBand, setIsBand] = useState(false);\r\n\r\n  const [stateInputs, setStateInputs] = useState({\r\n    email: {\r\n      config: {\r\n        name: 'email',\r\n        label: 'Email',\r\n        placeholder: 'Type your email here',\r\n      },\r\n      validationRules: {\r\n        required: true,\r\n        type: 'email',\r\n      },\r\n      value: '',\r\n    },\r\n    password: {\r\n      config: {\r\n        type: 'password',\r\n        name: 'password',\r\n        label: 'Password',\r\n        placeholder: 'Type password here',\r\n      },\r\n      validationRules: {\r\n        required: true,\r\n        type: 'string',\r\n        min: 6,\r\n      },\r\n      value: '',\r\n    },\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (isBand) {\r\n      const bandData = {\r\n        bandName: {\r\n          config: {\r\n            name: 'name',\r\n            label: 'Band name',\r\n            placeholder: 'Come up with a group name',\r\n          },\r\n          validationRules: {\r\n            required: true,\r\n            type: 'string',\r\n            min: 2,\r\n          },\r\n          value: '',\r\n        },\r\n        genres: {\r\n          config: {\r\n            type: 'text',\r\n            name: 'genres',\r\n            label: 'Genres',\r\n            placeholder: 'Please select genres',\r\n          },\r\n          validationRules: {\r\n            required: true,\r\n          },\r\n          value: '',\r\n        },\r\n      }\r\n\r\n      setStateInputs({ ...bandData, ...stateInputs });\r\n    } else if (Object.keys(stateInputs).length > 2) {\r\n      let stateInputsClone = { ...stateInputs };\r\n      delete stateInputsClone.bandName;\r\n      delete stateInputsClone.genres;\r\n      setStateInputs({ ...stateInputsClone });\r\n    }\r\n  }, [isBand])\r\n\r\n  const signUpHandler = () => {\r\n    const newUser = {}\r\n    for (let key in stateInputs) {\r\n      newUser[key] = stateInputs[key].value;\r\n    }\r\n\r\n    props.signUp(newUser);\r\n  }\r\n\r\n  const onChangeHandler = (inputName, event) => {\r\n    const newValue = (inputName === 'genres') ? event : event.target.value;\r\n    setStateInputs(prevState => ({\r\n      ...prevState,\r\n      [inputName]: {\r\n        ...prevState[inputName],\r\n        value: newValue,\r\n      }\r\n    }));\r\n  }\r\n\r\n  const registerBandToggle = () => {\r\n    setIsBand(prevState => !prevState);\r\n  }\r\n\r\n  const validateMessages = {\r\n    types: {\r\n      email: '${label} is not valid!',\r\n    },\r\n    string: {\r\n      min: '${label} must be at least ${min} characters',\r\n    },\r\n  };\r\n\r\n  if (props.email) return (\r\n    <Redirect to={'/'} />\r\n  )\r\n\r\n  const layout = {\r\n    labelCol: {\r\n      sm: { offset: 2, span: 4 },\r\n      md: { offset: 4, span: 4 },\r\n      lg: { offset: 6, span: 2 },\r\n    },\r\n    wrapperCol: {\r\n      sm: { span: 12 },\r\n      md: { span: 8 },\r\n      lg: { span: 8 },\r\n    },\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Head title='Sign Up' />\r\n      <Form {...layout} name='nest-messages' onFinish={signUpHandler} validateMessages={validateMessages}>\r\n\r\n        <DataInputs stateInputs={stateInputs} onChangeHandler={onChangeHandler} />\r\n\r\n        <Checkbox className={'band-checkbox'} onChange={registerBandToggle}>I want to sign up as a band</Checkbox>\r\n\r\n        <Alert errorMessage={props.errorMessage} />\r\n\r\n        <SubmitButton loading={props.submitting} label={'Sign Up'} />\r\n        <BottomNote to='/sign-in' note='Already have an account? Sign In' />\r\n      </Form>\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    errorMessage: state.auth.errorMessage,\r\n    email: state.auth.email,\r\n    submitting: state.auth.submitting\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    signUp: (newUser) => dispatch(signUpActionCreator(newUser)),\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SignUp);\r\n","import React, { useState } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Redirect } from 'react-router-dom';\r\n\r\nimport { Form, Checkbox } from 'antd';\r\n\r\nimport { signInActionCreator } from '../../../store/authorization/actions';\r\nimport SubmitButton from '../AuthUI/SubmitButton/SubmitButton';\r\nimport BottomNote from '../AuthUI/BottomNote/BottomNote';\r\nimport Alert from '../AuthUI/Alert/Alert';\r\nimport Head from '../AuthUI/Head/Head';\r\nimport DataInputs from '../../UI/DataInputs/DataInputs';\r\nimport '../Authorization.css';\r\n\r\nconst SignIn = (props) => {\r\n  const [rememberMe, setRememberMe] = useState(true);\r\n  const [stateInputs, setStateInputs] = useState({\r\n    email: {\r\n      config: {\r\n        name: 'email',\r\n        label: 'Email',\r\n        placeholder: 'Type your email here',\r\n      },\r\n      validationRules: {\r\n        required: true,\r\n        type: 'email',\r\n      },\r\n      value: '',\r\n    },\r\n    password: {\r\n      config: {\r\n        type: 'password',\r\n        name: 'password',\r\n        label: 'Password',\r\n        placeholder: 'Type your password here',\r\n      },\r\n      validationRules: {\r\n        required: true,\r\n        type: 'string',\r\n        min: 6,\r\n      },\r\n      value: '',\r\n    },\r\n  });\r\n\r\n  const signInHandler = () => {\r\n    const userData = {}\r\n    for (let key in stateInputs) {\r\n      userData[key] = stateInputs[key].value;\r\n    }\r\n\r\n    props.signIn(userData, rememberMe);\r\n  }\r\n\r\n  const onChangeHandler = (inputName, event) => {\r\n    const newValue = event.target.value;\r\n\r\n    setStateInputs(prevState => ({\r\n      ...prevState,\r\n      [inputName]: {\r\n        ...prevState[inputName],\r\n        value: newValue,\r\n      }\r\n    }));\r\n  }\r\n\r\n  const rememberMeToggle = () => {\r\n    setRememberMe(prevState => !prevState);\r\n  }\r\n\r\n  const validateMessages = {\r\n    types: {\r\n      email: '${label} is not valid!',\r\n    },\r\n    string: {\r\n      min: '${label} must be at least ${min} characters',\r\n    },\r\n  };\r\n\r\n  if (props.email) return (\r\n    <Redirect to={'/'} />\r\n  )\r\n\r\n  const layout = {\r\n    labelCol: {\r\n      sm: { offset: 2, span: 4 },\r\n      md: { offset: 4, span: 4 },\r\n      lg: { offset: 6, span: 2 },\r\n    },\r\n    wrapperCol: {\r\n      sm: { span: 12 },\r\n      md: { span: 8 },\r\n      lg: { span: 8 },\r\n    },\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Head title='Sign In' />\r\n      <Form {...layout} name='nest-messages' onFinish={signInHandler} validateMessages={validateMessages}>\r\n        \r\n        <DataInputs stateInputs={stateInputs} onChangeHandler={onChangeHandler} />\r\n\r\n        <Checkbox className={'band-checkbox'} defaultChecked onChange={rememberMeToggle}>Remember me</Checkbox>\r\n\r\n        <Alert errorMessage={props.errorMessage} />\r\n\r\n        <SubmitButton loading={props.submitting} label={'Sign In'} />\r\n\r\n        <BottomNote to='/sign-up' note={'Don\\'t have an account? Sign Up'} />\r\n      </Form>\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    errorMessage: state.auth.errorMessage,\r\n    email: state.auth.email,\r\n    submitting: state.auth.submitting\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    signIn: (userData, rememberMe) => dispatch(signInActionCreator(userData, rememberMe)),\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SignIn);\r\n","import React, { useState } from 'react';\r\n\r\nimport { Typography, Popconfirm, message } from 'antd';\r\n\r\nimport './EditableInput.css';\r\n\r\nconst EditableInput = (props) => {\r\n  const { Paragraph } = Typography;\r\n\r\n  const [showConfirm, setShowConfirm] = useState(false);\r\n  const [newValue, setNewValue] = useState(null);\r\n\r\n  const confirmChange = () => {\r\n    props.udateBandData({ [props.editKey]: newValue });\r\n\r\n    setShowConfirm(false);\r\n    setNewValue(null);\r\n  }\r\n\r\n  const cancelChange = () => {\r\n    setShowConfirm(false);\r\n    setNewValue(null);\r\n  }\r\n\r\n  const onChangeHandler = (value) => {\r\n    if (value !== props.value && value.length >= props.minLength && value.length <= props.maxLength) {\r\n      setNewValue(value);\r\n      setShowConfirm(true);\r\n    } else if (value.length < props.minLength) {\r\n      message.warning(`Minimum string length - ${props.minLength} characters`);\r\n    } else if (value.length > props.maxLength) {\r\n      message.warning(`Maximum string length - ${props.maxLength} characters`);\r\n    }\r\n  }\r\n\r\n  let input = <Paragraph className={'editable-paragraph'} style={props.style}>{props.value}</Paragraph>\r\n  if (props.editable) {\r\n    input = (\r\n      <Popconfirm\r\n        title={`${props.confirmMessage} '${newValue}'?`}\r\n        visible={showConfirm}\r\n        onConfirm={confirmChange}\r\n        onCancel={cancelChange}\r\n        okText='Yes'\r\n        cancelText='No'\r\n      >\r\n        <Paragraph className={'editable-paragraph'} style={props.style} editable={{ onChange: onChangeHandler }} >{props.value}</Paragraph>\r\n      </Popconfirm>\r\n    )\r\n  }\r\n\r\n  return input;\r\n}\r\n\r\nexport default EditableInput;\r\n","import * as actionTypes from '../actionTypes';\r\nimport axios from 'axios'\r\nimport { storeBandImage, removeBandImage } from './utility';\r\n\r\nexport const setBandDataActionCreator = (bandData) => {\r\n  return {\r\n    type: actionTypes.SET_BAND_DATA,\r\n    bandData,\r\n  }\r\n}\r\n\r\nexport const finishFetchingDataActionCreator = () => {\r\n  return {\r\n    type: actionTypes.FINISH_BAND_LOADING,\r\n  }\r\n}\r\n\r\nexport const startUpdatingDataActionCreator = () => {\r\n  return {\r\n    type: actionTypes.START_BAND_UPDATING,\r\n  }\r\n}\r\n\r\nexport const finishUpdatingDataActionCreator = () => {\r\n  return {\r\n    type: actionTypes.FINISH_BAND_UPDATING,\r\n  }\r\n}\r\n\r\nexport const bandErrorActionCreator = (error) => {\r\n  return {\r\n    type: actionTypes.BAND_ERROR,\r\n    error,\r\n  }\r\n}\r\n\r\nexport const clearBandDataActionCreator = () => {\r\n  return {\r\n    type: actionTypes.CLEAR_BAND_DATA,\r\n  }\r\n}\r\n\r\n//middleware\r\n\r\nexport const fetchBandDataActionCreator = (localId) => {\r\n  return dispatch => {\r\n    let queryParams = `?orderBy=\"localId\"&equalTo=\"${localId}\"&limitToFirst=1`;\r\n    axios.get(`${process.env.REACT_APP_FIREBASE_DATABASE}/bands.json/${queryParams}`)\r\n      .then(response => {\r\n        if (response.data) {\r\n          const bandKey = Object.keys(response.data)[0];\r\n\r\n          dispatch(setBandDataActionCreator({ ...response.data[bandKey], key: bandKey }));\r\n          dispatch(finishFetchingDataActionCreator());\r\n        }\r\n        else throw Error('Band does not exist!');\r\n      })\r\n      .catch(error => dispatch(bandErrorActionCreator(error)));\r\n  }\r\n}\r\n\r\nexport const updateBandDataActionCreator = (data) => {\r\n  return (dispatch, getState) => {\r\n    dispatch(startUpdatingDataActionCreator());\r\n\r\n    const token = getState().auth.idToken;\r\n    const firebaseKey = getState().band.key;\r\n\r\n    let queryParams = `?auth=${token}`;\r\n    axios.patch(`${process.env.REACT_APP_FIREBASE_DATABASE}/bands/${firebaseKey}/.json/${queryParams}`, data)\r\n      .then(response => {\r\n        dispatch(setBandDataActionCreator(response.data));\r\n        dispatch(finishUpdatingDataActionCreator());\r\n      })\r\n      .catch(error => {\r\n        dispatch(bandErrorActionCreator(error))\r\n        dispatch(finishUpdatingDataActionCreator());\r\n      });\r\n  }\r\n}\r\n\r\nexport const uploadImageActionCreator = (oldFileName, file) => {\r\n  return dispatch => {\r\n    dispatch(startUpdatingDataActionCreator());\r\n\r\n    storeBandImage(file)\r\n      .then(response => {\r\n        const { name: image } = response.metadata;\r\n\r\n        dispatch(removeBandImage(oldFileName))\r\n        dispatch(updateBandDataActionCreator({ image }))\r\n      })\r\n      .catch(error => {\r\n        dispatch(bandErrorActionCreator(error))\r\n        dispatch(finishUpdatingDataActionCreator());\r\n      })\r\n  }\r\n}\r\n\r\n","import firebase from '../../firebase';\r\n\r\nexport const storeBandImage = (file) => {\r\n  const fileName = new Date().getTime() + file.name;\r\n  return firebase.storage().ref('band-images/').child(fileName).put(file);\r\n}\r\n\r\nexport const removeBandImage = (imageName) => {\r\n  return () => {\r\n    if (imageName === 'no-image.jpg') return;\r\n\r\n    firebase.storage().ref(`band-images/${imageName}`).delete()\r\n      .catch(error => console.log(error.message));\r\n  }\r\n}\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport EditableInput from '../../UI/EditableInput/EditableInput';\r\nimport { updateBandDataActionCreator } from '../../../store/band/actions';\r\n\r\nconst BandName = (props) => {\r\n  const style = {\r\n    fontSize: '20px',\r\n    fontWeight: '500',\r\n    margin: 'auto'\r\n  }\r\n\r\n  return (\r\n    <EditableInput\r\n      editKey='bandName'\r\n      value={props.bandName}\r\n      udateBandData={props.udateBandData}\r\n      minLength={2}\r\n      maxLength={15}\r\n      style={style}\r\n      editable={props.bandId === props.userId}\r\n      confirmMessage={'Change band name to'} />\r\n  )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    userId: state.auth.localId,\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    udateBandData: (data) => { dispatch(updateBandDataActionCreator(data)) },\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(BandName);\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { updateBandDataActionCreator } from '../../../store/band/actions';\r\nimport EditableInput from '../../UI/EditableInput/EditableInput';\r\n\r\nconst BandDescription = (props) => {\r\n  const style = {\r\n    maxHeight: '100px',\r\n    overflow: 'auto',\r\n    fontSize: '13px',\r\n    color: 'dimgrey',\r\n    textAlign: 'justify',\r\n    maxWidth: 'fit-content',\r\n  }\r\n\r\n  return (\r\n    <EditableInput\r\n      editKey='description'\r\n      value={props.description}\r\n      udateBandData={props.udateBandData}\r\n      minLength={10}\r\n      maxLength={150}\r\n      style={style}\r\n      editable={props.bandId === props.userId}\r\n      confirmMessage={'Change description to'} />\r\n  )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    userId: state.auth.localId,\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    udateBandData: (data) => { dispatch(updateBandDataActionCreator(data)) },\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(BandDescription);\r\n","import React from 'react';\r\n\r\nimport { Tag } from 'antd';\r\n\r\nimport classes from './BandGenres.module.css';\r\n\r\nconst BandGenres = (props) => {\r\n  return (\r\n    <div className={classes.genresContainer}>\r\n      {\r\n        props.genres.map((genre, index) => (\r\n          <Tag key={index} className={classes.genre} color='#ff7875'>{genre}</Tag>\r\n        ))\r\n      }\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default BandGenres;\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { Upload, Button, Tooltip } from 'antd';\r\nimport { UploadOutlined } from '@ant-design/icons';\r\n\r\nimport { uploadImageActionCreator } from '../../../store/band/actions';\r\nimport { validateImage } from '../../../utility/file-validation';\r\nimport { createSrc } from '../../../utility/user';\r\nimport classes from './BandImage.module.css';\r\n\r\nconst BandImage = (props) => {\r\n  let uploadButton = (\r\n\r\n    <>\r\n      <Upload\r\n        className={classes.uploadButton}\r\n        showUploadList={false}\r\n        action={props.uploadImage.bind(this, props.image)}\r\n        beforeUpload={validateImage.bind(this, 5)}\r\n      >\r\n        <div className={classes.backgroundMask}></div>\r\n        <Tooltip title='Upload new image'>\r\n          <Button type='dashed' shape='circle' ghost icon={<UploadOutlined />} />\r\n        </Tooltip>\r\n      </Upload>\r\n    </>\r\n  )\r\n  if (props.bandId !== props.userId) uploadButton = null;\r\n\r\n  return (\r\n    <>\r\n      <img\r\n        alt='band poster'\r\n        src={createSrc(props.image, 'band-images')}\r\n      />\r\n      {uploadButton}\r\n    </>)\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    userId: state.auth.localId,\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    uploadImage: (oldImageName, newImage) => { dispatch(uploadImageActionCreator(oldImageName, newImage)) },\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(BandImage);\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { Tooltip, Skeleton } from 'antd';\r\nimport { PlaySquareOutlined, CustomerServiceOutlined } from '@ant-design/icons';\r\n\r\nimport { HeartIcon } from '../../../utility/icons';\r\nimport classes from './BandStatistic.module.css';\r\n\r\nconst BandStatistic = (props) => {\r\n  if (!props.songs) return <Skeleton title={false} paragraph={{ rows: 1 }} />\r\n\r\n  const likesCount = props.songs.reduce((count, song) => count + song.likesCount, 0);\r\n  const listenedTimes = props.songs.reduce((count, song) => count + song.listened_times, 0);\r\n  const songsCount = props.songs.length;\r\n\r\n  return (\r\n    <div className={classes.statistic}>\r\n      <div>\r\n        <Tooltip placement='bottom' title={'Tracks count'}>\r\n          <PlaySquareOutlined /> {songsCount}\r\n        </Tooltip>\r\n      </div>\r\n      <div>\r\n        <CustomerServiceOutlined /> {listenedTimes}\r\n      </div>\r\n      <div>\r\n        <HeartIcon /> {likesCount}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    songs: state.songs.songs,\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(BandStatistic);\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { Card, Spin } from 'antd';\r\n\r\nimport BandName from './BandName/BandName';\r\nimport BandDescription from './BandDescription/BandDescription';\r\nimport BandGenres from './BandGenres/BandGenres';\r\nimport BandImage from './BandImage/BandImage';\r\nimport BandStatistic from './BandStatistic/BandStatistic';\r\nimport classes from './BandInfo.module.css';\r\n\r\nconst BandInfo = (props) => {\r\n  return (\r\n    <Spin spinning={props.updating}>\r\n      <Card\r\n        className={classes.card}\r\n        loading={props.loading}\r\n        cover={<BandImage image={props.image} bandId={props.bandId} />}\r\n        bodyStyle={{ minWidth: '50%' }}\r\n      >\r\n\r\n        <BandName bandName={props.bandName} bandId={props.bandId} />\r\n        <BandGenres genres={props.genres} />\r\n        <BandDescription description={props.description} bandId={props.bandId} />\r\n        <BandStatistic />\r\n      </Card>\r\n    </Spin>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    bandName: state.band.bandName,\r\n    bandId: state.band.localId,\r\n    description: state.band.description,\r\n    genres: state.band.genres,\r\n    image: state.band.image,\r\n    loading: state.band.loading,\r\n    updating: state.band.updating,\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(BandInfo);\r\n","import React, { useState } from 'react';\r\nimport { trim } from 'lodash';\r\n\r\nimport { Modal, Form, Button, Space, Divider } from 'antd';\r\n\r\nimport DataInputs from '../../../UI/DataInputs/DataInputs';\r\nimport FormPicture from '../../../UI/FormPicture/FormPicture';\r\nimport classes from './SongInfo.module.css';\r\n\r\nconst SongInfo = (props) => {\r\n  const [songPicture, setSongPicture] = useState(null);\r\n  const [songInputs, setSongInputs] = useState({\r\n    name: {\r\n      config: {\r\n        name: 'name',\r\n        label: 'Name',\r\n        placeholder: 'Come up with the track name'\r\n      },\r\n      validationRules: {\r\n        required: true,\r\n        type: 'string',\r\n        min: 2,\r\n        max: 25,\r\n      },\r\n      value: '',\r\n    },\r\n    tags: {\r\n      config: {\r\n        type: 'text',\r\n        name: 'tags',\r\n        label: 'Tags',\r\n        placeholder: 'Spread tags with <#> <,> <.>'\r\n      },\r\n      validationRules: {\r\n        required: true,\r\n      },\r\n      value: '',\r\n    }\r\n  })\r\n\r\n  const onChangeHandler = (inputName, event) => {\r\n    let newValue = '';\r\n    if (inputName === 'tags') {\r\n      newValue = event.map(item => trim(item));\r\n    } else {\r\n      newValue = event.target.value;\r\n    }\r\n\r\n    setSongInputs(prevState => ({\r\n      ...prevState,\r\n      [inputName]: {\r\n        ...prevState[inputName],\r\n        value: newValue,\r\n      }\r\n    }));\r\n  }\r\n\r\n  const createSongHandler = () => {\r\n    const songInfo = {}\r\n    for (let key in songInputs) {\r\n      songInfo[key] = songInputs[key].value;\r\n    }\r\n\r\n    props.createSong(songPicture, songInfo);\r\n    props.closeSongInfo();\r\n  }\r\n\r\n  return (\r\n    <Modal\r\n      title='Create new song'\r\n      footer={null}\r\n      visible\r\n      width={620}\r\n      onCancel={props.closeSongInfo}\r\n    >\r\n      <div className={'modal-note'}>{'PLEASE FILL ALL FIELDS AND SELECT IMAGE FOR SONG'}</div>\r\n      <Form name='nest-messages' onFinish={createSongHandler}>\r\n        <div className={classes.songInfo}>\r\n          <div>\r\n            <FormPicture\r\n              picture={songPicture}\r\n              name='Song picture'\r\n              pictureSize={5}\r\n              rules={[{ required: true, }]}\r\n              setPicture={setSongPicture} />\r\n          </div>\r\n\r\n          <div className={classes.songInputs}>\r\n            <DataInputs stateInputs={songInputs} onChangeHandler={onChangeHandler} />\r\n          </div>\r\n        </div>\r\n\r\n        <Divider orientation='right'>\r\n          <Space>\r\n            <Button type='default' onClick={props.closeSongInfo}>Cancel</Button>\r\n            <Button type='primary' htmlType={'submit'}>Ok</Button>\r\n          </Space>\r\n        </Divider>\r\n      </Form>\r\n    </Modal>\r\n  )\r\n}\r\n\r\nexport default SongInfo;\r\n","import React, { useState } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { Upload, Progress } from 'antd';\r\nimport { LoadingOutlined, PlusOutlined } from '@ant-design/icons';\r\n\r\nimport { uploadSongActionCreator } from '../../../store/songs/actions';\r\nimport { validateSong } from '../../../utility/file-validation';\r\nimport classes from './UploadSong.module.css';\r\nimport SongInfo from './SongInfo/SongInfo';\r\n\r\nconst UploadSong = (props) => {\r\n  const [song, setSong] = useState(null);\r\n  const [openSongModal, setOpenSongModal] = useState(false);\r\n\r\n  const openSongInfoModal = (file) => {\r\n    setSong(file);\r\n    setOpenSongModal(true);\r\n  }\r\n\r\n  const closeSongInfoModal = () => {\r\n    setOpenSongModal(false);\r\n  }\r\n\r\n  const createSong = (songPicture, songInfo) => {\r\n    props.uploadSong(song, songPicture, songInfo);\r\n  }\r\n\r\n  const songInfo = (\r\n    <SongInfo\r\n      closeSongInfo={closeSongInfoModal}\r\n      createSong={createSong} />\r\n  )\r\n\r\n  return (\r\n    <>\r\n      {openSongModal ? songInfo : null}\r\n\r\n      <Upload\r\n        listType='picture-card'\r\n        className={classes.uploadArea}\r\n        showUploadList={false}\r\n        action={openSongInfoModal}\r\n        beforeUpload={validateSong}\r\n        disabled={props.creating}\r\n      >\r\n        <div className={classes.uploadLabel}>\r\n          <div>\r\n            {props.creating ? <LoadingOutlined /> : <PlusOutlined />}\r\n          </div>\r\n          <div className='ant-upload-text'>Upload new song</div>\r\n        </div>\r\n      </Upload >\r\n\r\n      {props.creating\r\n        ? <Progress\r\n          strokeLinecap='square'\r\n          strokeColor='#ff7875'\r\n          percent={props.percentLoaded}\r\n          status={props.error ? 'exception' : 'active'} />\r\n        : null}\r\n    </>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    creating: state.songs.creating,\r\n    error: state.songs.error,\r\n    percentLoaded: state.songs.percents,\r\n  }\r\n}\r\n\r\nconst mapDispathToProps = (dispatch) => {\r\n  return {\r\n    uploadSong: (song, songPicture, songInfo) => { dispatch(uploadSongActionCreator(song, songPicture, songInfo)) }\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispathToProps)(UploadSong);\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport UploadSong from './UploadSong/UploadSong';\r\n\r\nconst CreateSong = (props) => {\r\n  if (props.bandId === props.userId) {\r\n    return <UploadSong />\r\n  }\r\n\r\n  return null;\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    bandId: state.band.localId,\r\n    userId: state.auth.localId,\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(CreateSong);\r\n","import React from 'react';\r\n\r\nimport { PauseOutlined, LoadingOutlined, CaretRightOutlined } from '@ant-design/icons';\r\n\r\nimport { createSrc } from '../../../utility/user';\r\nimport classes from './SongPicture.module.css';\r\n\r\nconst SongPicture = (props) => {\r\n  const { image, playingNow, canPlay } = props;\r\n  \r\n  const imageSrc = createSrc(image, 'pictures-of-songs');\r\n\r\n  const songStateIcon = (\r\n    playingNow\r\n      ? canPlay\r\n        ? <PauseOutlined />     //if current song is playing\r\n        : <LoadingOutlined />   //if current song is loading\r\n      : <CaretRightOutlined />  //if current song on pause\r\n  )\r\n\r\n  return (\r\n    <div className={classes.songHeat}>\r\n      <div className={classes.mask} onClick={props.onSongChoosed}>{songStateIcon}</div>\r\n      <div>\r\n        <img className={classes.songPicture} src={imageSrc} alt={'current song'} />\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default SongPicture;\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport classes from './SongData.module.css';\r\n\r\nconst SongData = ({ song }) => {\r\n  const linkToBand = (\r\n    <Link to={{\r\n      pathname: '/band',\r\n      state: {\r\n        localId: song.localId,\r\n      }\r\n    }}>{song.bandName}</Link>\r\n  )\r\n\r\n  const linkToCollection = (tag) => (\r\n    <Link\r\n      key={tag}\r\n      className={classes.tag}\r\n      to={{\r\n        pathname: '/collection',\r\n        state: { tag, }\r\n      }}>{`#${tag} `}</Link>\r\n  )\r\n\r\n  return (\r\n    <div className={classes.container}>\r\n      <div className={classes.songName}>{song.name}</div>\r\n      <div className={classes.songBand}>{linkToBand}</div>\r\n\r\n      <div>\r\n        {\r\n          song.tags.map(tag => linkToCollection(tag))\r\n        }\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default SongData;\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { Spin } from 'antd';\r\n\r\nimport SongPicture from './SongPicture/SongPicture';\r\nimport SongData from './SongData/SongData';\r\nimport { startPlayMusicActionCreator } from '../../store/songs/actions';\r\nimport classes from './CurrentSong.module.css';\r\n\r\nconst CurrentSong = (props) => {\r\n  const { currentSong } = props;\r\n\r\n  if (!currentSong) return <Spin />;\r\n\r\n  return (\r\n    <div className={classes.container}>\r\n      <SongPicture\r\n        image={currentSong.imageName}\r\n        playingNow={props.playNow}\r\n        canPlay={props.canPlay}\r\n        onSongChoosed={props.startPlayMusic.bind(this, currentSong.fileName)} />\r\n      <SongData song={currentSong} />\r\n    </div>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    currentSong: state.songs.playSong,\r\n    playNow: state.songs.playNow,\r\n    canPlay: state.songs.selectedSongCanPlay,\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    startPlayMusic: (fileName) => { dispatch(startPlayMusicActionCreator(fileName)) },\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(CurrentSong);\r\n","import React from 'react';\r\n\r\nimport { Comment, Avatar, Input } from 'antd';\r\nimport { SendOutlined } from '@ant-design/icons';\r\n\r\nimport classes from './AddComment.module.css';\r\n\r\nconst AddComment = (props) => {\r\n  const { Search } = Input;\r\n\r\n  if (!props.localId) return null;\r\n\r\n  return (\r\n    <Comment\r\n      avatar={\r\n        <Avatar\r\n          alt='avka'\r\n          src={props.userData.imageSrc}\r\n        />\r\n      }\r\n      content={\r\n        <div>\r\n          <Search\r\n            className={classes.searchInput}\r\n            value={props.newComment}\r\n            loading={props.submitting}\r\n            placeholder='Type your message...'\r\n            enterButton={<SendOutlined />}\r\n            disabled={props.disabled}\r\n            onChange={props.handleChange}\r\n            onSearch={props.handleSubmit} />\r\n        </div >\r\n      }\r\n    />\r\n  )\r\n}\r\n\r\nexport default AddComment;\r\n","import React from 'react';\r\n\r\nimport { Spin } from 'antd';\r\n\r\nimport { Comment, List } from 'antd';\r\n\r\nconst CommentsList = ({ comments, loading }) => {\r\n  if (loading) return <Spin size='small' />\r\n\r\n  const Comments = ({ comments }) => (\r\n    <List\r\n      dataSource={comments}\r\n      header={`${comments.length} ${comments.length > 1 ? 'comments' : 'comment'}`}\r\n      itemLayout='horizontal'\r\n      renderItem={props => <Comment {...props} />}\r\n    />\r\n  );\r\n\r\n  return comments.length > 0 && <Comments comments={comments} />\r\n}\r\n\r\nexport default React.memo(CommentsList);\r\n","import axios from 'axios';\r\nimport moment from 'moment';\r\nimport { createSrc } from '../utility/user';\r\n\r\nexport const addComment = (commentData, token) => {\r\n  return new Promise((resolve, reject) => {\r\n    const datetime = new Date().getTime();\r\n    commentData.datetime = datetime;\r\n\r\n    axios.post(`${process.env.REACT_APP_FIREBASE_DATABASE}/song-comment.json/?auth=${token}`, commentData)\r\n      .then(() => resolve())\r\n      .catch(error => reject(error))\r\n  })\r\n}\r\n\r\nexport const fetchComments = (songName) => {\r\n  return new Promise((resolve, reject) => {\r\n    let queryParams = `?orderBy=\"songName\"&equalTo=\"${songName}\"`;\r\n    axios.get(`${process.env.REACT_APP_FIREBASE_DATABASE}/song-comment.json/${queryParams}`)\r\n      .then(response => {\r\n        if (Object.keys(response.data).length === 0) resolve([]);\r\n\r\n        const fetchCommentOwner = commentsOwnersCachingDecorator();\r\n        const comments = Object.values(response.data);\r\n\r\n        Promise.all(comments.map(comment => fetchCommentOwner(comment.localId)))\r\n          .then(owners => comments.map((comment, index) => ({ ...comment, ...owners[index] })))\r\n          .then(comments => comments.sort((a, b) => b.datetime - a.datetime))\r\n          .then(comments => comments.map(comment => {\r\n            comment.datetime = moment(comment.datetime).fromNow()\r\n            \r\n            delete comment.localId;\r\n            delete comment.songName;\r\n            return comment;\r\n          }))\r\n          .then(comments => resolve(comments))\r\n      })\r\n      .catch(error => reject(error))\r\n  })\r\n}\r\n\r\nexport const commentsOwnersCachingDecorator = () => {\r\n  const users = new Map();\r\n\r\n  return (localId) => {\r\n    return new Promise((resolve, reject) => {\r\n      if (users.has(localId)) resolve(users.get(localId));\r\n\r\n      let queryParams = `?orderBy=\"localId\"&equalTo=\"${localId}\"`;\r\n      axios.get(`${process.env.REACT_APP_FIREBASE_DATABASE}/users.json/${queryParams}`)             //fetching user\r\n        .then(response => {\r\n          if (Object.keys(response.data).length > 0) {\r\n            let { username: author, image: avatar = 'profile.png' } = Object.values(response.data)[0];\r\n            avatar = createSrc(avatar, 'user-images');\r\n\r\n            users.set(localId, { author, avatar });\r\n            resolve({ author, avatar });\r\n          }\r\n          return axios.get(`${process.env.REACT_APP_FIREBASE_DATABASE}/bands.json/${queryParams}`)  //fetching band\r\n        })\r\n        .then(response => {\r\n          let { bandName: author, image: avatar = 'no-image.jpg' } = Object.values(response.data)[0];\r\n          avatar = createSrc(avatar, 'band-images');\r\n\r\n          users.set(localId, { author, avatar });\r\n          resolve({ author, avatar });\r\n        })\r\n        .catch(error => reject(error))\r\n    })\r\n  }\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport moment from 'moment';\r\nimport { trim } from 'lodash';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { Alert } from 'antd';\r\n\r\nimport AddComment from './AddComment/AddComment';\r\nimport CommentsList from './CommentsList/CommentsList';\r\nimport { fetchBandData } from '../../utility/user';\r\nimport { createSrc } from '../../utility/user';\r\nimport { addComment, fetchComments } from '../../utility/comments';\r\nimport './Comments.css';\r\n\r\nconst Comments = (props) => {\r\n  const [comments, setComments] = useState([]);\r\n  const [fetching, setFetching] = useState(true);\r\n  const [submitting, setSubmitting] = useState(false);\r\n  const [newComment, setNewComment] = useState('');\r\n  const [bandUser, setBandUser] = useState({});\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    if (!props.localId || !props.isBand) return;\r\n    fetchBandData(props.localId)\r\n      .then(bandData => setBandUser(bandData))\r\n      .catch(error => setError(error))\r\n  }, [props.localId, props.isBand])\r\n\r\n  useEffect(() => {\r\n    if (!props.playSong) return;\r\n\r\n    setComments([]);\r\n    setFetching(true);\r\n\r\n    fetchComments(props.playSong.fileName)\r\n      .then(comments => setComments(comments))\r\n      .then(() => setFetching(false))\r\n      .catch(error => setError(error))\r\n  }, [props.playSong])\r\n\r\n  if (!props.playSong) return null;\r\n\r\n  let currentUserData = {\r\n    name: props.username,\r\n    imageSrc: createSrc(props.userImage || 'profile.png', 'user-images'),\r\n  }\r\n  if (props.isBand.toString() === 'true') {\r\n    currentUserData = {\r\n      name: bandUser.bandName,\r\n      imageSrc: createSrc(bandUser.image, 'band-images'),\r\n    }\r\n  }\r\n\r\n  const handleSubmit = () => {\r\n    if (!trim(newComment)) return;\r\n    const userInfoIsFull = Object.values(currentUserData).reduce((fill, item) => item && fill, true);\r\n    if (!userInfoIsFull) {\r\n      setError({ message: 'Please config your profile' })\r\n    }\r\n    setError(null);\r\n    setSubmitting(true);\r\n\r\n    const commentData = {\r\n      songName: props.playSong.fileName,\r\n      localId: props.localId,\r\n      content: newComment,\r\n    }\r\n\r\n    addComment(commentData, props.idToken)\r\n      .then(() => {\r\n        const comment = {\r\n          author: currentUserData.name,\r\n          avatar: currentUserData.imageSrc,\r\n          content: <p>{newComment}</p>,\r\n          datetime: moment().fromNow(),\r\n        }\r\n\r\n        setComments(prevState => ([\r\n          comment,\r\n          ...prevState,\r\n        ]))\r\n        setNewComment('');\r\n        setSubmitting(false);\r\n      })\r\n      .catch(error => setError(error))\r\n  }\r\n\r\n  const handleChange = (event) => {\r\n    setNewComment(event.target.value);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <CommentsList comments={comments} loading={fetching} />\r\n      {error ? <Alert message={error.message} type='error' showIcon /> : null}\r\n      <AddComment\r\n        localId={props.localId}\r\n        newComment={newComment}\r\n        submitting={submitting}\r\n        userData={currentUserData}\r\n        disabled={fetching || submitting}\r\n        handleSubmit={handleSubmit}\r\n        handleChange={handleChange} />\r\n    </div>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    idToken: state.auth.idToken,\r\n    localId: state.auth.localId,\r\n    username: state.auth.username,\r\n    userImage: state.auth.image,\r\n    isBand: state.auth.isBand,\r\n    playSong: state.songs.playSong,\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(Comments);\r\n","import React from 'react';\r\n\r\nimport { Avatar } from 'antd';\r\nimport { PlayCircleFilled, PauseCircleFilled, LoadingOutlined } from '@ant-design/icons';\r\n\r\nimport classes from './SongAvatar.module.css';\r\nimport { createSrc } from '../../../../utility/user';\r\n\r\nconst SongAvatar = (props) => {\r\n  const { isCurrentAndPlay, selectedSongCanPlay } = props;\r\n\r\n  const songImageIcon = (\r\n    isCurrentAndPlay\r\n      ? selectedSongCanPlay\r\n        ? <PauseCircleFilled /> //if current song is playing\r\n        : <LoadingOutlined />   //if current song is loading\r\n      : <PlayCircleFilled />    //if selected song !== current song\r\n  )\r\n\r\n  return (\r\n    <>\r\n      <Avatar\r\n        shape='square'\r\n        size='large'\r\n        src={createSrc(props.imageName, 'pictures-of-songs')} />\r\n\r\n      <Avatar\r\n        className={classes.avatarMask}\r\n        shape='square'\r\n        size='large'\r\n        icon={songImageIcon}\r\n        onClick={props.onSongChoosed} />\r\n    </>\r\n  )\r\n}\r\n\r\nexport default SongAvatar;\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst SongBand = (props) => {\r\n  return (\r\n    <Link to={{\r\n      pathname: '/band',\r\n      state: {\r\n        localId: props.localId,\r\n      }\r\n    }}>\r\n      {props.bandName}\r\n    </Link>\r\n  )\r\n}\r\n\r\nexport default SongBand;\r\n","import React from 'react';\r\n\r\nimport { CustomerServiceOutlined } from '@ant-design/icons';\r\n\r\nimport { HeartIcon } from '../../../../../utility/icons';\r\nimport classes from './SongStatistics.module.css';\r\n\r\nconst SongStatistics = (props) => {\r\n  const onHeartClicked = (props.updating || !props.userIsAuth)\r\n    ? null\r\n    : props.userIsLikedSong\r\n      ? props.unlikeSong\r\n      : props.likeSong;\r\n\r\n  return (\r\n    <>\r\n      <div><CustomerServiceOutlined /> {props.listened_times}</div>\r\n      <div>\r\n        <HeartIcon\r\n          className={props.userIsLikedSong ? classes.heartIcon : null}\r\n          onClick={onHeartClicked} />{' '}\r\n        {props.likesCount}\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default SongStatistics;\r\n","import React from 'react';\r\n\r\nimport SongBand from './SongBand/SongBand';\r\nimport SongStatistics from './SongStatistics/SongStatistics';\r\nimport classes from './SongDescription.module.css';\r\n\r\nconst SongDescription = (props) => {\r\n  const { song, currentSong } = props;\r\n\r\n  const descriptionClasses = [classes.bottomSection];\r\n  if (currentSong) descriptionClasses.push(classes.bottomSectionActive);\r\n\r\n  return (\r\n    <div className={descriptionClasses.join(' ')}>\r\n      <div className={classes.bandName}>\r\n        <SongBand localId={song.localId} bandName={song.bandName} />\r\n      </div>\r\n      <div className={classes.songStatistics}>\r\n        <SongStatistics\r\n          userIsAuth={props.userIsAuth}\r\n          listened_times={song.listened_times}\r\n          userIsLikedSong={song.userIsLikedSong}\r\n          likesCount={song.likesCount}\r\n          likeSong={props.likeSong}\r\n          unlikeSong={props.unlikeSong}\r\n          updating={props.updating} />\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default SongDescription;\r\n","import React from 'react';\r\nimport { Draggable } from 'react-beautiful-dnd';\r\n\r\nconst DragItemWrapper = (props) => {\r\n  const { index } = props;\r\n\r\n  return (\r\n    <Draggable draggableId={'' + index} index={index}>\r\n      {provided => (\r\n\r\n        <div\r\n          ref={provided.innerRef}\r\n          {...provided.draggableProps}\r\n          {...provided.dragHandleProps}\r\n          >\r\n          {props.children}\r\n        </div>\r\n      )}\r\n    </Draggable>\r\n  )\r\n}\r\n\r\nexport default DragItemWrapper;\r\n","import React from 'react';\r\n\r\nimport { Card } from 'antd';\r\n\r\nimport SongAvatar from './SongAvatar/SongAvatar';\r\nimport SongDescription from './SongDescription/SongDescription';\r\nimport DragItemWrapper from '../../UI/DragListWrapper/DragItemWrapper/DragItemWrapper';\r\nimport { getDurationInHumanTime } from '../../../utility/audio';\r\nimport classes from './Song.module.css';\r\n\r\nconst Song = (props) => {\r\n  const { Meta } = Card;\r\n  const { song, currentSong, playNow, selectedSongCanPlay } = props;\r\n\r\n  const songCardClasses = [classes.songCard];\r\n  if (currentSong) songCardClasses.unshift(classes.activeSongCard);\r\n\r\n  const songDuration = getDurationInHumanTime(song.duration);\r\n\r\n  return (\r\n    <DragItemWrapper index={props.index}>\r\n      <Card className={songCardClasses.join(' ')}>\r\n        <Meta\r\n          className={classes.songContainer}\r\n          avatar={\r\n            <SongAvatar\r\n              imageName={song.imageName}\r\n              isCurrentAndPlay={currentSong && playNow}\r\n              selectedSongCanPlay={selectedSongCanPlay}\r\n              onSongChoosed={props.onSongChoosed} />\r\n          }\r\n\r\n          title={\r\n            <div className={classes.topSection}>\r\n              <div className={classes.songName}>{song.name}</div>\r\n              <div className={classes.songDuration}>{songDuration}</div>\r\n            </div>\r\n          }\r\n          description={\r\n            <SongDescription\r\n              song={song}\r\n              currentSong={currentSong}\r\n              userIsAuth={props.userIsAuth}\r\n              likeSong={props.likeSong}\r\n              unlikeSong={props.unlikeSong}\r\n              updating={props.updating} />\r\n          }\r\n        />\r\n      </Card>\r\n    </DragItemWrapper>\r\n  )\r\n}\r\n\r\nexport default React.memo(Song);\r\n","import React from 'react';\r\nimport { DragDropContext, Droppable } from 'react-beautiful-dnd';\r\n\r\nconst DragListWrapper = (props) => {\r\n  const { reorder } = props;\r\n\r\n  const onDragEnd = (result) => {\r\n    if (!result.destination) {\r\n      return;\r\n    }\r\n\r\n    if (result.destination.index === result.source.index) {\r\n      return;\r\n    }\r\n\r\n    reorder(result.source.index, result.destination.index);\r\n  }\r\n\r\n  return (\r\n    <DragDropContext onDragEnd={onDragEnd}>\r\n      <Droppable droppableId='list'>\r\n        {provided => (\r\n          <div ref={provided.innerRef} {...provided.droppableProps}>\r\n            {props.children}\r\n            {provided.placeholder}\r\n          </div>\r\n        )}\r\n      </Droppable>\r\n    </DragDropContext>\r\n  )\r\n}\r\n\r\nexport default DragListWrapper\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { Spin, Empty } from 'antd';\r\n\r\nimport Song from './Song/Song';\r\nimport DragListWrapper from '../UI/DragListWrapper/DragListWrapper';\r\nimport {\r\n  startPlayMusicActionCreator,\r\n  addSongLikeActionCreator,\r\n  removeSongLikeActionCreator,\r\n  reorderSongsListActionCreator,\r\n} from '../../store/songs/actions';\r\nimport classes from './Song.module.css';\r\n\r\nconst Songs = (props) => {\r\n  const { songs, loading, playSong, playNow } = props;\r\n\r\n  if (loading) return <Spin className={props.uxAtCenter ? classes.UXElement : null} />\r\n\r\n  let songsList = <Empty className={props.uxAtCenter ? classes.UXElement : null} image={Empty.PRESENTED_IMAGE_SIMPLE} />;\r\n  if (songs.length > 0) {\r\n    songsList = (\r\n      <DragListWrapper reorder={props.reorderSongs}>\r\n        {\r\n          songs.map((song, index) => (\r\n            <Song\r\n              key={index}\r\n              index={index}\r\n              song={song}\r\n              userIsAuth={!!props.localId}\r\n              updating={props.updating.includes(song.fileName)}\r\n              onSongChoosed={props.startPlayMusic.bind(this, song.fileName)}\r\n              likeSong={props.likeSong.bind(this, song.fileName, song.userLikeId)}\r\n              unlikeSong={props.unlikeSong.bind(this, song.fileName, song.userLikeId)}\r\n              playNow={playNow}\r\n              selectedSongCanPlay={props.selectedSongCanPlay}\r\n              currentSong={(playSong && playSong.fileName === song.fileName) ? true : false} />\r\n          ))\r\n        }\r\n      </DragListWrapper>\r\n    )\r\n  }\r\n\r\n  return songsList;\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    songs: state.songs.songs,\r\n    loading: state.songs.loading,\r\n    playSong: state.songs.playSong,\r\n    playNow: state.songs.playNow,\r\n    selectedSongCanPlay: state.songs.selectedSongCanPlay,\r\n    updating: state.songs.updating,\r\n    localId: state.auth.localId,\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    likeSong: (fileName, key) => { dispatch(addSongLikeActionCreator(fileName, key)) },\r\n    unlikeSong: (fileName, key) => { dispatch(removeSongLikeActionCreator(fileName, key)) },\r\n    startPlayMusic: (fileName) => { dispatch(startPlayMusicActionCreator(fileName)) },\r\n    reorderSongs: (oldIndex, newIndex) => { dispatch(reorderSongsListActionCreator(oldIndex, newIndex)) },\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Songs);\r\n","import React, { useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { Row, Col, Space } from 'antd';\r\n\r\nimport BandInfo from '../BandInfo/BandInfo';\r\nimport AddSong from '../AddSong/CreateSong';\r\nimport CurrentSong from '../CurrentSong/CurrentSong';\r\nimport Comments from '../Comments/Comments';\r\nimport Songs from '../Songs/Songs';\r\nimport { fetchBandDataActionCreator, clearBandDataActionCreator } from '../../store/band/actions';\r\nimport {\r\n  fetchBandSongsActionCreator,\r\n  clearSongListActionCreator,\r\n  startPlayRecivedSongActionCreator\r\n} from '../../store/songs/actions';\r\n\r\nconst Band = (props) => {\r\n  const { fetchBandSongs, fetchBandData, clearSongsList, clearBandData } = props;\r\n\r\n  useEffect(() => {\r\n    const bandId = props.location.state.localId;\r\n    fetchBandData(bandId);\r\n    fetchBandSongs(bandId)\r\n\r\n    return () => {\r\n      clearSongsList();\r\n      clearBandData();\r\n    }\r\n  }, [fetchBandData, fetchBandSongs, clearSongsList, clearBandData, props.location])\r\n\r\n  useEffect(() => {\r\n    if (!props.playSong && props.songs.length > 0) {\r\n      props.startPlay(props.songs[0]);\r\n    }\r\n  }, [props.playSong, props.songs])\r\n\r\n  return (\r\n    <Row>\r\n      <Col xs={{ span: 24 }} sm={{ span: 10 }} md={{ span: 6 }} lg={{ span: 6, offset: 2 }} >\r\n        <CurrentSong />\r\n        <Comments />\r\n      </Col>\r\n      <Col xs={{ span: 24 }} sm={{ span: 12, offset: 2 }} md={{ span: 16, offset: 2 }} lg={{ span: 14, offset: 2 }} >\r\n        <Space direction='vertical' style={{ width: '100%' }}>\r\n          <BandInfo />\r\n          <AddSong />\r\n          <Songs />\r\n        </Space>\r\n      </Col>\r\n    </Row>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    songs: state.songs.songs,\r\n    playSong: state.songs.playSong,\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    fetchBandData: (localId) => { dispatch(fetchBandDataActionCreator(localId)) },\r\n    fetchBandSongs: (localId) => { dispatch(fetchBandSongsActionCreator(localId)) },\r\n    clearSongsList: () => { dispatch(clearSongListActionCreator()) },\r\n    clearBandData: () => { dispatch(clearBandDataActionCreator()) },\r\n    startPlay: (song) => { dispatch(startPlayRecivedSongActionCreator(song)) },\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Band);\r\n","import React, { useState, useEffect } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\n\r\nimport { Spin } from 'antd';\r\nimport { PlayCircleFilled, LoadingOutlined } from '@ant-design/icons';\r\n\r\nimport { fetchImageByTag } from '../../../utility/song-queries';\r\nimport Logo from '../../../assets/images/icon.png';\r\nimport { createSrc } from '../../../utility/user';\r\nimport classes from './Suggestion.module.css';\r\n\r\nconst Suggestion = (props) => {\r\n  const [imageName, setImageName] = useState(null);\r\n  const [collectionChoosed, setCollectionChoosed] = useState(false);\r\n\r\n  useEffect(() => {\r\n    fetchImageByTag(props.tag)\r\n      .then(imageName => setImageName(imageName))\r\n  }, [])\r\n\r\n  if (!imageName) return (\r\n    <Spin spinning={true} >\r\n      <div className={classes.collectionPreview}>\r\n        <p>{`#${props.tag}`}</p>\r\n      </div>\r\n    </Spin>\r\n  )\r\n\r\n  const openCollection = () => {\r\n    setCollectionChoosed(true);\r\n    setTimeout(() => {\r\n      props.history.push('/collection', { tag: props.tag, })\r\n    }, 500)\r\n  }\r\n\r\n  const imageSrc = createSrc(imageName, 'pictures-of-songs')\r\n\r\n  const mask = (\r\n    <div className={classes.posterMask}>\r\n      <div className={classes.playIcon}>\r\n        {collectionChoosed ? <LoadingOutlined /> : <PlayCircleFilled onClick={openCollection} />}\r\n      </div>\r\n      <p className={classes.maskTitle}><img src={Logo} />{props.tag}</p>\r\n    </div>\r\n  )\r\n\r\n  return (\r\n    <div className={classes.poster}>\r\n      {mask}\r\n      <div className={classes.imageBackground} style={{ background: `url(${imageSrc}) center, linear-gradient(#000000, #FFF) fixed` }}>\r\n        <img\r\n          className={classes.posterImage}\r\n          src={imageSrc}\r\n          alt='collection-poster' />\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default React.memo(withRouter(Suggestion));\r\n","import React, { useState, useEffect, useRef } from 'react';\r\nimport { throttle } from 'lodash';\r\n\r\nimport { Row, Col, Spin } from 'antd';\r\n\r\nimport Suggestion from './Suggestion/Suggestion';\r\nimport classes from './Suggestions.module.css';\r\n\r\nconst Suggestions = (props) => {\r\n  const [showSuggestions, setShowSuggestions] = useState(false);\r\n  const titleRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    if (showSuggestions === false && props.suggestions.length > 0) {\r\n      checkOffset.current();\r\n    }\r\n  }, [props.suggestions.length])\r\n\r\n  useEffect(() => {\r\n    if (showSuggestions === false && props.suggestions.length > 0) {\r\n      window.addEventListener('scroll', checkOffset.current);\r\n    } else {\r\n      checkOffset.current.cancel();\r\n      window.removeEventListener('scroll', checkOffset.current);\r\n    }\r\n\r\n    return () => {\r\n      checkOffset.current.cancel();\r\n      window.removeEventListener('scroll', checkOffset.current);\r\n    }\r\n  }, [showSuggestions, props.suggestions])\r\n\r\n  const checkOffset = useRef(throttle(() => {\r\n    const userOffset = window.pageYOffset + window.innerHeight;\r\n    const elementOffset = titleRef.current.offsetTop;\r\n\r\n    if (userOffset - elementOffset > 0) {\r\n      setShowSuggestions(true);\r\n    }\r\n  }, 500));\r\n\r\n  if (props.suggestions.length === 0) return null;\r\n\r\n  let suggestionsList = <div style={{ height: '70vh', width: '100vw' }}><Spin /></div>\r\n  if (showSuggestions) {\r\n    suggestionsList = (\r\n      props.suggestions.map((tag, index) => (\r\n        <Col key={index} xs={{ span: 24 }} sm={{ span: 12 }} md={{ span: 8 }} lg={{ span: 6 }} >\r\n          <Suggestion tag={tag} />\r\n        </Col>\r\n      ))\r\n    )\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <a ref={titleRef} name={props.title} href={`#${props.title}`} className={classes.suggestionsTitle}>{`#${props.title}`}</a>\r\n      <Row>\r\n        {suggestionsList}\r\n      </Row>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default React.memo(Suggestions);\r\n","import axios from 'axios';\r\n\r\nexport const saveSongTagsToLocalStorage = (tags, userId) => {\r\n  let tagsHistory = JSON.parse(localStorage.getItem(userId));\r\n  if (!tagsHistory) tagsHistory = {};\r\n\r\n  for (let tag of tags) {\r\n    tagsHistory[tag] = {\r\n      count: tagsHistory[tag] ? tagsHistory[tag].count + 1 : 1,\r\n      time: new Date().getTime(),\r\n    }\r\n  }\r\n\r\n  localStorage.setItem(userId, JSON.stringify(tagsHistory));\r\n}\r\n\r\nexport const sortTags = (tagsHistory, sortFunc) => {\r\n  const history = [];\r\n  for (let [tag, data] of Object.entries(tagsHistory)) {\r\n    history.push([tag, data]);\r\n  }\r\n\r\n  return history.sort(sortFunc);\r\n}\r\n\r\nconst splitTagsByTime = (history) => {\r\n  const tagsSplitByTime = [];\r\n\r\n  while (history.length > 0) {\r\n    const tagsWithEqualTime = [];\r\n\r\n    for (let [tag, data] of history) {\r\n      if (tagsWithEqualTime.length === 0) tagsWithEqualTime.push([tag, data]);\r\n      else if (data.time === tagsWithEqualTime[0][1].time) tagsWithEqualTime.push([tag, data]);\r\n      else break;\r\n    }\r\n\r\n    tagsSplitByTime.push(tagsWithEqualTime);\r\n    history.splice(0, tagsWithEqualTime.length);\r\n  }\r\n\r\n  return tagsSplitByTime;\r\n}\r\n\r\nexport const cleanUpTags = (history) => {\r\n  const splitedTags = splitTagsByTime(history);\r\n\r\n  const searchTags = [];\r\n  for (let tags of splitedTags) {\r\n    tags.sort((a, b) => b[1].count - a[1].count);\r\n    searchTags.push(...tags.slice(0, 3));\r\n  }\r\n\r\n  return searchTags;\r\n}\r\n\r\nexport const getTagNames = (tags) => {\r\n  return tags.map(tag => tag[0]);\r\n}\r\n\r\nexport const getRecentTagsFromLocalStorage = (userId) => {\r\n  let tagsHistory = { ...JSON.parse(localStorage.getItem(userId)) };\r\n  if (!tagsHistory) return;\r\n\r\n  const sortFunc = (a, b) => b[1].time - a[1].time;\r\n\r\n  let history = sortTags(tagsHistory, sortFunc);\r\n  const tags = cleanUpTags(history).slice(0, 12);\r\n  return getTagNames(tags);\r\n}\r\n\r\nexport const getOftenTagsFromLocalStorage = (userId) => {\r\n  let tagsHistory = { ...JSON.parse(localStorage.getItem(userId)) };\r\n  if (!tagsHistory) return;\r\n\r\n  const sortFunc = (a, b) => b[1].count - a[1].count;\r\n\r\n  const tags = sortTags(tagsHistory, sortFunc).slice(0, 12);\r\n  return getTagNames(tags);\r\n}\r\n\r\nexport const fetchAdminCollections = () => {\r\n  return new Promise((resolve, reject) => {\r\n    axios.get(`${process.env.REACT_APP_FIREBASE_DATABASE}/admin-collections.json/`)\r\n      .then(response => response.data)\r\n      .then(collections => collections ? Object.values(collections) : null)\r\n      .then(collections => collections.sort((a, b) => a.position - b.position))\r\n      .then(collections => resolve(collections))\r\n      .catch(error => reject(error))\r\n  })\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { message } from 'antd';\r\n\r\nimport Suggestions from '../Suggestions/Suggestions';\r\nimport {\r\n  getRecentTagsFromLocalStorage,\r\n  getOftenTagsFromLocalStorage,\r\n  fetchAdminCollections,\r\n} from '../../utility/suggest-collection';\r\nimport { clearSongListActionCreator } from '../../store/songs/actions';\r\nconst Music = (props) => {\r\n  const { clearSongsList } = props;\r\n\r\n  const [oftenSuggestion, setOthenSuggestion] = useState([]);\r\n  const [recentSuggestion, setRecentSuggestion] = useState([]);\r\n  const [adminSuggestions, setAdminSuggestions] = useState([]);\r\n\r\n  useEffect(() => {\r\n    if (!props.localId) {\r\n      setOthenSuggestion([]);\r\n      setRecentSuggestion([]);\r\n      return;\r\n    }\r\n\r\n    setOthenSuggestion(getOftenTagsFromLocalStorage(props.localId));\r\n    setRecentSuggestion(getRecentTagsFromLocalStorage(props.localId));\r\n\r\n    return () => {\r\n      clearSongsList();\r\n    }\r\n  }, [clearSongsList, props.localId])\r\n\r\n  useEffect(() => {\r\n    fetchAdminCollections()\r\n      .then(collections => setAdminSuggestions(collections))\r\n      .catch(error => message.error(error.message))\r\n  }, [])\r\n\r\n  return (\r\n    <>\r\n      <Suggestions\r\n        title={'recent'}\r\n        suggestions={recentSuggestion} />\r\n      <Suggestions\r\n        title={'often'}\r\n        suggestions={oftenSuggestion} />\r\n      {\r\n        adminSuggestions.map((collection, index) => (\r\n          <Suggestions\r\n            key={index}\r\n            title={collection.name}\r\n            suggestions={collection.tags} />\r\n        ))\r\n      }\r\n    </>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    localId: state.auth.localId,\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    clearSongsList: () => { dispatch(clearSongListActionCreator()) },\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Music);\r\n","import React, { useState } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { Modal, Form, Divider, Space, Button } from 'antd';\r\n\r\nimport { createPlaylistActionCreator } from '../../../store/songs/actions';\r\nimport DataInputs from '../../UI/DataInputs/DataInputs';\r\n\r\nconst CreateModal = (props) => {\r\n  const [playlistData, setPlaylistData] = useState({\r\n    name: {\r\n      config: {\r\n        name: 'name',\r\n        label: 'Name',\r\n      },\r\n      validationRules: {\r\n        required: true,\r\n        type: 'string',\r\n        min: 2,\r\n        max: 25,\r\n      },\r\n      value: '',\r\n    },\r\n    description: {\r\n      config: {\r\n        type: 'text',\r\n        name: 'description',\r\n        label: 'Description',\r\n      },\r\n      validationRules: {\r\n        type: 'string',\r\n        max: 300,\r\n      },\r\n      value: '',\r\n    }\r\n  })\r\n\r\n  const onChangeHandler = (inputName, event) => {\r\n    const newValue = event.target.value;\r\n    setPlaylistData(prevState => ({\r\n      ...prevState,\r\n      [inputName]: {\r\n        ...prevState[inputName],\r\n        value: newValue,\r\n      }\r\n    }));\r\n  }\r\n\r\n  const createPlaylist = () => {\r\n    const playlistKey = new Date().getTime() + props.localId;\r\n    const data = {\r\n      key: playlistKey,\r\n      userId: props.localId,\r\n      name: playlistData.name.value,\r\n      description: playlistData.description.value,\r\n    }\r\n\r\n    props.createPlaylist(data);\r\n    props.onCancel();\r\n  }\r\n\r\n  return (\r\n    <Modal\r\n      title='Create new playlist'\r\n      footer={null}\r\n      visible\r\n      onCancel={props.onCancel}\r\n    >\r\n      <div className={'modal-note'}>{'PLEASE ENTER PLAYLIST NAME AND DESCRIPTION'}</div>\r\n\r\n      <Form name='nest-messages' onFinish={createPlaylist}>\r\n      <DataInputs stateInputs={playlistData} onChangeHandler={onChangeHandler} />\r\n\r\n        <Divider orientation='right'>\r\n          <Space>\r\n            <Button type='default' onClick={props.onCancel}>Cancel</Button>\r\n            <Button type='primary' htmlType={'submit'}>Ok</Button>\r\n          </Space>\r\n        </Divider>\r\n      </Form>\r\n    </Modal>\r\n  )\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    createPlaylist: (data) => { dispatch(createPlaylistActionCreator(data)) }\r\n  }\r\n}\r\n\r\nexport default connect(null, mapDispatchToProps)(CreateModal);\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport { Card } from 'antd';\r\nimport { ExportOutlined } from '@ant-design/icons';\r\n\r\nimport './PlaylistPoster.css';\r\n\r\nconst PlaylistPoster = ({ playlist }) => {\r\n  return (\r\n    <Link to={{\r\n      pathname: '/playlist',\r\n      state: {\r\n        key: playlist.key || 'liked',\r\n      }\r\n    }}>\r\n      <Card.Grid className={'playlist'}>\r\n        <ExportOutlined className={'playlist-icon'} />\r\n        <div className={'playlist-heat'}></div>\r\n        <div className={'playlist-info'}>\r\n          <div>\r\n            {playlist.name}\r\n          </div>\r\n          <div>\r\n            {playlist.description}\r\n          </div>\r\n        </div>\r\n      </Card.Grid>\r\n    </Link>\r\n  )\r\n}\r\n\r\nexport default PlaylistPoster;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Redirect } from 'react-router-dom';\r\n\r\nimport { Card, message } from 'antd';\r\nimport { PlusCircleOutlined, AppstoreOutlined } from '@ant-design/icons';\r\n\r\nimport CreateModal from './CreteModal/CreateModal';\r\nimport PlaylistPoster from './PlaylistPoster/PlaylistPoster';\r\nimport { likedSongs } from '../../utility/music-genres';\r\nimport { fetchLikedSongsCount } from '../../utility/song-queries';\r\n\r\nimport './Playlists.css';\r\n\r\nconst Playlists = (props) => {\r\n  const [showCreateModal, setShowCreateModal] = useState(false);\r\n  const [likedSongsCount, setLikedSongsCount] = useState(0);\r\n  const { playlists } = props;\r\n\r\n  useEffect(() => {\r\n    fetchLikedSongsCount(props.localId)\r\n      .then(likedSongsCount => setLikedSongsCount(likedSongsCount))\r\n      .catch(error => message.error(error.message))\r\n  })\r\n\r\n  if (!props.localId) {\r\n    return <Redirect to={'/'} />;\r\n  }\r\n\r\n  const openCreateModal = () => {\r\n    setShowCreateModal(true);\r\n  }\r\n\r\n  const closeCreateModal = () => {\r\n    setShowCreateModal(false);\r\n  }\r\n\r\n  let createModal = null;\r\n  if (showCreateModal) {\r\n    createModal = (\r\n      <CreateModal\r\n        localId={props.localId}\r\n        onCancel={closeCreateModal} />\r\n    )\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {createModal}\r\n      <Card\r\n        className={'playlist-card'}\r\n        title={<><AppstoreOutlined /> {'Playlists'}</>}\r\n      >\r\n        {likedSongsCount > 0 ? <PlaylistPoster playlist={likedSongs} /> : null}\r\n        {\r\n          playlists.map((playlist, index) => (\r\n            <PlaylistPoster key={index} playlist={playlist} />\r\n          ))\r\n        }\r\n\r\n        <Card.Grid className={'playlist'} onClick={openCreateModal}>\r\n          <div className={'add-playlist-button'}>\r\n            <PlusCircleOutlined />\r\n          </div>\r\n        </Card.Grid>\r\n      </Card>\r\n    </>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    localId: state.auth.localId,\r\n    playlists: state.songs.playlists,\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(Playlists);\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { Tooltip, Button } from 'antd';\r\nimport { ClockCircleOutlined, PlaySquareOutlined, RedoOutlined } from '@ant-design/icons';\r\n\r\nimport { getDurationInHumanTime } from '../../../../utility/audio';\r\nimport { shuffleSongsActionCreator } from '../../../../store/songs/actions';\r\nimport classes from './Statistics.module.css';\r\n\r\nconst Statistics = (props) => {\r\n  if (!props.songs.length) return null;\r\n\r\n  let playlistDuration = props.songs.reduce((duration, song) => duration + +song.duration, 0).toString();\r\n  playlistDuration = getDurationInHumanTime(playlistDuration);\r\n\r\n  return (\r\n    <>\r\n      <div className={classes.statistics}>\r\n        <Tooltip placement='bottom' title={'Playlist duration'}>\r\n          <ClockCircleOutlined /> {playlistDuration}\r\n        </Tooltip>\r\n        <Tooltip placement='bottom' title={'Tracks count'}>\r\n          <PlaySquareOutlined /> {props.songs.length}\r\n        </Tooltip>\r\n      </div>\r\n      <div>\r\n        <Tooltip placement='bottom' title={'Shuffle songs'}>\r\n          <Button type='dashed' onClick={props.shuffleSongs}>\r\n            <RedoOutlined /> {'Shuffle'}\r\n          </Button>\r\n        </Tooltip>\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    songs: state.songs.songs,\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    shuffleSongs: () => { dispatch(shuffleSongsActionCreator()) }\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Statistics);\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { uniqBy } from 'lodash';\r\n\r\nimport { SelectOutlined } from '@ant-design/icons';\r\n\r\nimport classes from './BandsList.module.css';\r\n\r\nconst BandsList = ({ songs }) => {\r\n  const linkToBand = (songBand) => (\r\n    <Link\r\n      key={songBand.localId}\r\n      to={{\r\n        pathname: '/band',\r\n        state: {\r\n          localId: songBand.localId,\r\n        }\r\n      }}\r\n      className={classes.bandLink}\r\n    >\r\n      <SelectOutlined /> {songBand.bandName}\r\n    </Link>\r\n  )\r\n\r\n  let songsBands = songs.map(song => (\r\n    {\r\n      bandName: song.bandName,\r\n      localId: song.localId,\r\n    }\r\n  ))\r\n\r\n  songsBands = uniqBy(songsBands, 'localId');\r\n\r\n  return songsBands.map(songBand => linkToBand(songBand));\r\n}\r\n\r\nexport default BandsList;\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { flatten } from 'lodash';\r\n\r\nimport classes from './Tags.module.css';\r\n\r\nconst Tags = ({ songs }) => {\r\n  const linkToCollection = (tag) => (\r\n    <Link\r\n      key={tag}\r\n      className={classes.tag}\r\n      to={{\r\n        pathname: '/collection',\r\n        state: { tag, }\r\n      }}\r\n    >\r\n      {`#${tag} `}\r\n    </Link>\r\n  )\r\n\r\n  let songsTags = flatten(songs.map(song => song.tags));\r\n  songsTags = new Set(songsTags);\r\n  \r\n  return Array.from(songsTags).map(tag => linkToCollection(tag));\r\n}\r\n\r\nexport default Tags;\r\n","import React from 'react';\r\n\r\nimport { Skeleton, Spin } from 'antd';\r\n\r\nimport Statistics from './Statistics/Statistics';\r\nimport BandsList from './BandsList/BandsList';\r\nimport Tags from './Tags/Tags';\r\nimport { likedSongs } from '../../../utility/music-genres';\r\nimport classes from './PlaylistHeat.module.css';\r\n\r\nconst PlaylistHeat = ({ playlist, playlistKey, songs }) => {\r\n  if (playlistKey === 'liked') {\r\n    playlist = likedSongs;\r\n  }\r\n  else if (!playlist) return <Skeleton active />;\r\n\r\n  let additionalData = <Spin size='small' />\r\n  if (songs.length > 0) {\r\n    additionalData = (\r\n      <>\r\n        <div className={classes.bands}>{<BandsList songs={songs} />}</div>\r\n        <div className={classes.tags}>{<Tags songs={songs} />}</div>\r\n        <div className={classes.statistic}><Statistics /></div>\r\n      </>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className={classes.heat}>\r\n      <div className={classes.title}>{playlist.name}</div>\r\n      <div className={classes.description}>{playlist.description}</div>\r\n      {additionalData}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default React.memo(PlaylistHeat);\r\n","import React, { useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Redirect } from 'react-router-dom';\r\n\r\nimport { Row, Col, Space } from 'antd';\r\n\r\nimport PlaylistHeat from './PlaylistHeat/PlaylistHeat';\r\nimport CurrentSong from '../CurrentSong/CurrentSong';\r\nimport Songs from '../Songs/Songs';\r\nimport Comments from '../Comments/Comments';\r\nimport {\r\n  clearSongListActionCreator,\r\n  fetchPlaylistRecordsActionCreator,\r\n  startPlayRecivedSongActionCreator,\r\n  fetchLikedSongsActionCreator,\r\n} from '../../store/songs/actions';\r\n\r\nconst Music = (props) => {\r\n  const { key: playlistKey } = props.location.state;\r\n  const { playlists, localId, clearSongsList, fetchPlaylistSongs, fetchLikedSongs } = props;\r\n\r\n  useEffect(() => {\r\n    if (playlistKey === 'liked') {\r\n      fetchLikedSongs(localId);\r\n    } else {\r\n      fetchPlaylistSongs(playlistKey);\r\n    }\r\n\r\n    return () => {\r\n      clearSongsList();\r\n    }\r\n  }, [playlistKey, fetchPlaylistSongs, clearSongsList, fetchLikedSongs, localId]);\r\n\r\n  useEffect(() => {\r\n    if (!props.playSong && props.songs.length > 0) {\r\n      props.startPlay(props.songs[0]);\r\n    }\r\n  }, [props.playSong, props.songs])\r\n\r\n  if (!localId) {\r\n    return <Redirect to={'/'} />;\r\n  }\r\n\r\n  const playlist = playlists.find(item => item.key === playlistKey);\r\n\r\n  return (\r\n    <Row>\r\n      <Col xs={{ span: 24 }} sm={{ span: 10 }} md={{ span: 6 }} lg={{ span: 6, offset: 2 }} >\r\n        <CurrentSong />\r\n        <Comments />\r\n      </Col>\r\n      <Col xs={{ span: 24 }} sm={{ span: 12, offset: 2 }} md={{ span: 16, offset: 2 }} lg={{ span: 14, offset: 2 }} >\r\n        <Space direction='vertical' style={{ width: '100%' }}>\r\n          <PlaylistHeat playlist={playlist} playlistKey={playlistKey} songs={props.songs} />\r\n          <Songs />\r\n        </Space>\r\n      </Col>\r\n    </Row>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    playlists: state.songs.playlists,\r\n    localId: state.auth.localId,\r\n    songs: state.songs.songs,\r\n    playSong: state.songs.playSong,\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    clearSongsList: () => { dispatch(clearSongListActionCreator()) },\r\n    fetchPlaylistSongs: (key) => { dispatch(fetchPlaylistRecordsActionCreator(key)) },\r\n    fetchLikedSongs: (localId) => { dispatch(fetchLikedSongsActionCreator(localId)) },\r\n    startPlay: (song) => { dispatch(startPlayRecivedSongActionCreator(song)) },\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Music);\r\n","import React, { useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { Row, Col } from 'antd';\r\n\r\nimport Comments from '../Comments/Comments';\r\nimport CurrentSong from '../CurrentSong/CurrentSong';\r\nimport Songs from '../Songs/Songs';\r\nimport {\r\n  fetchSongsByTagActionCreator,\r\n  clearSongListActionCreator,\r\n  startSongsLoadingActionCreator,\r\n  startPlayRecivedSongActionCreator,\r\n} from '../../store/songs/actions';\r\n\r\nconst Filter = (props) => {\r\n  const { getSongsByTag, startLoading, clearSongsList } = props;\r\n\r\n  useEffect(() => {\r\n    const tag = props.location.state.tag;\r\n\r\n    startLoading();\r\n    setTimeout(() => getSongsByTag(tag), 1000);\r\n    \r\n    return () => {\r\n      clearSongsList();\r\n    }\r\n  }, [getSongsByTag, startLoading, clearSongsList, props.location.state])\r\n\r\n  useEffect(() => {\r\n    if (!props.playSong && props.songs.length > 0) {\r\n      props.startPlay(props.songs[0]);\r\n    }\r\n  }, [props.playSong, props.songs])\r\n\r\n  return (\r\n    <Row>\r\n      <Col xs={{ span: 24 }} sm={{ span: 10 }} md={{ span: 6 }} lg={{ span: 6, offset: 2 }} >\r\n        <CurrentSong />\r\n        <Comments />\r\n      </Col>\r\n      <Col xs={{ span: 24 }} sm={{ span: 12, offset: 2 }} md={{ span: 16, offset: 2 }} lg={{ span: 14, offset: 2 }} >\r\n        <Songs />\r\n      </Col>\r\n    </Row>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    songs: state.songs.songs,\r\n    playSong: state.songs.playSong,\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    startLoading: () => { dispatch(startSongsLoadingActionCreator()) },\r\n    startPlay: (song) => { dispatch(startPlayRecivedSongActionCreator(song)) },\r\n    getSongsByTag: (tag) => { dispatch(fetchSongsByTagActionCreator(tag)) },\r\n    clearSongsList: () => { dispatch(clearSongListActionCreator()) },\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Filter);\r\n","import React from 'react';\r\n\r\nimport { Spin } from 'antd';\r\n\r\nimport classes from './ModalSpinner.module.css';\r\n\r\nconst ModalSpinner = () => {\r\n  return (\r\n    <div className={classes.modal}>\r\n      <Spin size='large' className={classes.spinner} />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ModalSpinner;\r\n","import React from 'react';\r\n\r\nimport { Input } from 'antd';\r\nimport { InfoCircleOutlined } from '@ant-design/icons';\r\n\r\nconst PanelHeat = (props) => {\r\n  return (\r\n    <Input\r\n      placeholder='Type collection name'\r\n      value={props.value}\r\n      onChange={props.onChange}\r\n      prefix={<InfoCircleOutlined />} />\r\n  )\r\n}\r\n\r\nexport default PanelHeat;\r\n","import React from 'react';\r\n\r\nimport { LoadingOutlined, SaveFilled } from '@ant-design/icons';\r\n\r\nconst SaveCollection = (props) => {\r\n  return (\r\n    <div className={\r\n      props.enabled\r\n        ? 'collapse-show-actions'\r\n        : 'collapse-should-not-update'\r\n    }\r\n      onClick={props.loading ? null : props.onClick}\r\n    >\r\n      {props.loading ? <LoadingOutlined /> : <SaveFilled />}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default SaveCollection;\r\n","import React from 'react';\r\n\r\nconst ReorderCollection = (props) => {\r\n  const classes = ['collapse-show-actions'];\r\n  if (!props.enabled) {\r\n    classes.push('collapse-disabled-actions');\r\n  }\r\n\r\n  return (\r\n    <div\r\n      className={classes.join(' ')}\r\n      onClick={props.enabled ? props.onClick : null}\r\n    >\r\n      {props.icon}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ReorderCollection;\r\n","import React from 'react';\r\n\r\nimport { Popconfirm } from 'antd';\r\nimport { LoadingOutlined, MinusSquareFilled } from '@ant-design/icons';\r\n\r\nconst DeleteCollection = (props) => {\r\n  return (\r\n    <Popconfirm\r\n      title='Are you sure delete this collection?'\r\n      onConfirm={props.loading ? null : props.onClick}\r\n      okText='Yes'\r\n      cancelText='No'\r\n    >\r\n      <div className={'collapse-show-actions'}>\r\n        {props.loading ? <LoadingOutlined /> : <MinusSquareFilled />}\r\n      </div>\r\n    </Popconfirm>\r\n  )\r\n}\r\n\r\nexport default DeleteCollection;\r\n","import React from 'react';\r\n\r\nimport { AutoComplete } from 'antd';\r\n\r\nimport classes from './SearchInput.module.css';\r\n\r\nconst SearchInput = (props) => {\r\n  return (\r\n    <AutoComplete\r\n      className={classes.searchInput}\r\n      value={props.value}\r\n      options={props.options}\r\n      onSelect={props.onSelect}\r\n      onChange={props.onChange}\r\n      placeholder='Type to search here'\r\n    />\r\n  )\r\n}\r\n\r\nexport default SearchInput;\r\n","import React from 'react';\r\n\r\nimport { Divider, Tag, Empty, Spin } from 'antd';\r\n\r\nimport classes from './InfoResults.module.css';\r\n\r\nconst InfoResults = (props) => {\r\n  if (props.loading) {\r\n    return <Spin size='small' />;\r\n  }\r\n  else if (props.data.length === 0) {\r\n    return <Empty image={Empty.PRESENTED_IMAGE_SIMPLE} />;\r\n  }\r\n\r\n  return (\r\n    <div className={classes.infoResults}>\r\n      <Divider orientation='left'>{props.label}</Divider>\r\n      {\r\n        props.data.map(([item, count]) => (\r\n          <Tag key={item} color='#ff7875'>\r\n            {`${item}: ${count}`}\r\n          </Tag>\r\n        ))\r\n      }\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default InfoResults;\r\n","import axios from 'axios';\r\nimport { countBy, flatten } from 'lodash';\r\n\r\nexport const getTagsByWord = (word) => {\r\n  return new Promise((resolve, reject) => {\r\n    let queryParams = `?orderBy=\"tag\"&startAt=\"${word}\"`;\r\n    axios.get(`${process.env.REACT_APP_FIREBASE_DATABASE}/song-tag.json/${queryParams}`)\r\n      .then(response => response.data)\r\n      .then(songsTags => songsTags ? Object.values(songsTags) : null)\r\n      .then(tags => tags.map(item => item.tag))\r\n      .then(tags => tags.filter(tag => tag.slice(0, word.length) === word))\r\n      .then(tags => new Set(tags))\r\n      .then(tags => resolve(tags))\r\n      .catch(error => reject(error))\r\n  })\r\n}\r\n\r\nexport const getTagsWithCountByWord = (word) => {\r\n  return new Promise((resolve, reject) => {\r\n    let queryParams = `?orderBy=\"tag\"&startAt=\"${word}\"`;\r\n    axios.get(`${process.env.REACT_APP_FIREBASE_DATABASE}/song-tag.json/${queryParams}`)\r\n      .then(response => response.data)\r\n      .then(songsTags => songsTags ? Object.values(songsTags) : null)\r\n      .then(tags => tags.filter(item => item.tag.slice(0, word.length) === word))\r\n      .then(tags => countBy(tags, 'tag'))\r\n      .then(tagsUsedTimes => resolve(tagsUsedTimes))\r\n      .catch(error => reject(error))\r\n  })\r\n}\r\n\r\nexport const getBandsByWord = (word) => {\r\n  return new Promise((resolve, reject) => {\r\n    let queryParams = `?orderBy=\"bandName\"&startAt=\"${word}\"`;\r\n    axios.get(`${process.env.REACT_APP_FIREBASE_DATABASE}/bands.json/${queryParams}`)\r\n      .then(response => response.data)\r\n      .then(bands => bands ? Object.values(bands) : null)\r\n      .then(bands => bands.filter(band => band.bandName.slice(0, word.length) === word))\r\n      .then(bands => resolve(bands))\r\n      .catch(error => reject(error))\r\n  })\r\n}\r\n\r\nexport const getSongTags = (songName) => {\r\n  return new Promise((resolve, reject) => {\r\n    let queryParams = `?orderBy=\"songName\"&equalTo=\"${songName}\"`;\r\n    axios.get(`${process.env.REACT_APP_FIREBASE_DATABASE}/song-tag.json/${queryParams}`)\r\n      .then(response => Object.values(response.data))\r\n      .then(songsTags => songsTags.map(songTag => songTag.tag))\r\n      .then(tags => resolve(tags))\r\n      .catch(error => reject(error))\r\n  })\r\n}\r\n\r\nexport const getBandTags = (localId) => {\r\n  return new Promise((resolve, reject) => {\r\n    let queryParams = `?orderBy=\"localId\"&equalTo=\"${localId}\"`;\r\n    axios.get(`${process.env.REACT_APP_FIREBASE_DATABASE}/songs.json/${queryParams}`)\r\n      .then(response => response.data)\r\n      .then(songs => songs ? Object.values(songs) : null)\r\n      .then(songs => songs.map(song => song.fileName))\r\n      .then(songsNames => songsNames.map(songName => getSongTags(songName)))\r\n      .then(tagQueries => Promise.all(tagQueries))\r\n      .then(tags => flatten(tags))\r\n      .then(tags => countBy(tags))\r\n      .then(tags => resolve(tags))\r\n      .catch(error => reject(error))\r\n  })\r\n}\r\n\r\nexport const getBandById = (localId) => {\r\n  return new Promise((resolve, reject) => {\r\n    let queryParams = `?orderBy=\"localId\"&equalTo=\"${localId}\"`;\r\n    axios.get(`${process.env.REACT_APP_FIREBASE_DATABASE}/bands.json/${queryParams}`)\r\n      .then(response => response.data)\r\n      .then(band => band ? Object.values(band)[0] : null)\r\n      .then(band => resolve(band))\r\n      .catch(error => reject(error))\r\n  })\r\n}\r\n\r\nexport const getBandBySongName = (fileName) => {\r\n  return new Promise((resolve, reject) => {\r\n    let queryParams = `?orderBy=\"fileName\"&equalTo=\"${fileName}\"`;\r\n    axios.get(`${process.env.REACT_APP_FIREBASE_DATABASE}/songs.json/${queryParams}`)\r\n      .then(response => response.data)\r\n      .then(song => song ? Object.values(song)[0] : null)\r\n      .then(song => getBandById(song.localId))\r\n      .then(band => resolve(band))\r\n      .catch(error => reject(error))\r\n  })\r\n}\r\n\r\nexport const getTagInfo = (tag) => {\r\n  return new Promise((resolve, reject) => {\r\n    let queryParams = `?orderBy=\"tag\"&equalTo=\"${tag}\"`;\r\n    axios.get(`${process.env.REACT_APP_FIREBASE_DATABASE}/song-tag.json/${queryParams}`)\r\n      .then(response => response.data)\r\n      .then(songsTags => songsTags ? Object.values(songsTags) : null)\r\n      .then(songsTags => songsTags.map(songTag => songTag.songName))      \r\n      .then(songsNames => songsNames.map(songName => getBandBySongName(songName)))\r\n      .then(songsQueries => Promise.all(songsQueries))\r\n      .then(bands => countBy(bands, 'bandName'))\r\n      .then(bands => resolve(bands))\r\n      .catch(error => reject(error))\r\n  })\r\n}\r\n\r\n","import React, { useState, useEffect, useRef } from 'react';\r\nimport { debounce } from 'lodash';\r\n\r\nimport { message, Radio } from 'antd';\r\n\r\nimport SearchInput from './SearchInput/SearchInput';\r\nimport InfoResults from './InfoResults/InfoResults';\r\nimport { getTagsWithCountByWord, getBandsByWord, getBandTags, getTagInfo } from '../../../utility/admin';\r\nimport classes from './InfoPanel.module.css';\r\n\r\nconst InfoPanel = () => {\r\n  const [searchWord, setSearchWord] = useState('');\r\n  const [searchResults, setSearchResults] = useState([]);\r\n  const [showTagsInfo, setShowTagsInfo] = useState(true);\r\n  const [infoBySearchWord, setInfoBySearchWord] = useState([]);\r\n  const [fetching, setFetching] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (searchWord.length < 2) return;\r\n\r\n    if (showTagsInfo) debounceTagsSearch.current(searchWord);\r\n    else debounceBandsSearch.current(searchWord);\r\n\r\n    setInfoBySearchWord([]);\r\n  }, [showTagsInfo])\r\n\r\n  const debounceTagsSearch = useRef(debounce((word) => {\r\n    getTagsWithCountByWord(word)\r\n      .then(response => Array.from(Object.entries(response)))\r\n      .then(tags => tags.map(([tag, count]) => (\r\n        {\r\n          label: `#${tag}: ${count} ${count > 1 ? 'songs' : 'song'}`,\r\n          value: tag,\r\n        }\r\n      )))\r\n      .then(tags => setSearchResults(tags))\r\n      .catch(error => message.error(error.message))\r\n  }, 800));\r\n\r\n  const debounceBandsSearch = useRef(debounce((word) => {\r\n    getBandsByWord(word)\r\n      .then(bands => bands.map(band => ({ value: band.localId, label: band.bandName })))\r\n      .then(bands => setSearchResults(bands))\r\n      .catch(error => message.error(error.message))\r\n  }, 800));\r\n\r\n  const onSearchWordChangeHandler = (word) => {\r\n    if (word.length < 2) {\r\n      setSearchResults([]);\r\n      setSearchWord(word);\r\n      return;\r\n    }\r\n\r\n    if (showTagsInfo) debounceTagsSearch.current(word);\r\n    else debounceBandsSearch.current(word);\r\n\r\n    setSearchWord(word);\r\n  }\r\n\r\n  const onOptionSelected = (word, selectedItem) => {\r\n    setFetching(true);\r\n\r\n    if (showTagsInfo) {\r\n      setSearchWord(selectedItem.value);\r\n      \r\n      getTagInfo(word)\r\n        .then(bands => Object.entries(bands))\r\n        .then(bands => setInfoBySearchWord(bands))\r\n        .then(() => setFetching(false))\r\n        .catch(error => message.error(error.message))\r\n    } else {\r\n      setSearchWord(selectedItem.label);\r\n\r\n      getBandTags(word)\r\n        .then(tags => Object.entries(tags))\r\n        .then(tags => setInfoBySearchWord(tags))\r\n        .then(() => setFetching(false))\r\n        .catch(error => message.error(error.message))\r\n    }\r\n  }\r\n\r\n  const onModeChange = (event) => {\r\n    setShowTagsInfo(event.target.value)\r\n  }\r\n\r\n  return (\r\n    <div className={classes.infoPanel}>\r\n      <SearchInput\r\n        value={searchWord}\r\n        options={searchResults}\r\n        onSelect={onOptionSelected}\r\n        onChange={onSearchWordChangeHandler} />\r\n      <Radio.Group onChange={onModeChange} value={showTagsInfo}>\r\n        <Radio value={true}>Tags</Radio>\r\n        <Radio value={false}>Bands</Radio>\r\n      </Radio.Group>\r\n      <InfoResults \r\n      label={showTagsInfo ? 'Bands' : 'Tags'} \r\n      data={infoBySearchWord}\r\n      loading={fetching} />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default InfoPanel;\r\n","import * as actionTypes from '../actionTypes';\r\nimport axios from 'axios';\r\nimport { message } from 'antd';\r\n\r\nexport const setCollectionsActionCreator = (collections) => {\r\n  return {\r\n    type: actionTypes.SET_COLLECTIONS,\r\n    collections,\r\n  }\r\n}\r\n\r\nexport const newCollectionValuesActionCreator = (data, index) => {\r\n  return {\r\n    type: actionTypes.SET_COLLECTION_VALUES,\r\n    data,\r\n    index,\r\n  }\r\n}\r\n\r\nexport const addCollectionToListActionCreator = (data) => {\r\n  return {\r\n    type: actionTypes.ADD_COLLECTION,\r\n    data,\r\n  }\r\n}\r\n\r\nexport const setUpdatesToCollectionActionCreator = (data, index) => {\r\n  return {\r\n    type: actionTypes.UPDATE_COLLECTION,\r\n    data,\r\n    index,\r\n  }\r\n}\r\n\r\nexport const sortCollectionsActionCreator = () => {\r\n  return {\r\n    type: actionTypes.SORT_COLLECTIONS,\r\n  }\r\n}\r\n\r\nexport const deleteCollectionFromListActionCreator = (index) => {\r\n  return {\r\n    type: actionTypes.DELETE_COLLECTION,\r\n    index,\r\n  }\r\n}\r\n\r\nexport const startCreatingActionCreator = () => {\r\n  return {\r\n    type: actionTypes.START_COLLECTION_CREATING,\r\n  }\r\n}\r\n\r\nexport const finishCreatingActionCreator = () => {\r\n  return {\r\n    type: actionTypes.FINISH_COLLECTION_CREATING,\r\n  }\r\n}\r\n\r\nexport const startUpdatingActionCreator = (index) => {\r\n  return {\r\n    type: actionTypes.START_COLLECTION_UPDATING,\r\n    index,\r\n  }\r\n}\r\n\r\nexport const finishUpdatingActionCreator = () => {\r\n  return {\r\n    type: actionTypes.FINISH_COLLECTION_UPDATING,\r\n  }\r\n}\r\n\r\nexport const startDeletingActionCreator = (index) => {\r\n  return {\r\n    type: actionTypes.START_COLLECTION_DELETING,\r\n    index,\r\n  }\r\n}\r\n\r\nexport const finishDeletingActionCreator = () => {\r\n  return {\r\n    type: actionTypes.FINISH_COLLECTION_DELETING,\r\n  }\r\n}\r\n\r\nexport const fetchCollectionsActionCreator = () => {\r\n  return dispatch => {\r\n    axios.get(`${process.env.REACT_APP_FIREBASE_DATABASE}/admin-collections.json`)\r\n      .then(response => response.data)\r\n      .then(data => data ? data : {})\r\n      .then(collections => Object.entries(collections).map(([key, collection]) => ({ ...collection, key })))\r\n      .then(collections => dispatch(setCollectionsActionCreator(collections)))\r\n      .then(() => dispatch(sortCollectionsActionCreator()))\r\n      .catch(error => message.error(error.message))\r\n  }\r\n}\r\n\r\nexport const createCollectionActionCreator = (data, token) => {\r\n  return dispatch => {\r\n    dispatch(startCreatingActionCreator())\r\n    axios.post(`${process.env.REACT_APP_FIREBASE_DATABASE}/admin-collections.json/?auth=${token}`, data)\r\n      .then((response) => {\r\n        data.key = response.data.name;\r\n        dispatch(addCollectionToListActionCreator(data));\r\n        dispatch(sortCollectionsActionCreator());\r\n        dispatch(finishCreatingActionCreator());\r\n      })\r\n  }\r\n}\r\n\r\nexport const updateCollectionActionCreator = (data, index, token) => {\r\n  return dispatch => {\r\n    dispatch(startUpdatingActionCreator(index));\r\n    const { name, tags, position } = data;\r\n    axios.patch(`${process.env.REACT_APP_FIREBASE_DATABASE}/admin-collections/${data.key}.json/?auth=${token}`, { name, tags, position })\r\n      .then(() => {\r\n        dispatch(setUpdatesToCollectionActionCreator(data, index));\r\n        dispatch(sortCollectionsActionCreator());\r\n        dispatch(finishUpdatingActionCreator());\r\n      })\r\n  }\r\n}\r\n\r\nexport const deleteCollectionActionCreator = (data, index, token) => {\r\n  return dispatch => {\r\n    dispatch(startDeletingActionCreator(index));\r\n    axios.delete(`${process.env.REACT_APP_FIREBASE_DATABASE}/admin-collections/${data.key}.json/?auth=${token}`)\r\n      .then(() => {\r\n        dispatch(deleteCollectionFromListActionCreator(index));\r\n        dispatch(sortCollectionsActionCreator());\r\n        dispatch(finishDeletingActionCreator());\r\n      })\r\n  }\r\n}\r\n\r\nexport const reorderActionCreator = (oldCollectionPosition, newCollectionPosition, token) => {\r\n  return dispatch => {\r\n    const { collection: firstCollection, index: oldIndex } = oldCollectionPosition;\r\n    const { collection: secondCollection, index: newIndex } = newCollectionPosition;\r\n\r\n    dispatch(updateCollectionActionCreator({ ...firstCollection, position: secondCollection.position }, oldIndex, token));\r\n    dispatch(updateCollectionActionCreator({ ...secondCollection, position: firstCollection.position }, newIndex, token));\r\n  }\r\n}\r\n","import React, { useState, useEffect, useRef } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Redirect } from 'react-router-dom';\r\nimport { message } from 'antd';\r\nimport { debounce } from 'lodash';\r\n\r\nimport { Collapse, Select, Spin, Row, Col } from 'antd';\r\nimport { CaretRightOutlined, UpOutlined, DownOutlined } from '@ant-design/icons';\r\n\r\nimport ModalSpinner from '../UI/ModalSpinner/ModalSpinner';\r\nimport PanelHeat from './PanelHeat/PanelHeat';\r\nimport SaveCollection from './SaveCollection/SaveCollection';\r\nimport ReorderButton from './ReorderCollection/ReorderCollection';\r\nimport DeleteButton from './DeleteCollection/DeleteCollection';\r\nimport InfoPanel from './InfoPanel/InfoPanel';\r\nimport {\r\n  fetchCollectionsActionCreator,\r\n  newCollectionValuesActionCreator,\r\n  createCollectionActionCreator,\r\n  updateCollectionActionCreator,\r\n  deleteCollectionActionCreator,\r\n  reorderActionCreator,\r\n} from '../../store/admin/actions';\r\nimport { getTagsByWord } from '../../utility/admin';\r\nimport './Admin.css';\r\n\r\nconst Admin = (props) => {\r\n  const { Panel } = Collapse;\r\n  const { Option } = Select;\r\n  const [createCollectionName, setCreateCollectionName] = useState('');\r\n  const [createCollectionTags, setCreateCollectionTags] = useState([]);\r\n  const [searchTags, setSearchTags] = useState([]);\r\n  const [fetchingSearchTags, setFetchingSearchTags] = useState(false);\r\n\r\n  useEffect(() => {\r\n    props.fetchCollection();\r\n  }, [props.fetchCollection])\r\n\r\n  const debounceTagsSearch = useRef(debounce((word, callback) => {\r\n    getTagsByWord(word)\r\n      .then(response => Array.from(response))\r\n      .then(tags => setSearchTags(tags))\r\n      .then(() => callback())\r\n      .catch(error => message.error(error.message))\r\n  }, 800));\r\n\r\n  if (!props.isAdmin) return <Redirect to='/' />;\r\n  if (props.loading) return <div style={{ position: 'relative' }}><ModalSpinner /></div>\r\n\r\n  const clearNewCollectionState = () => {\r\n    setCreateCollectionName('');\r\n    setCreateCollectionTags([]);\r\n  }\r\n\r\n  const handleCreateCollectionNameChange = (event) => {\r\n    setCreateCollectionName(event.target.value);\r\n  }\r\n\r\n  const handleCreateCollectionTagsChange = (tags) => {\r\n    if (tags.length > 12) {\r\n      message.warn('Each collection must contain no more than 12 tags')\r\n      return;\r\n    }\r\n\r\n    setCreateCollectionTags(tags);\r\n  }\r\n\r\n  const handleCollectionNameChange = (index, event) => {\r\n    const name = event.target.value;\r\n    props.setNewCollectionValues({ name }, index);\r\n  }\r\n\r\n  const handleCollectionTagsChange = (index, tags) => {\r\n    if (tags.length > 12) {\r\n      message.warn('Each collection must contain no more than 12 tags')\r\n      return;\r\n    }\r\n\r\n    props.setNewCollectionValues({ tags }, index);\r\n  }\r\n\r\n  const createCollection = (event) => {\r\n    event.stopPropagation();\r\n    if (createCollectionName.length === 0 || createCollectionTags.length === 0) {\r\n      return;\r\n    }\r\n\r\n    const collectionsCount = props.collections.length;\r\n\r\n    const collection = {\r\n      name: createCollectionName,\r\n      tags: createCollectionTags,\r\n      position: collectionsCount ? props.collections[collectionsCount - 1].position + 1 : 0,\r\n    }\r\n    props.saveCollection(collection, props.idToken);\r\n    setTimeout(() => clearNewCollectionState(), 500);\r\n  }\r\n\r\n  const updateCollection = (collection, index, event) => {\r\n    event.stopPropagation();\r\n    if (collection.name.length === 0 || collection.tags.length === 0) {\r\n      return;\r\n    }\r\n\r\n    props.updateCollection(collection, index, props.idToken);\r\n  }\r\n\r\n  const deleteCollection = (collection, index, idToken, event) => {\r\n    event.stopPropagation();\r\n    props.deleteCollection(collection, index, idToken);\r\n  }\r\n\r\n  const changeSearchResult = (event) => {\r\n    const word = event.target.value;\r\n    if (word.length < 2) {\r\n      setSearchTags([]);\r\n      return;\r\n    }\r\n    setFetchingSearchTags(true);\r\n    debounceTagsSearch.current(word, setFetchingSearchTags.bind(this, false));\r\n  }\r\n\r\n  const collectionWithIndex = (index) => {\r\n    return {\r\n      collection: props.collections[index],\r\n      index,\r\n    }\r\n  }\r\n\r\n  const reorderCollections = (oldIndex, newIndex, event) => {\r\n    event.stopPropagation();\r\n    if (!props.collections[oldIndex] || !props.collections[newIndex]) return;\r\n\r\n    props.reorder(collectionWithIndex(oldIndex), collectionWithIndex(newIndex), props.idToken);\r\n  }\r\n\r\n  return (\r\n    <Row>\r\n      <Col xs={{ span: 24 }} sm={{ span: 12 }} md={{ span: 16 }} lg={{ span: 16 }}>\r\n        <Collapse\r\n          bordered={false}\r\n          expandIcon={({ isActive }) => <CaretRightOutlined rotate={isActive ? 90 : 0} />}\r\n          className='site-collapse-custom-collapse'\r\n        >\r\n          {\r\n            props.collections.map((collection, index) => (\r\n              <Panel\r\n                key={index}\r\n                header={\r\n                  <PanelHeat\r\n                    value={collection.name}\r\n                    onChange={handleCollectionNameChange.bind(this, index)} />\r\n                }\r\n                extra={\r\n                  <div className={'action-buttons'}>\r\n                    <SaveCollection\r\n                      loading={props.updating === index}\r\n                      onClick={updateCollection.bind(this, collection, index)}\r\n                      enabled={collection.shouldUpdate} />\r\n                    <ReorderButton\r\n                      icon={<DownOutlined />}\r\n                      enabled={props.updating === null}\r\n                      onClick={reorderCollections.bind(this, index, index + 1)} />\r\n                    <ReorderButton\r\n                      icon={<UpOutlined />}\r\n                      enabled={props.updating === null}\r\n                      onClick={reorderCollections.bind(this, index, index - 1)} />\r\n                    <DeleteButton\r\n                      loading={props.deleting === index}\r\n                      onClick={deleteCollection.bind(this, collection, index, props.idToken)} />\r\n                  </div>\r\n                }\r\n                className={`site-collapse-custom-panel ${collection.shouldUpdate ? 'pane-should-update' : null}`}\r\n              >\r\n                <Select\r\n                  mode='multiple'\r\n                  style={{ width: '100%' }}\r\n                  placeholder='Collection tags'\r\n                  value={collection.tags}\r\n                  notFoundContent={fetchingSearchTags ? <Spin size='small' /> : null}\r\n                  onInput={changeSearchResult}\r\n                  onChange={handleCollectionTagsChange.bind(this, index)}\r\n                >\r\n                  {\r\n                    searchTags.map((tag) => (\r\n                      <Option key={tag}>{tag}</Option>\r\n                    ))\r\n                  }\r\n                </Select>\r\n              </Panel>\r\n            ))\r\n          }\r\n          <Panel\r\n            key={props.collections.length + 1}\r\n            header={\r\n              <PanelHeat\r\n                value={createCollectionName}\r\n                onChange={handleCreateCollectionNameChange} />\r\n            }\r\n            extra={\r\n              <SaveCollection\r\n                loading={props.creating}\r\n                onClick={createCollection}\r\n                enabled={createCollectionName.length > 0 && createCollectionTags.length > 0} />\r\n            }\r\n            className='site-collapse-custom-panel'\r\n          >\r\n            <Select\r\n              mode='multiple'\r\n              style={{ width: '100%' }}\r\n              placeholder='Collection tags'\r\n              value={createCollectionTags}\r\n              notFoundContent={fetchingSearchTags ? <Spin size='small' /> : null}\r\n              onInput={changeSearchResult}\r\n              onChange={handleCreateCollectionTagsChange}\r\n            >\r\n              {\r\n                searchTags.map((tag) => (\r\n                  <Option key={tag}>{tag}</Option>\r\n                ))\r\n              }\r\n            </Select>\r\n          </Panel>\r\n        </Collapse>\r\n      </Col>\r\n      <Col xs={{ span: 24 }} sm={{ span: 11, offset: 1 }} md={{ span: 7, offset: 1 }} >\r\n        <InfoPanel />\r\n      </Col>\r\n    </Row>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    isAdmin: state.auth.isAdmin,\r\n    collections: state.adm.collections,\r\n    loading: state.adm.loading,\r\n    creating: state.adm.creating,\r\n    updating: state.adm.updating,\r\n    deleting: state.adm.deleting,\r\n    idToken: state.auth.idToken,\r\n  }\r\n}\r\n\r\nconst dispatchToProps = (dispatch) => {\r\n  return {\r\n    fetchCollection: () => { dispatch(fetchCollectionsActionCreator()) },\r\n    setNewCollectionValues: (data, index) => { dispatch(newCollectionValuesActionCreator(data, index)) },\r\n    saveCollection: (data, token) => { dispatch(createCollectionActionCreator(data, token)) },\r\n    updateCollection: (data, index, token) => { dispatch(updateCollectionActionCreator(data, index, token)) },\r\n    deleteCollection: (data, index, token) => { dispatch(deleteCollectionActionCreator(data, index, token)) },\r\n    reorder: (firstCollection, secondCollections, token) => { dispatch(reorderActionCreator(firstCollection, secondCollections, token)) },\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, dispatchToProps)(Admin);\r\n","import React from 'react';\r\nimport { Switch, Route } from 'react-router-dom';\r\n\r\nimport { Layout } from 'antd';\r\n\r\nimport SignUp from '../../Authorization/SignUp/SignUp';\r\nimport SignIn from '../../Authorization/SignIn/SignIn';\r\nimport Band from '../../Band/Band';\r\nimport Main from '../../Main/Main';\r\nimport Playlists from '../../Playlists/Playlists';\r\nimport Playlist from '../../Playlist/Playlist';\r\nimport Collection from '../../Collection/Collection';\r\nimport Admin from '../../Admin/Admin';\r\n\r\nconst ContentComponent = () => {\r\n  const { Content } = Layout;\r\n\r\n  return (\r\n    <Content className='content-layout-background'>\r\n      <Switch>\r\n        <Route path='/sign-up' component={SignUp} exact />\r\n        <Route path='/sign-in' component={SignIn} exact />\r\n        <Route path='/band' component={Band} exact />\r\n        <Route path='/playlist' component={Playlist} exact />\r\n        <Route path='/playlists' component={Playlists} exact />\r\n        <Route path='/collection' component={Collection} exact />\r\n        <Route path='/admin' component={Admin} exact />\r\n        <Route path='/' component={Main} />\r\n      </Switch>\r\n    </Content>\r\n  )\r\n}\r\n\r\nexport default ContentComponent;\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { Menu } from 'antd';\r\nimport { AppstoreOutlined } from '@ant-design/icons';\r\n\r\n\r\nimport { addSongToPlaylistActionCreator } from '../../../../store/songs/actions';\r\nimport classes from './PlaylistMenu.module.css';\r\n\r\nconst PlaylistsMenu = (props) => {\r\n  const addSongToPlaylist = (playlistId, songName) => {\r\n    const data = {\r\n      playlistId,\r\n      songName,\r\n    }\r\n\r\n    props.addToPlaylist(data);\r\n  }\r\n\r\n  return (\r\n    <Menu className={classes.menu}>\r\n      {\r\n        props.playlists.map((playlist, index) => (\r\n          <Menu.Item\r\n            key={index}\r\n            onClick={addSongToPlaylist.bind(this, playlist.key, props.playSong.fileName)}\r\n          >\r\n            <AppstoreOutlined /> {playlist.name}\r\n          </Menu.Item>\r\n        ))\r\n      }\r\n    </Menu>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    playlists: state.songs.playlists,\r\n    playSong: state.songs.playSong,\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    addToPlaylist: (data) => { dispatch(addSongToPlaylistActionCreator(data)) }\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(PlaylistsMenu);\r\n","import React, { useState } from 'react';\r\n\r\nimport { Dropdown } from 'antd';\r\nimport { AppstoreAddOutlined } from '@ant-design/icons';\r\n\r\nimport PlaylistsMenu from './PlaylistsMenu/PlaylistsMenu';\r\n\r\nconst AddToPlaylist = () => {\r\n  const [showPlaylists, setShowPlaylists] = useState(false);\r\n\r\n  const toggleShowPlaylist = () => {\r\n    setTimeout(() => {\r\n      setShowPlaylists(prevState => !prevState);\r\n    }, 100)\r\n  }\r\n\r\n  return (\r\n    <Dropdown\r\n      overlay={() => <PlaylistsMenu />}\r\n      visible={showPlaylists}\r\n      placement='topCenter'\r\n    >\r\n      <AppstoreAddOutlined\r\n        style={{ fontSize: '22px' }}\r\n        className={'rhap_button-clear'}\r\n        onClick={toggleShowPlaylist}\r\n        onBlur={toggleShowPlaylist} />\r\n    </Dropdown>\r\n  )\r\n}\r\n\r\nexport default AddToPlaylist;\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport { Avatar } from 'antd';\r\n\r\nimport classes from './SongInfo.module.css';\r\nimport { createSrc } from '../../../utility/user';\r\n\r\nconst SongInfo = (props) => {\r\n  const linkToBand = (\r\n    <Link to={{\r\n      pathname: '/band',\r\n      state: {\r\n        localId: props.localId,\r\n      }\r\n    }}>{props.bandName}</Link>\r\n  )\r\n\r\n  return (\r\n    <div className={classes.songInfoArea}>\r\n      <div>\r\n        <Avatar\r\n          shape='square'\r\n          className={classes.avatar}\r\n          src={createSrc(props.imageName, 'pictures-of-songs')} />\r\n      </div>\r\n      <div className={classes.textInfo}>\r\n        <div>{props.name}</div>\r\n        <div>{linkToBand}</div>\r\n      </div>\r\n    </div>)\r\n}\r\n\r\nexport default SongInfo;\r\n","import React, { useEffect, useRef } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { RHAP_UI } from 'react-h5-audio-player/es/constants';\r\n\r\nimport AudioPlayer from 'react-h5-audio-player';\r\nimport AddToPlaylist from './AddToPlaylist/AddToPlaylist';\r\nimport 'react-h5-audio-player/lib/styles.css';\r\n\r\nimport {\r\n  playSongActionCreator,\r\n  pauseSongActionCreator,\r\n  songReadyToPlayActionCreator,\r\n  playNextSongActionCreator,\r\n  playPrevSongActionCreator,\r\n  updateSongListenedTimesActionCreator,\r\n} from '../../store/songs/actions';\r\nimport { saveSongTagsToLocalStorage } from '../../utility/suggest-collection';\r\nimport SongInfo from './SongInfo/SongInfo';\r\nimport './Player.css';\r\n\r\nconst Player = (props) => {\r\n  const { playSong, playNow } = props;\r\n  const playerRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    if (!playSong) return;\r\n\r\n    playNow\r\n      ? playerRef.current.audio.current.play()\r\n      : playerRef.current.audio.current.pause()\r\n  }, [playSong, playNow])\r\n\r\n  const SONG_DATA = <SongInfo\r\n    name={playSong.name}\r\n    bandName={playSong.bandName}\r\n    imageName={playSong.imageName}\r\n    localId={playSong.localId} />\r\n\r\n  const ADD_TO_PLAYLIST = props.userId ? <AddToPlaylist /> : null;\r\n\r\n  return (\r\n    <AudioPlayer\r\n      ref={playerRef}\r\n      layout={'horizontal'}\r\n      showSkipControls\r\n      className={'audio-player'}\r\n      onPlay={props.onPlayHandler}\r\n      onPause={props.onPauseHandler}\r\n      onAbort={saveSongTagsToLocalStorage.bind(this, playSong.tags, props.userId)}\r\n      onClickNext={props.playNext}\r\n      onClickPrevious={props.playPrev}\r\n      onCanPlay={props.onReadyToPlayHandler}\r\n      onEnded={() => { props.updateListenedTimes(playSong.fileName); props.playNext(); }}\r\n      customAdditionalControls={[RHAP_UI.LOOP, ADD_TO_PLAYLIST]}\r\n      customProgressBarSection={[SONG_DATA, RHAP_UI.CURRENT_TIME, RHAP_UI.PROGRESS_BAR, RHAP_UI.DURATION]}\r\n      src={'https://firebasestorage.googleapis.com/v0/b/'\r\n        + `${process.env.REACT_APP_FIREBASE_KEY_STORE_BUCKET}/o/songs%2F`\r\n        + `${playSong.fileName}?alt=media`}\r\n    />\r\n  )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    playSong: state.songs.playSong,\r\n    playNow: state.songs.playNow,\r\n    selectedSongCanPlay: state.songs.selectedSongCanPlay,\r\n    userId: state.auth.localId,\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    playNext: () => { dispatch(playNextSongActionCreator()) },\r\n    playPrev: () => { dispatch(playPrevSongActionCreator()) },\r\n    onPlayHandler: () => { dispatch(playSongActionCreator()) },\r\n    onPauseHandler: () => { dispatch(pauseSongActionCreator()) },\r\n    onReadyToPlayHandler: () => { dispatch(songReadyToPlayActionCreator()) },\r\n    updateListenedTimes: (fileName) => { dispatch(updateSongListenedTimesActionCreator(fileName)) },\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Player);\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport Player from '../../Player/Player';\r\nimport classes from './Footer.module.css';\r\n\r\nconst Footer = ({ playSong }) => {\r\n  if (!playSong) return null;\r\n\r\n  return (\r\n    <>\r\n      <div className={classes.footerMargin}></div>\r\n      <Player />\r\n    </>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    playSong: state.songs.playSong,\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(Footer);\r\n","import React, { useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { Layout } from 'antd';\r\nimport './Layout.css';\r\n\r\nimport Header from './Header/Header';\r\nimport Content from './Content/Content';\r\nimport Footer from './Footer/Footer';\r\nimport { signInLocallyActionCreator } from '../../store/authorization/actions';\r\nimport { fetchPlaylistsActionCreator } from '../../store/songs/actions';\r\nimport ModalSpinner from '../UI/ModalSpinner/ModalSpinner';\r\n\r\nconst LayoutComponent = (props) => {\r\n  const { signInLocally, loading, fetchPlaylists } = props;\r\n\r\n  useEffect(() => {\r\n    signInLocally();\r\n  }, [signInLocally])\r\n\r\n  useEffect(() => {\r\n    if (props.localId) {\r\n      fetchPlaylists(props.localId);\r\n    }\r\n  }, [fetchPlaylists, props.localId])\r\n\r\n\r\n  let content = (\r\n    <Layout>\r\n      <Layout style={{ padding: '24px' }}>\r\n        <Content />\r\n      </Layout>\r\n    </Layout>\r\n  )\r\n  if (loading) content = <ModalSpinner />\r\n\r\n  return (\r\n    <Layout className='main-layout'>\r\n      <Header />\r\n      {content}\r\n      <Footer />\r\n    </Layout>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    loading: state.auth.loading,\r\n    localId: state.auth.localId,\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    signInLocally: () => { dispatch(signInLocallyActionCreator()) },\r\n    fetchPlaylists: (userId) => { dispatch(fetchPlaylistsActionCreator(userId)) }\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(LayoutComponent);\r\n","import React from 'react';\nimport { BrowserRouter } from 'react-router-dom';\n\nimport Layout from './components/Layout/Layout';\nimport \"antd/dist/antd.css\";\nimport './App.css';\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <BrowserRouter>\n        <Layout />\n      </BrowserRouter>\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { createStore, combineReducers, applyMiddleware } from 'redux';\nimport thunk from 'redux-thunk';\n\nimport authReducer from './store/authorization/reducer';\nimport bandReducer from './store/band/reducer';\nimport songsReducer from './store/songs/reducer';\nimport adminReducer from './store/admin/reducer';\n\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nconst store = createStore(combineReducers({\n  auth: authReducer,\n  band: bandReducer,\n  songs: songsReducer,\n  adm: adminReducer,\n}), applyMiddleware(thunk));\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"menu\":\"Menu_menu__WCcSj\",\"navLink\":\"Menu_navLink__1-RmR\",\"navLinkActive\":\"Menu_navLinkActive__1C4_v\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"collectionPreview\":\"Suggestion_collectionPreview__s3AXd\",\"poster\":\"Suggestion_poster__3Kht9\",\"imageBackground\":\"Suggestion_imageBackground__2D45B\",\"posterImage\":\"Suggestion_posterImage__1VCxa\",\"posterMask\":\"Suggestion_posterMask__1qpU_\",\"maskTitle\":\"Suggestion_maskTitle__3RZCj\",\"playIcon\":\"Suggestion_playIcon__1Gvga\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"songCard\":\"Song_songCard__t3-1r\",\"activeSongCard\":\"Song_activeSongCard__8n0Bh\",\"songContainer\":\"Song_songContainer__OGBe_\",\"topSection\":\"Song_topSection__vPyDQ\",\"songName\":\"Song_songName__1J6Jf\",\"songDuration\":\"Song_songDuration__2vJK_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"heat\":\"PlaylistHeat_heat__26Z0y\",\"title\":\"PlaylistHeat_title__3LFHp\",\"description\":\"PlaylistHeat_description__26H-E\",\"statistic\":\"PlaylistHeat_statistic__RLplU\",\"bands\":\"PlaylistHeat_bands__2685-\",\"tags\":\"PlaylistHeat_tags__tVMFO\"};"],"sourceRoot":""}